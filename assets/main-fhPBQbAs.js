var Ky=Object.defineProperty;var Py=(e,t,n)=>t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tn=(e,t,n)=>Py(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var Am={exports:{}},$i={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=Symbol.for("react.transitional.element"),e0=Symbol.for("react.fragment");function Tm(e,t,n){var a=null;if(n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:Jy,type:e,key:a,ref:t!==void 0?t:null,props:n}}$i.Fragment=e0;$i.jsx=Tm;$i.jsxs=Tm;Am.exports=$i;var c=Am.exports,km={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.transitional.element"),t0=Symbol.for("react.portal"),n0=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),l0=Symbol.for("react.consumer"),s0=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),c0=Symbol.for("react.memo"),Dm=Symbol.for("react.lazy"),u0=Symbol.for("react.activity"),ih=Symbol.iterator;function d0(e){return e===null||typeof e!="object"?null:(e=ih&&e[ih]||e["@@iterator"],typeof e=="function"?e:null)}var Lm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,jm={};function Ul(e,t,n){this.props=e,this.context=t,this.refs=jm,this.updater=n||Lm}Ul.prototype.isReactComponent={};Ul.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ul.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rm(){}Rm.prototype=Ul.prototype;function Ad(e,t,n){this.props=e,this.context=t,this.refs=jm,this.updater=n||Lm}var Td=Ad.prototype=new Rm;Td.constructor=Ad;Om(Td,Ul.prototype);Td.isPureReactComponent=!0;var ch=Array.isArray;function xu(){}var _t={H:null,A:null,T:null,S:null},Bm=Object.prototype.hasOwnProperty;function kd(e,t,n){var a=n.ref;return{$$typeof:Nd,type:e,key:t,ref:a!==void 0?a:null,props:n}}function f0(e,t){return kd(e.type,t,e.props)}function Dd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nd}function h0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uh=/\/+/g;function vc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?h0(""+e.key):t.toString(36)}function g0(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(xu,xu):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function rl(e,t,n,a,r){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(l){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Nd:case t0:s=!0;break;case Dm:return s=e._init,rl(s(e._payload),t,n,a,r)}}if(s)return r=r(e),s=a===""?"."+vc(e,0):a,ch(r)?(n="",s!=null&&(n=s.replace(uh,"$&/")+"/"),rl(r,t,n,"",function(d){return d})):r!=null&&(Dd(r)&&(r=f0(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(uh,"$&/")+"/")+s)),t.push(r)),1;s=0;var o=a===""?".":a+":";if(ch(e))for(var i=0;i<e.length;i++)a=e[i],l=o+vc(a,i),s+=rl(a,t,n,l,r);else if(i=d0(e),typeof i=="function")for(e=i.call(e),i=0;!(a=e.next()).done;)a=a.value,l=o+vc(a,i++),s+=rl(a,t,n,l,r);else if(l==="object"){if(typeof e.then=="function")return rl(g0(e),t,n,a,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function Do(e,t,n){if(e==null)return e;var a=[],r=0;return rl(e,a,"","",function(l){return t.call(n,l,r++)}),a}function m0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},p0={map:Do,forEach:function(e,t,n){Do(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Do(e,function(){t++}),t},toArray:function(e){return Do(e,function(t){return t})||[]},only:function(e){if(!Dd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Activity=u0;De.Children=p0;De.Component=Ul;De.Fragment=n0;De.Profiler=r0;De.PureComponent=Ad;De.StrictMode=a0;De.Suspense=i0;De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_t;De.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _t.H.useMemoCache(e)}};De.cache=function(e){return function(){return e.apply(null,arguments)}};De.cacheSignal=function(){return null};De.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var a=Om({},e.props),r=e.key;if(t!=null)for(l in t.key!==void 0&&(r=""+t.key),t)!Bm.call(t,l)||l==="key"||l==="__self"||l==="__source"||l==="ref"&&t.ref===void 0||(a[l]=t[l]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var s=Array(l),o=0;o<l;o++)s[o]=arguments[o+2];a.children=s}return kd(e.type,r,a)};De.createContext=function(e){return e={$$typeof:s0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:l0,_context:e},e};De.createElement=function(e,t,n){var a,r={},l=null;if(t!=null)for(a in t.key!==void 0&&(l=""+t.key),t)Bm.call(t,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(r[a]=t[a]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),i=0;i<s;i++)o[i]=arguments[i+2];r.children=o}if(e&&e.defaultProps)for(a in s=e.defaultProps,s)r[a]===void 0&&(r[a]=s[a]);return kd(e,l,r)};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:o0,render:e}};De.isValidElement=Dd;De.lazy=function(e){return{$$typeof:Dm,_payload:{_status:-1,_result:e},_init:m0}};De.memo=function(e,t){return{$$typeof:c0,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=_t.T,n={};_t.T=n;try{var a=e(),r=_t.S;r!==null&&r(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(xu,dh)}catch(l){dh(l)}finally{t!==null&&n.types!==null&&(t.types=n.types),_t.T=t}};De.unstable_useCacheRefresh=function(){return _t.H.useCacheRefresh()};De.use=function(e){return _t.H.use(e)};De.useActionState=function(e,t,n){return _t.H.useActionState(e,t,n)};De.useCallback=function(e,t){return _t.H.useCallback(e,t)};De.useContext=function(e){return _t.H.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e,t){return _t.H.useDeferredValue(e,t)};De.useEffect=function(e,t){return _t.H.useEffect(e,t)};De.useEffectEvent=function(e){return _t.H.useEffectEvent(e)};De.useId=function(){return _t.H.useId()};De.useImperativeHandle=function(e,t,n){return _t.H.useImperativeHandle(e,t,n)};De.useInsertionEffect=function(e,t){return _t.H.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return _t.H.useLayoutEffect(e,t)};De.useMemo=function(e,t){return _t.H.useMemo(e,t)};De.useOptimistic=function(e,t){return _t.H.useOptimistic(e,t)};De.useReducer=function(e,t,n){return _t.H.useReducer(e,t,n)};De.useRef=function(e){return _t.H.useRef(e)};De.useState=function(e){return _t.H.useState(e)};De.useSyncExternalStore=function(e,t,n){return _t.H.useSyncExternalStore(e,t,n)};De.useTransition=function(){return _t.H.useTransition()};De.version="19.2.3";km.exports=De;var h=km.exports,zm={exports:{}},Fi={},Um={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,ne){var oe=Y.length;Y.push(ne);e:for(;0<oe;){var he=oe-1>>>1,Le=Y[he];if(0<r(Le,ne))Y[he]=ne,Y[oe]=Le,oe=he;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var ne=Y[0],oe=Y.pop();if(oe!==ne){Y[0]=oe;e:for(var he=0,Le=Y.length,Ke=Le>>>1;he<Ke;){var Pe=2*(he+1)-1,et=Y[Pe],je=Pe+1,Ae=Y[je];if(0>r(et,oe))je<Le&&0>r(Ae,et)?(Y[he]=Ae,Y[je]=oe,he=je):(Y[he]=et,Y[Pe]=oe,he=Pe);else if(je<Le&&0>r(Ae,oe))Y[he]=Ae,Y[je]=oe,he=je;else break e}}return ne}function r(Y,ne){var oe=Y.sortIndex-ne.sortIndex;return oe!==0?oe:Y.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var i=[],d=[],p=1,g=null,m=3,x=!1,L=!1,k=!1,U=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function S(Y){for(var ne=n(d);ne!==null;){if(ne.callback===null)a(d);else if(ne.startTime<=Y)a(d),ne.sortIndex=ne.expirationTime,t(i,ne);else break;ne=n(d)}}function N(Y){if(k=!1,S(Y),!L)if(n(i)!==null)L=!0,z||(z=!0,se());else{var ne=n(d);ne!==null&&Se(N,ne.startTime-Y)}}var z=!1,R=-1,K=5,F=-1;function P(){return U?!0:!(e.unstable_now()-F<K)}function re(){if(U=!1,z){var Y=e.unstable_now();F=Y;var ne=!0;try{e:{L=!1,k&&(k=!1,_(R),R=-1),x=!0;var oe=m;try{t:{for(S(Y),g=n(i);g!==null&&!(g.expirationTime>Y&&P());){var he=g.callback;if(typeof he=="function"){g.callback=null,m=g.priorityLevel;var Le=he(g.expirationTime<=Y);if(Y=e.unstable_now(),typeof Le=="function"){g.callback=Le,S(Y),ne=!0;break t}g===n(i)&&a(i),S(Y)}else a(i);g=n(i)}if(g!==null)ne=!0;else{var Ke=n(d);Ke!==null&&Se(N,Ke.startTime-Y),ne=!1}}break e}finally{g=null,m=oe,x=!1}ne=void 0}}finally{ne?se():z=!1}}}var se;if(typeof v=="function")se=function(){v(re)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ge=Ce.port2;Ce.port1.onmessage=re,se=function(){Ge.postMessage(null)}}else se=function(){b(re,0)};function Se(Y,ne){R=b(function(){Y(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var oe=m;m=ne;try{return Y()}finally{m=oe}},e.unstable_requestPaint=function(){U=!0},e.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var oe=m;m=Y;try{return ne()}finally{m=oe}},e.unstable_scheduleCallback=function(Y,ne,oe){var he=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?he+oe:he):oe=he,Y){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=oe+Le,Y={id:p++,callback:ne,priorityLevel:Y,startTime:oe,expirationTime:Le,sortIndex:-1},oe>he?(Y.sortIndex=oe,t(d,Y),n(i)===null&&Y===n(d)&&(k?(_(R),R=-1):k=!0,Se(N,oe-he))):(Y.sortIndex=Le,t(i,Y),L||x||(L=!0,z||(z=!0,se()))),Y},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Y){var ne=m;return function(){var oe=m;m=ne;try{return Y.apply(this,arguments)}finally{m=oe}}}})(Hm);Um.exports=Hm;var b0=Um.exports,Im={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=h;function Ym(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qa(){}var gn={d:{f:Qa,r:function(){throw Error(Ym(522))},D:Qa,C:Qa,L:Qa,m:Qa,X:Qa,S:Qa,M:Qa},p:0,findDOMNode:null},y0=Symbol.for("react.portal");function x0(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y0,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}var ys=_0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Wi(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gn;mn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ym(299));return x0(e,t,null,n)};mn.flushSync=function(e){var t=ys.T,n=gn.p;try{if(ys.T=null,gn.p=2,e)return e()}finally{ys.T=t,gn.p=n,gn.d.f()}};mn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,gn.d.C(e,t))};mn.prefetchDNS=function(e){typeof e=="string"&&gn.d.D(e)};mn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,a=Wi(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?gn.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:l}):n==="script"&&gn.d.X(e,{crossOrigin:a,integrity:r,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};mn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Wi(t.as,t.crossOrigin);gn.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&gn.d.M(e)};mn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,a=Wi(n,t.crossOrigin);gn.d.L(e,n,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};mn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Wi(t.as,t.crossOrigin);gn.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else gn.d.m(e)};mn.requestFormReset=function(e){gn.d.r(e)};mn.unstable_batchedUpdates=function(e,t){return e(t)};mn.useFormState=function(e,t,n){return ys.H.useFormState(e,t,n)};mn.useFormStatus=function(){return ys.H.useHostTransitionStatus()};mn.version="19.2.3";function Gm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gm)}catch(e){console.error(e)}}Gm(),Im.exports=mn;var v0=Im.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=b0,Xm=h,w0=v0;function J(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Js(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fh(e){if(Js(e)!==e)throw Error(J(188))}function S0(e){var t=e.alternate;if(!t){if(t=Js(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(r===null)break;var l=r.alternate;if(l===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===n)return fh(r),e;if(l===a)return fh(r),t;l=l.sibling}throw Error(J(188))}if(n.return!==a.return)n=r,a=l;else{for(var s=!1,o=r.child;o;){if(o===n){s=!0,n=r,a=l;break}if(o===a){s=!0,a=r,n=l;break}o=o.sibling}if(!s){for(o=l.child;o;){if(o===n){s=!0,n=l,a=r;break}if(o===a){s=!0,a=l,n=r;break}o=o.sibling}if(!s)throw Error(J(189))}}if(n.alternate!==a)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Fm(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Fm(e),t!==null)return t;e=e.sibling}return null}var yt=Object.assign,C0=Symbol.for("react.element"),Lo=Symbol.for("react.transitional.element"),ds=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),Wm=Symbol.for("react.strict_mode"),vu=Symbol.for("react.profiler"),Qm=Symbol.for("react.consumer"),Oa=Symbol.for("react.context"),Ld=Symbol.for("react.forward_ref"),wu=Symbol.for("react.suspense"),Su=Symbol.for("react.suspense_list"),Od=Symbol.for("react.memo"),Ka=Symbol.for("react.lazy"),Cu=Symbol.for("react.activity"),E0=Symbol.for("react.memo_cache_sentinel"),hh=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=hh&&e[hh]||e["@@iterator"],typeof e=="function"?e:null)}var M0=Symbol.for("react.client.reference");function Eu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===M0?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ol:return"Fragment";case vu:return"Profiler";case Wm:return"StrictMode";case wu:return"Suspense";case Su:return"SuspenseList";case Cu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ds:return"Portal";case Oa:return e.displayName||"Context";case Qm:return(e._context.displayName||"Context")+".Consumer";case Ld:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Od:return t=e.displayName||null,t!==null?t:Eu(e.type)||"Memo";case Ka:t=e._payload,e=e._init;try{return Eu(e(t))}catch{}}return null}var fs=Array.isArray,Ne=Xm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze=w0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rr={pending:!1,data:null,method:null,action:null},Mu=[],il=-1;function _a(e){return{current:e}}function Zt(e){0>il||(e.current=Mu[il],Mu[il]=null,il--)}function dt(e,t){il++,Mu[il]=e.current,e.current=t}var ba=_a(null),zs=_a(null),ir=_a(null),mi=_a(null);function pi(e,t){switch(dt(ir,t),dt(zs,e),dt(ba,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=yg(t),e=m_(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Zt(ba),dt(ba,e)}function Nl(){Zt(ba),Zt(zs),Zt(ir)}function Nu(e){e.memoizedState!==null&&dt(mi,e);var t=ba.current,n=m_(t,e.type);t!==n&&(dt(zs,e),dt(ba,n))}function bi(e){zs.current===e&&(Zt(ba),Zt(zs)),mi.current===e&&(Zt(mi),Ws._currentValue=Rr)}var wc,gh;function kr(e){if(wc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wc=t&&t[1]||"",gh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wc+e+gh}var Sc=!1;function Cc(e,t){if(!e||Sc)return"";Sc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(x){var m=x}Reflect.construct(e,[],g)}else{try{g.call()}catch(x){m=x}e.call(g.prototype)}}else{try{throw Error()}catch(x){m=x}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(x){if(x&&m&&typeof x.stack=="string")return[x.stack,m.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=a.DetermineComponentFrameRoot(),s=l[0],o=l[1];if(s&&o){var i=s.split(`
`),d=o.split(`
`);for(r=a=0;a<i.length&&!i[a].includes("DetermineComponentFrameRoot");)a++;for(;r<d.length&&!d[r].includes("DetermineComponentFrameRoot");)r++;if(a===i.length||r===d.length)for(a=i.length-1,r=d.length-1;1<=a&&0<=r&&i[a]!==d[r];)r--;for(;1<=a&&0<=r;a--,r--)if(i[a]!==d[r]){if(a!==1||r!==1)do if(a--,r--,0>r||i[a]!==d[r]){var p=`
`+i[a].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=a&&0<=r);break}}}finally{Sc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?kr(n):""}function N0(e,t){switch(e.tag){case 26:case 27:case 5:return kr(e.type);case 16:return kr("Lazy");case 13:return e.child!==t&&t!==null?kr("Suspense Fallback"):kr("Suspense");case 19:return kr("SuspenseList");case 0:case 15:return Cc(e.type,!1);case 11:return Cc(e.type.render,!1);case 1:return Cc(e.type,!0);case 31:return kr("Activity");default:return""}}function mh(e){try{var t="",n=null;do t+=N0(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Au=Object.prototype.hasOwnProperty,jd=qt.unstable_scheduleCallback,Ec=qt.unstable_cancelCallback,A0=qt.unstable_shouldYield,T0=qt.unstable_requestPaint,On=qt.unstable_now,k0=qt.unstable_getCurrentPriorityLevel,Zm=qt.unstable_ImmediatePriority,Km=qt.unstable_UserBlockingPriority,_i=qt.unstable_NormalPriority,D0=qt.unstable_LowPriority,Pm=qt.unstable_IdlePriority,L0=qt.log,O0=qt.unstable_setDisableYieldValue,eo=null,jn=null;function ar(e){if(typeof L0=="function"&&O0(e),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(eo,e)}catch{}}var Rn=Math.clz32?Math.clz32:B0,j0=Math.log,R0=Math.LN2;function B0(e){return e>>>=0,e===0?32:31-(j0(e)/R0|0)|0}var Oo=256,jo=262144,Ro=4194304;function Dr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qi(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=a&134217727;return o!==0?(a=o&~l,a!==0?r=Dr(a):(s&=o,s!==0?r=Dr(s):n||(n=o&~e,n!==0&&(r=Dr(n))))):(o=a&~l,o!==0?r=Dr(o):s!==0?r=Dr(s):n||(n=a&~e,n!==0&&(r=Dr(n)))),r===0?0:t!==0&&t!==r&&!(t&l)&&(l=r&-r,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:r}function to(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function z0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jm(){var e=Ro;return Ro<<=1,!(Ro&62914560)&&(Ro=4194304),e}function Mc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function no(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function U0(e,t,n,a,r,l){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,i=e.expirationTimes,d=e.hiddenUpdates;for(n=s&~n;0<n;){var p=31-Rn(n),g=1<<p;o[p]=0,i[p]=-1;var m=d[p];if(m!==null)for(d[p]=null,p=0;p<m.length;p++){var x=m[p];x!==null&&(x.lane&=-536870913)}n&=~g}a!==0&&ep(e,a,0),l!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=l&~(s&~t))}function ep(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Rn(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function tp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Rn(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}function np(e,t){var n=t&-t;return n=n&42?1:Rd(n),n&(e.suspendedLanes|t)?0:n}function Rd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ap(){var e=Ze.p;return e!==0?e:(e=window.event,e===void 0?32:M_(e.type))}function ph(e,t){var n=Ze.p;try{return Ze.p=e,t()}finally{Ze.p=n}}var vr=Math.random().toString(36).slice(2),an="__reactFiber$"+vr,Sn="__reactProps$"+vr,Hl="__reactContainer$"+vr,Tu="__reactEvents$"+vr,H0="__reactListeners$"+vr,I0="__reactHandles$"+vr,bh="__reactResources$"+vr,ao="__reactMarker$"+vr;function zd(e){delete e[an],delete e[Sn],delete e[Tu],delete e[H0],delete e[I0]}function cl(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hl]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cg(e);e!==null;){if(n=e[an])return n;e=Cg(e)}return t}e=n,n=e.parentNode}return null}function Il(e){if(e=e[an]||e[Hl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function hs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(J(33))}function xl(e){var t=e[bh];return t||(t=e[bh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qt(e){e[ao]=!0}var rp=new Set,lp={};function $r(e,t){Al(e,t),Al(e+"Capture",t)}function Al(e,t){for(lp[e]=t,e=0;e<t.length;e++)rp.add(t[e])}var Y0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},yh={};function G0(e){return Au.call(yh,e)?!0:Au.call(_h,e)?!1:Y0.test(e)?yh[e]=!0:(_h[e]=!0,!1)}function Po(e,t,n){if(G0(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Bo(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ca(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function Gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X0(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,l=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,l.call(this,s)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ku(e){if(!e._valueTracker){var t=sp(e)?"checked":"value";e._valueTracker=X0(e,t,""+e[t])}}function op(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=sp(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var V0=/[\n"\\]/g;function qn(e){return e.replace(V0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Du(e,t,n,a,r,l,s,o){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Gn(t)):e.value!==""+Gn(t)&&(e.value=""+Gn(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?Lu(e,s,Gn(t)):n!=null?Lu(e,s,Gn(n)):a!=null&&e.removeAttribute("value"),r==null&&l!=null&&(e.defaultChecked=!!l),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+Gn(o):e.removeAttribute("name")}function ip(e,t,n,a,r,l,s,o){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){ku(e);return}n=n!=null?""+Gn(n):"",t=t!=null?""+Gn(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}a=a??r,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=o?e.checked:!!a,e.defaultChecked=!!a,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),ku(e)}function Lu(e,t,n){t==="number"&&yi(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vl(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Gn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,a&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function cp(e,t,n){if(t!=null&&(t=""+Gn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Gn(n):""}function up(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(J(92));if(fs(a)){if(1<a.length)throw Error(J(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Gn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),ku(e)}function Tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var q0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xh(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||q0.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dp(e,t,n){if(t!=null&&typeof t!="object")throw Error(J(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var r in t)a=t[r],t.hasOwnProperty(r)&&n[r]!==a&&xh(e,r,a)}else for(var l in t)t.hasOwnProperty(l)&&xh(e,l,t[l])}function Ud(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),F0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(e){return F0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ja(){}var Ou=null;function Hd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ul=null,wl=null;function vh(e){var t=Il(e);if(t&&(e=t.stateNode)){var n=e[Sn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Du(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+qn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=a[Sn]||null;if(!r)throw Error(J(90));Du(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&op(a)}break e;case"textarea":cp(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&vl(e,!!n.multiple,t,!1)}}}var Nc=!1;function fp(e,t,n){if(Nc)return e(t,n);Nc=!0;try{var a=e(t);return a}finally{if(Nc=!1,(ul!==null||wl!==null)&&(oc(),ul&&(t=ul,e=wl,wl=ul=null,vh(t),e)))for(t=0;t<e.length;t++)vh(e[t])}}function Us(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Sn]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(Ha)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){ju=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{ju=!1}var rr=null,Id=null,ei=null;function hp(){if(ei)return ei;var e,t=Id,n=t.length,a,r="value"in rr?rr.value:rr.textContent,l=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(a=1;a<=s&&t[n-a]===r[l-a];a++);return ei=r.slice(e,1<a?1-a:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zo(){return!0}function wh(){return!1}function Cn(e){function t(n,a,r,l,s){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=l,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?zo:wh,this.isPropagationStopped=wh,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Cn(Fr),ro=yt({},Fr,{view:0,detail:0}),W0=Cn(ro),Ac,Tc,ls,Ki=yt({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(Ac=e.screenX-ls.screenX,Tc=e.screenY-ls.screenY):Tc=Ac=0,ls=e),Ac)},movementY:function(e){return"movementY"in e?e.movementY:Tc}}),Sh=Cn(Ki),Q0=yt({},Ki,{dataTransfer:0}),Z0=Cn(Q0),K0=yt({},ro,{relatedTarget:0}),kc=Cn(K0),P0=yt({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),J0=Cn(P0),ex=yt({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tx=Cn(ex),nx=yt({},Fr,{data:0}),Ch=Cn(nx),ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lx[e])?!!t[e]:!1}function Yd(){return sx}var ox=yt({},ro,{key:function(e){if(e.key){var t=ax[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(e){return e.type==="keypress"?ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=Cn(ox),cx=yt({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=Cn(cx),ux=yt({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),dx=Cn(ux),fx=yt({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),hx=Cn(fx),gx=yt({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mx=Cn(gx),px=yt({},Fr,{newState:0,oldState:0}),bx=Cn(px),_x=[9,13,27,32],Gd=Ha&&"CompositionEvent"in window,xs=null;Ha&&"documentMode"in document&&(xs=document.documentMode);var yx=Ha&&"TextEvent"in window&&!xs,gp=Ha&&(!Gd||xs&&8<xs&&11>=xs),Mh=" ",Nh=!1;function mp(e,t){switch(e){case"keyup":return _x.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dl=!1;function xx(e,t){switch(e){case"compositionend":return pp(t);case"keypress":return t.which!==32?null:(Nh=!0,Mh);case"textInput":return e=t.data,e===Mh&&Nh?null:e;default:return null}}function vx(e,t){if(dl)return e==="compositionend"||!Gd&&mp(e,t)?(e=hp(),ei=Id=rr=null,dl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gp&&t.locale!=="ko"?null:t.data;default:return null}}var wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ah(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wx[e.type]:t==="textarea"}function bp(e,t,n,a){ul?wl?wl.push(a):wl=[a]:ul=a,t=zi(t,"onChange"),0<t.length&&(n=new Zi("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var vs=null,Hs=null;function Sx(e){f_(e,0)}function Pi(e){var t=hs(e);if(op(t))return e}function Th(e,t){if(e==="change")return t}var _p=!1;if(Ha){var Dc;if(Ha){var Lc="oninput"in document;if(!Lc){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),Lc=typeof kh.oninput=="function"}Dc=Lc}else Dc=!1;_p=Dc&&(!document.documentMode||9<document.documentMode)}function Dh(){vs&&(vs.detachEvent("onpropertychange",yp),Hs=vs=null)}function yp(e){if(e.propertyName==="value"&&Pi(Hs)){var t=[];bp(t,Hs,e,Hd(e)),fp(Sx,t)}}function Cx(e,t,n){e==="focusin"?(Dh(),vs=t,Hs=n,vs.attachEvent("onpropertychange",yp)):e==="focusout"&&Dh()}function Ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(Hs)}function Mx(e,t){if(e==="click")return Pi(t)}function Nx(e,t){if(e==="input"||e==="change")return Pi(t)}function Ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:Ax;function Is(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!Au.call(t,r)||!zn(e[r],t[r]))return!1}return!0}function Lh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oh(e,t){var n=Lh(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lh(n)}}function xp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yi(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yi(e.document)}return t}function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Tx=Ha&&"documentMode"in document&&11>=document.documentMode,fl=null,Ru=null,ws=null,Bu=!1;function jh(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bu||fl==null||fl!==yi(a)||(a=fl,"selectionStart"in a&&Xd(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ws&&Is(ws,a)||(ws=a,a=zi(Ru,"onSelect"),0<a.length&&(t=new Zi("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=fl)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hl={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},Oc={},wp={};Ha&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Wr(e){if(Oc[e])return Oc[e];if(!hl[e])return e;var t=hl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wp)return Oc[e]=t[n];return e}var Sp=Wr("animationend"),Cp=Wr("animationiteration"),Ep=Wr("animationstart"),kx=Wr("transitionrun"),Dx=Wr("transitionstart"),Lx=Wr("transitioncancel"),Mp=Wr("transitionend"),Np=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zu.push("scrollEnd");function ca(e,t){Np.set(e,t),$r(t,[e])}var xi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yn=[],gl=0,Vd=0;function Ji(){for(var e=gl,t=Vd=gl=0;t<e;){var n=Yn[t];Yn[t++]=null;var a=Yn[t];Yn[t++]=null;var r=Yn[t];Yn[t++]=null;var l=Yn[t];if(Yn[t++]=null,a!==null&&r!==null){var s=a.pending;s===null?r.next=r:(r.next=s.next,s.next=r),a.pending=r}l!==0&&Ap(n,r,l)}}function ec(e,t,n,a){Yn[gl++]=e,Yn[gl++]=t,Yn[gl++]=n,Yn[gl++]=a,Vd|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function qd(e,t,n,a){return ec(e,t,n,a),vi(e)}function Qr(e,t){return ec(e,null,null,t),vi(e)}function Ap(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var r=!1,l=e.return;l!==null;)l.childLanes|=n,a=l.alternate,a!==null&&(a.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(r=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,r&&t!==null&&(r=31-Rn(n),e=l.hiddenUpdates,a=e[r],a===null?e[r]=[t]:a.push(t),t.lane=n|536870912),l):null}function vi(e){if(50<Ds)throw Ds=0,rd=null,Error(J(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ml={};function Ox(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,n,a){return new Ox(e,t,n,a)}function $d(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ba(e,t){var n=e.alternate;return n===null?(n=Dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Tp(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ni(e,t,n,a,r,l){var s=0;if(a=e,typeof e=="function")$d(e)&&(s=1);else if(typeof e=="string")s=Uv(e,n,ba.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Cu:return e=Dn(31,n,t,r),e.elementType=Cu,e.lanes=l,e;case ol:return Br(n.children,r,l,t);case Wm:s=8,r|=24;break;case vu:return e=Dn(12,n,t,r|2),e.elementType=vu,e.lanes=l,e;case wu:return e=Dn(13,n,t,r),e.elementType=wu,e.lanes=l,e;case Su:return e=Dn(19,n,t,r),e.elementType=Su,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Oa:s=10;break e;case Qm:s=9;break e;case Ld:s=11;break e;case Od:s=14;break e;case Ka:s=16,a=null;break e}s=29,n=Error(J(130,e===null?"null":typeof e,"")),a=null}return t=Dn(s,n,t,r),t.elementType=e,t.type=a,t.lanes=l,t}function Br(e,t,n,a){return e=Dn(7,e,a,t),e.lanes=n,e}function jc(e,t,n){return e=Dn(6,e,null,t),e.lanes=n,e}function kp(e){var t=Dn(18,null,null,0);return t.stateNode=e,t}function Rc(e,t,n){return t=Dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Rh=new WeakMap;function $n(e,t){if(typeof e=="object"&&e!==null){var n=Rh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:mh(t)},Rh.set(e,t),t)}return{value:e,source:t,stack:mh(t)}}var pl=[],bl=0,wi=null,Ys=0,Xn=[],Vn=0,br=null,ga=1,ma="";function Ta(e,t){pl[bl++]=Ys,pl[bl++]=wi,wi=e,Ys=t}function Dp(e,t,n){Xn[Vn++]=ga,Xn[Vn++]=ma,Xn[Vn++]=br,br=e;var a=ga;e=ma;var r=32-Rn(a)-1;a&=~(1<<r),n+=1;var l=32-Rn(t)+r;if(30<l){var s=r-r%5;l=(a&(1<<s)-1).toString(32),a>>=s,r-=s,ga=1<<32-Rn(t)+r|n<<r|a,ma=l+e}else ga=1<<l|n<<r|a,ma=e}function Fd(e){e.return!==null&&(Ta(e,1),Dp(e,1,0))}function Wd(e){for(;e===wi;)wi=pl[--bl],pl[bl]=null,Ys=pl[--bl],pl[bl]=null;for(;e===br;)br=Xn[--Vn],Xn[Vn]=null,ma=Xn[--Vn],Xn[Vn]=null,ga=Xn[--Vn],Xn[Vn]=null}function Lp(e,t){Xn[Vn++]=ga,Xn[Vn++]=ma,Xn[Vn++]=br,ga=t.id,ma=t.overflow,br=e}var rn=null,bt=null,Ve=!1,cr=null,Fn=!1,Uu=Error(J(519));function _r(e){var t=Error(J(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gs($n(t,e)),Uu}function Bh(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[an]=e,t[Sn]=a,n){case"dialog":Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":case"embed":Ie("load",t);break;case"video":case"audio":for(n=0;n<$s.length;n++)Ie($s[n],t);break;case"source":Ie("error",t);break;case"img":case"image":case"link":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"input":Ie("invalid",t),ip(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ie("invalid",t);break;case"textarea":Ie("invalid",t),up(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||g_(t.textContent,n)?(a.popover!=null&&(Ie("beforetoggle",t),Ie("toggle",t)),a.onScroll!=null&&Ie("scroll",t),a.onScrollEnd!=null&&Ie("scrollend",t),a.onClick!=null&&(t.onclick=ja),t=!0):t=!1,t||_r(e,!0)}function zh(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:rn=rn.return}}function tl(e){if(e!==rn)return!1;if(!Ve)return zh(e),Ve=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||cd(e.type,e.memoizedProps)),n=!n),n&&bt&&_r(e),zh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));bt=Sg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));bt=Sg(e)}else t===27?(t=bt,wr(e.type)?(e=hd,hd=null,bt=e):bt=t):bt=rn?Qn(e.stateNode.nextSibling):null;return!0}function Ir(){bt=rn=null,Ve=!1}function Bc(){var e=cr;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),cr=null),e}function Gs(e){cr===null?cr=[e]:cr.push(e)}var Hu=_a(null),Zr=null,Ra=null;function Ja(e,t,n){dt(Hu,t._currentValue),t._currentValue=n}function za(e){e._currentValue=Hu.current,Zt(Hu)}function Iu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Yu(e,t,n,a){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){var s=r.child;l=l.firstContext;e:for(;l!==null;){var o=l;l=r;for(var i=0;i<t.length;i++)if(o.context===t[i]){l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Iu(l.return,n,e),a||(s=null);break e}l=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(J(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Iu(s,n,e),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===e){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function Yl(e,t,n,a){e=null;for(var r=t,l=!1;r!==null;){if(!l){if(r.flags&524288)l=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(J(387));if(s=s.memoizedProps,s!==null){var o=r.type;zn(r.pendingProps.value,s.value)||(e!==null?e.push(o):e=[o])}}else if(r===mi.current){if(s=r.alternate,s===null)throw Error(J(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ws):e=[Ws])}r=r.return}e!==null&&Yu(t,e,n,a),t.flags|=262144}function Si(e){for(e=e.firstContext;e!==null;){if(!zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yr(e){Zr=e,Ra=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ln(e){return Op(Zr,e)}function Uo(e,t){return Zr===null&&Yr(e),Op(e,t)}function Op(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ra===null){if(e===null)throw Error(J(308));Ra=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ra=Ra.next=t;return n}var jx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rx=qt.unstable_scheduleCallback,Bx=qt.unstable_NormalPriority,Ut={$$typeof:Oa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new jx,data:new Map,refCount:0}}function lo(e){e.refCount--,e.refCount===0&&Rx(Bx,function(){e.controller.abort()})}var Ss=null,Gu=0,kl=0,Sl=null;function zx(e,t){if(Ss===null){var n=Ss=[];Gu=0,kl=vf(),Sl={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Gu++,t.then(Uh,Uh),t}function Uh(){if(--Gu===0&&Ss!==null){Sl!==null&&(Sl.status="fulfilled");var e=Ss;Ss=null,kl=0,Sl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ux(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(a.status="rejected",a.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),a}var Hh=Ne.S;Ne.S=function(e,t){Fb=On(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&zx(e,t),Hh!==null&&Hh(e,t)};var zr=_a(null);function Zd(){var e=zr.current;return e!==null?e:ct.pooledCache}function ai(e,t){t===null?dt(zr,zr.current):dt(zr,t.pool)}function jp(){var e=Zd();return e===null?null:{parent:Ut._currentValue,pool:e}}var Gl=Error(J(460)),Kd=Error(J(474)),tc=Error(J(542)),Ci={then:function(){}};function Ih(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Rp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ja,ja),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gh(e),e;default:if(typeof t.status=="string")t.then(ja,ja);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(J(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=a}},function(a){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gh(e),e}throw Ur=t,Gl}}function Lr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ur=n,Gl):n}}var Ur=null;function Yh(){if(Ur===null)throw Error(J(459));var e=Ur;return Ur=null,e}function Gh(e){if(e===Gl||e===tc)throw Error(J(483))}var Cl=null,Xs=0;function Ho(e){var t=Xs;return Xs+=1,Cl===null&&(Cl=[]),Rp(Cl,e,t)}function ss(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Io(e,t){throw t.$$typeof===C0?Error(J(525)):(e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bp(e){function t(b,_){if(e){var v=b.deletions;v===null?(b.deletions=[_],b.flags|=16):v.push(_)}}function n(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function a(b){for(var _=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function r(b,_){return b=Ba(b,_),b.index=0,b.sibling=null,b}function l(b,_,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<_?(b.flags|=67108866,_):v):(b.flags|=67108866,_)):(b.flags|=1048576,_)}function s(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function o(b,_,v,S){return _===null||_.tag!==6?(_=jc(v,b.mode,S),_.return=b,_):(_=r(_,v),_.return=b,_)}function i(b,_,v,S){var N=v.type;return N===ol?p(b,_,v.props.children,S,v.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ka&&Lr(N)===_.type)?(_=r(_,v.props),ss(_,v),_.return=b,_):(_=ni(v.type,v.key,v.props,null,b.mode,S),ss(_,v),_.return=b,_)}function d(b,_,v,S){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Rc(v,b.mode,S),_.return=b,_):(_=r(_,v.children||[]),_.return=b,_)}function p(b,_,v,S,N){return _===null||_.tag!==7?(_=Br(v,b.mode,S,N),_.return=b,_):(_=r(_,v),_.return=b,_)}function g(b,_,v){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=jc(""+_,b.mode,v),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lo:return v=ni(_.type,_.key,_.props,null,b.mode,v),ss(v,_),v.return=b,v;case ds:return _=Rc(_,b.mode,v),_.return=b,_;case Ka:return _=Lr(_),g(b,_,v)}if(fs(_)||as(_))return _=Br(_,b.mode,v,null),_.return=b,_;if(typeof _.then=="function")return g(b,Ho(_),v);if(_.$$typeof===Oa)return g(b,Uo(b,_),v);Io(b,_)}return null}function m(b,_,v,S){var N=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return N!==null?null:o(b,_,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lo:return v.key===N?i(b,_,v,S):null;case ds:return v.key===N?d(b,_,v,S):null;case Ka:return v=Lr(v),m(b,_,v,S)}if(fs(v)||as(v))return N!==null?null:p(b,_,v,S,null);if(typeof v.then=="function")return m(b,_,Ho(v),S);if(v.$$typeof===Oa)return m(b,_,Uo(b,v),S);Io(b,v)}return null}function x(b,_,v,S,N){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return b=b.get(v)||null,o(_,b,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lo:return b=b.get(S.key===null?v:S.key)||null,i(_,b,S,N);case ds:return b=b.get(S.key===null?v:S.key)||null,d(_,b,S,N);case Ka:return S=Lr(S),x(b,_,v,S,N)}if(fs(S)||as(S))return b=b.get(v)||null,p(_,b,S,N,null);if(typeof S.then=="function")return x(b,_,v,Ho(S),N);if(S.$$typeof===Oa)return x(b,_,v,Uo(_,S),N);Io(_,S)}return null}function L(b,_,v,S){for(var N=null,z=null,R=_,K=_=0,F=null;R!==null&&K<v.length;K++){R.index>K?(F=R,R=null):F=R.sibling;var P=m(b,R,v[K],S);if(P===null){R===null&&(R=F);break}e&&R&&P.alternate===null&&t(b,R),_=l(P,_,K),z===null?N=P:z.sibling=P,z=P,R=F}if(K===v.length)return n(b,R),Ve&&Ta(b,K),N;if(R===null){for(;K<v.length;K++)R=g(b,v[K],S),R!==null&&(_=l(R,_,K),z===null?N=R:z.sibling=R,z=R);return Ve&&Ta(b,K),N}for(R=a(R);K<v.length;K++)F=x(R,b,K,v[K],S),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?K:F.key),_=l(F,_,K),z===null?N=F:z.sibling=F,z=F);return e&&R.forEach(function(re){return t(b,re)}),Ve&&Ta(b,K),N}function k(b,_,v,S){if(v==null)throw Error(J(151));for(var N=null,z=null,R=_,K=_=0,F=null,P=v.next();R!==null&&!P.done;K++,P=v.next()){R.index>K?(F=R,R=null):F=R.sibling;var re=m(b,R,P.value,S);if(re===null){R===null&&(R=F);break}e&&R&&re.alternate===null&&t(b,R),_=l(re,_,K),z===null?N=re:z.sibling=re,z=re,R=F}if(P.done)return n(b,R),Ve&&Ta(b,K),N;if(R===null){for(;!P.done;K++,P=v.next())P=g(b,P.value,S),P!==null&&(_=l(P,_,K),z===null?N=P:z.sibling=P,z=P);return Ve&&Ta(b,K),N}for(R=a(R);!P.done;K++,P=v.next())P=x(R,b,K,P.value,S),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?K:P.key),_=l(P,_,K),z===null?N=P:z.sibling=P,z=P);return e&&R.forEach(function(se){return t(b,se)}),Ve&&Ta(b,K),N}function U(b,_,v,S){if(typeof v=="object"&&v!==null&&v.type===ol&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lo:e:{for(var N=v.key;_!==null;){if(_.key===N){if(N=v.type,N===ol){if(_.tag===7){n(b,_.sibling),S=r(_,v.props.children),S.return=b,b=S;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ka&&Lr(N)===_.type){n(b,_.sibling),S=r(_,v.props),ss(S,v),S.return=b,b=S;break e}n(b,_);break}else t(b,_);_=_.sibling}v.type===ol?(S=Br(v.props.children,b.mode,S,v.key),S.return=b,b=S):(S=ni(v.type,v.key,v.props,null,b.mode,S),ss(S,v),S.return=b,b=S)}return s(b);case ds:e:{for(N=v.key;_!==null;){if(_.key===N)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(b,_.sibling),S=r(_,v.children||[]),S.return=b,b=S;break e}else{n(b,_);break}else t(b,_);_=_.sibling}S=Rc(v,b.mode,S),S.return=b,b=S}return s(b);case Ka:return v=Lr(v),U(b,_,v,S)}if(fs(v))return L(b,_,v,S);if(as(v)){if(N=as(v),typeof N!="function")throw Error(J(150));return v=N.call(v),k(b,_,v,S)}if(typeof v.then=="function")return U(b,_,Ho(v),S);if(v.$$typeof===Oa)return U(b,_,Uo(b,v),S);Io(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,_!==null&&_.tag===6?(n(b,_.sibling),S=r(_,v),S.return=b,b=S):(n(b,_),S=jc(v,b.mode,S),S.return=b,b=S),s(b)):n(b,_)}return function(b,_,v,S){try{Xs=0;var N=U(b,_,v,S);return Cl=null,N}catch(R){if(R===Gl||R===tc)throw R;var z=Dn(29,R,null,b.mode);return z.lanes=S,z.return=b,z}finally{}}}var Gr=Bp(!0),zp=Bp(!1),Pa=!1;function Pd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ur(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function dr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Qe&2){var r=a.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),a.pending=t,t=vi(e),Ap(e,null,n),t}return ec(e,a,t,n),vi(e)}function Cs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,tp(e,n)}}function zc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?r=l=s:l=l.next=s,n=n.next}while(n!==null);l===null?r=l=t:l=l.next=t}else r=l=t;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Vu=!1;function Es(){if(Vu){var e=Sl;if(e!==null)throw e}}function Ms(e,t,n,a){Vu=!1;var r=e.updateQueue;Pa=!1;var l=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var i=o,d=i.next;i.next=null,s===null?l=d:s.next=d,s=i;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==s&&(o===null?p.firstBaseUpdate=d:o.next=d,p.lastBaseUpdate=i))}if(l!==null){var g=r.baseState;s=0,p=d=i=null,o=l;do{var m=o.lane&-536870913,x=m!==o.lane;if(x?(Xe&m)===m:(a&m)===m){m!==0&&m===kl&&(Vu=!0),p!==null&&(p=p.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var L=e,k=o;m=t;var U=n;switch(k.tag){case 1:if(L=k.payload,typeof L=="function"){g=L.call(U,g,m);break e}g=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=k.payload,m=typeof L=="function"?L.call(U,g,m):L,m==null)break e;g=yt({},g,m);break e;case 2:Pa=!0}}m=o.callback,m!==null&&(e.flags|=64,x&&(e.flags|=8192),x=r.callbacks,x===null?r.callbacks=[m]:x.push(m))}else x={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(d=p=x,i=g):p=p.next=x,s|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;x=o,o=x.next,x.next=null,r.lastBaseUpdate=x,r.shared.pending=null}}while(!0);p===null&&(i=g),r.baseState=i,r.firstBaseUpdate=d,r.lastBaseUpdate=p,l===null&&(r.shared.lanes=0),xr|=s,e.lanes=s,e.memoizedState=g}}function Up(e,t){if(typeof e!="function")throw Error(J(191,e));e.call(t)}function Hp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Up(n[e],t)}var Dl=_a(null),Ei=_a(0);function Xh(e,t){e=Xa,dt(Ei,e),dt(Dl,t),Xa=e|t.baseLanes}function qu(){dt(Ei,Xa),dt(Dl,Dl.current)}function Jd(){Xa=Ei.current,Zt(Dl),Zt(Ei)}var Un=_a(null),Wn=null;function er(e){var t=e.alternate;dt(Lt,Lt.current&1),dt(Un,e),Wn===null&&(t===null||Dl.current!==null||t.memoizedState!==null)&&(Wn=e)}function $u(e){dt(Lt,Lt.current),dt(Un,e),Wn===null&&(Wn=e)}function Ip(e){e.tag===22?(dt(Lt,Lt.current),dt(Un,e),Wn===null&&(Wn=e)):tr()}function tr(){dt(Lt,Lt.current),dt(Un,Un.current)}function kn(e){Zt(Un),Wn===e&&(Wn=null),Zt(Lt)}var Lt=_a(0);function Mi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||dd(n)||fd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=0,Oe=null,lt=null,Bt=null,Ni=!1,El=!1,Xr=!1,Ai=0,Vs=0,Ml=null,Hx=0;function At(){throw Error(J(321))}function ef(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zn(e[n],t[n]))return!1;return!0}function tf(e,t,n,a,r,l){return Ia=l,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ne.H=e===null||e.memoizedState===null?bb:hf,Xr=!1,l=n(a,r),Xr=!1,El&&(l=Gp(t,n,a,r)),Yp(e),l}function Yp(e){Ne.H=qs;var t=lt!==null&&lt.next!==null;if(Ia=0,Bt=lt=Oe=null,Ni=!1,Vs=0,Ml=null,t)throw Error(J(300));e===null||Ht||(e=e.dependencies,e!==null&&Si(e)&&(Ht=!0))}function Gp(e,t,n,a){Oe=e;var r=0;do{if(El&&(Ml=null),Vs=0,El=!1,25<=r)throw Error(J(301));if(r+=1,Bt=lt=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}Ne.H=_b,l=t(n,a)}while(El);return l}function Ix(){var e=Ne.H,t=e.useState()[0];return t=typeof t.then=="function"?so(t):t,e=e.useState()[0],(lt!==null?lt.memoizedState:null)!==e&&(Oe.flags|=1024),t}function nf(){var e=Ai!==0;return Ai=0,e}function af(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function rf(e){if(Ni){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ni=!1}Ia=0,Bt=lt=Oe=null,El=!1,Vs=Ai=0,Ml=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Oe.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Ot(){if(lt===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=Bt===null?Oe.memoizedState:Bt.next;if(t!==null)Bt=t,lt=e;else{if(e===null)throw Oe.alternate===null?Error(J(467)):Error(J(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Bt===null?Oe.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function so(e){var t=Vs;return Vs+=1,Ml===null&&(Ml=[]),e=Rp(Ml,e,t),t=Oe,(Bt===null?t.memoizedState:Bt.next)===null&&(t=t.alternate,Ne.H=t===null||t.memoizedState===null?bb:hf),e}function ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return so(e);if(e.$$typeof===Oa)return ln(e)}throw Error(J(438,String(e)))}function lf(e){var t=null,n=Oe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Oe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=nc(),Oe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=E0;return t.index++,n}function Ya(e,t){return typeof t=="function"?t(e):t}function ri(e){var t=Ot();return sf(t,lt,e)}function sf(e,t,n){var a=e.queue;if(a===null)throw Error(J(311));a.lastRenderedReducer=n;var r=e.baseQueue,l=a.pending;if(l!==null){if(r!==null){var s=r.next;r.next=l.next,l.next=s}t.baseQueue=r=l,a.pending=null}if(l=e.baseState,r===null)e.memoizedState=l;else{t=r.next;var o=s=null,i=null,d=t,p=!1;do{var g=d.lane&-536870913;if(g!==d.lane?(Xe&g)===g:(Ia&g)===g){var m=d.revertLane;if(m===0)i!==null&&(i=i.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),g===kl&&(p=!0);else if((Ia&m)===m){d=d.next,m===kl&&(p=!0);continue}else g={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},i===null?(o=i=g,s=l):i=i.next=g,Oe.lanes|=m,xr|=m;g=d.action,Xr&&n(l,g),l=d.hasEagerState?d.eagerState:n(l,g)}else m={lane:g,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},i===null?(o=i=m,s=l):i=i.next=m,Oe.lanes|=g,xr|=g;d=d.next}while(d!==null&&d!==t);if(i===null?s=l:i.next=o,!zn(l,e.memoizedState)&&(Ht=!0,p&&(n=Sl,n!==null)))throw n;e.memoizedState=l,e.baseState=s,e.baseQueue=i,a.lastRenderedState=l}return r===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Uc(e){var t=Ot(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,l=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do l=e(l,s.action),s=s.next;while(s!==r);zn(l,t.memoizedState)||(Ht=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,a]}function Xp(e,t,n){var a=Oe,r=Ot(),l=Ve;if(l){if(n===void 0)throw Error(J(407));n=n()}else n=t();var s=!zn((lt||r).memoizedState,n);if(s&&(r.memoizedState=n,Ht=!0),r=r.queue,of($p.bind(null,a,r,e),[e]),r.getSnapshot!==t||s||Bt!==null&&Bt.memoizedState.tag&1){if(a.flags|=2048,Ll(9,{destroy:void 0},qp.bind(null,a,r,n,t),null),ct===null)throw Error(J(349));l||Ia&127||Vp(a,t,n)}return n}function Vp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t=nc(),Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qp(e,t,n,a){t.value=n,t.getSnapshot=a,Fp(t)&&Wp(e)}function $p(e,t,n){return n(function(){Fp(t)&&Wp(e)})}function Fp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zn(e,n)}catch{return!0}}function Wp(e){var t=Qr(e,2);t!==null&&wn(t,e,2)}function Fu(e){var t=hn();if(typeof e=="function"){var n=e;if(e=n(),Xr){ar(!0);try{n()}finally{ar(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t}function Qp(e,t,n,a){return e.baseState=n,sf(e,lt,typeof a=="function"?a:Ya)}function Yx(e,t,n,a,r){if(lc(e))throw Error(J(485));if(e=t.action,e!==null){var l={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){l.listeners.push(s)}};Ne.T!==null?n(!0):l.isTransition=!1,a(l),n=t.pending,n===null?(l.next=t.pending=l,Zp(t,l)):(l.next=n.next,t.pending=n.next=l)}}function Zp(e,t){var n=t.action,a=t.payload,r=e.state;if(t.isTransition){var l=Ne.T,s={};Ne.T=s;try{var o=n(r,a),i=Ne.S;i!==null&&i(s,o),Vh(e,t,o)}catch(d){Wu(e,t,d)}finally{l!==null&&s.types!==null&&(l.types=s.types),Ne.T=l}}else try{l=n(r,a),Vh(e,t,l)}catch(d){Wu(e,t,d)}}function Vh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){qh(e,t,a)},function(a){return Wu(e,t,a)}):qh(e,t,n)}function qh(e,t,n){t.status="fulfilled",t.value=n,Kp(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Zp(e,n)))}function Wu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Kp(t),t=t.next;while(t!==a)}e.action=null}function Kp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pp(e,t){return t}function $h(e,t){if(Ve){var n=ct.formState;if(n!==null){e:{var a=Oe;if(Ve){if(bt){t:{for(var r=bt,l=Fn;r.nodeType!==8;){if(!l){r=null;break t}if(r=Qn(r.nextSibling),r===null){r=null;break t}}l=r.data,r=l==="F!"||l==="F"?r:null}if(r){bt=Qn(r.nextSibling),a=r.data==="F!";break e}}_r(a)}a=!1}a&&(t=n[0])}}return n=hn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:t},n.queue=a,n=gb.bind(null,Oe,a),a.dispatch=n,a=Fu(!1),l=ff.bind(null,Oe,!1,a.queue),a=hn(),r={state:t,dispatch:null,action:e,pending:null},a.queue=r,n=Yx.bind(null,Oe,r,l,n),r.dispatch=n,a.memoizedState=e,[t,n,!1]}function Fh(e){var t=Ot();return Jp(t,lt,e)}function Jp(e,t,n){if(t=sf(e,t,Pp)[0],e=ri(Ya)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=so(t)}catch(s){throw s===Gl?tc:s}else a=t;t=Ot();var r=t.queue,l=r.dispatch;return n!==t.memoizedState&&(Oe.flags|=2048,Ll(9,{destroy:void 0},Gx.bind(null,r,n),null)),[a,l,e]}function Gx(e,t){e.action=t}function Wh(e){var t=Ot(),n=lt;if(n!==null)return Jp(t,n,e);Ot(),t=t.memoizedState,n=Ot();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Ll(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=nc(),Oe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function eb(){return Ot().memoizedState}function li(e,t,n,a){var r=hn();Oe.flags|=e,r.memoizedState=Ll(1|t,{destroy:void 0},n,a===void 0?null:a)}function rc(e,t,n,a){var r=Ot();a=a===void 0?null:a;var l=r.memoizedState.inst;lt!==null&&a!==null&&ef(a,lt.memoizedState.deps)?r.memoizedState=Ll(t,l,n,a):(Oe.flags|=e,r.memoizedState=Ll(1|t,l,n,a))}function Qh(e,t){li(8390656,8,e,t)}function of(e,t){rc(2048,8,e,t)}function Xx(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=nc(),Oe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function tb(e){var t=Ot().memoizedState;return Xx({ref:t,nextImpl:e}),function(){if(Qe&2)throw Error(J(440));return t.impl.apply(void 0,arguments)}}function nb(e,t){return rc(4,2,e,t)}function ab(e,t){return rc(4,4,e,t)}function rb(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lb(e,t,n){n=n!=null?n.concat([e]):null,rc(4,4,rb.bind(null,t,e),n)}function cf(){}function sb(e,t){var n=Ot();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&ef(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function ob(e,t){var n=Ot();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&ef(t,a[1]))return a[0];if(a=e(),Xr){ar(!0);try{e()}finally{ar(!1)}}return n.memoizedState=[a,t],a}function uf(e,t,n){return n===void 0||Ia&1073741824&&!(Xe&261930)?e.memoizedState=t:(e.memoizedState=n,e=Qb(),Oe.lanes|=e,xr|=e,n)}function ib(e,t,n,a){return zn(n,t)?n:Dl.current!==null?(e=uf(e,n,a),zn(e,t)||(Ht=!0),e):!(Ia&42)||Ia&1073741824&&!(Xe&261930)?(Ht=!0,e.memoizedState=n):(e=Qb(),Oe.lanes|=e,xr|=e,t)}function cb(e,t,n,a,r){var l=Ze.p;Ze.p=l!==0&&8>l?l:8;var s=Ne.T,o={};Ne.T=o,ff(e,!1,t,n);try{var i=r(),d=Ne.S;if(d!==null&&d(o,i),i!==null&&typeof i=="object"&&typeof i.then=="function"){var p=Ux(i,a);Ns(e,t,p,Bn(e))}else Ns(e,t,a,Bn(e))}catch(g){Ns(e,t,{then:function(){},status:"rejected",reason:g},Bn())}finally{Ze.p=l,s!==null&&o.types!==null&&(s.types=o.types),Ne.T=s}}function Vx(){}function Qu(e,t,n,a){if(e.tag!==5)throw Error(J(476));var r=ub(e).queue;cb(e,r,t,Rr,n===null?Vx:function(){return db(e),n(a)})}function ub(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Rr,baseState:Rr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:Rr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function db(e){var t=ub(e);t.next===null&&(t=e.alternate.memoizedState),Ns(e,t.next.queue,{},Bn())}function df(){return ln(Ws)}function fb(){return Ot().memoizedState}function hb(){return Ot().memoizedState}function qx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Bn();e=ur(n);var a=dr(t,e,n);a!==null&&(wn(a,t,n),Cs(a,t,n)),t={cache:Qd()},e.payload=t;return}t=t.return}}function $x(e,t,n){var a=Bn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},lc(e)?mb(t,n):(n=qd(e,t,n,a),n!==null&&(wn(n,e,a),pb(n,t,a)))}function gb(e,t,n){var a=Bn();Ns(e,t,n,a)}function Ns(e,t,n,a){var r={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(lc(e))mb(t,r);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var s=t.lastRenderedState,o=l(s,n);if(r.hasEagerState=!0,r.eagerState=o,zn(o,s))return ec(e,t,r,0),ct===null&&Ji(),!1}catch{}finally{}if(n=qd(e,t,r,a),n!==null)return wn(n,e,a),pb(n,t,a),!0}return!1}function ff(e,t,n,a){if(a={lane:2,revertLane:vf(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lc(e)){if(t)throw Error(J(479))}else t=qd(e,n,a,2),t!==null&&wn(t,e,2)}function lc(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function mb(e,t){El=Ni=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pb(e,t,n){if(n&4194048){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,tp(e,n)}}var qs={readContext:ln,use:ac,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};qs.useEffectEvent=At;var bb={readContext:ln,use:ac,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:ln,useEffect:Qh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,li(4194308,4,rb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){li(4,2,e,t)},useMemo:function(e,t){var n=hn();t=t===void 0?null:t;var a=e();if(Xr){ar(!0);try{e()}finally{ar(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=hn();if(n!==void 0){var r=n(t);if(Xr){ar(!0);try{n(t)}finally{ar(!1)}}}else r=t;return a.memoizedState=a.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a.queue=e,e=e.dispatch=$x.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:function(e){e=Fu(e);var t=e.queue,n=gb.bind(null,Oe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:cf,useDeferredValue:function(e,t){var n=hn();return uf(n,e,t)},useTransition:function(){var e=Fu(!1);return e=cb.bind(null,Oe,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Oe,r=hn();if(Ve){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),ct===null)throw Error(J(349));Xe&127||Vp(a,t,n)}r.memoizedState=n;var l={value:n,getSnapshot:t};return r.queue=l,Qh($p.bind(null,a,l,e),[e]),a.flags|=2048,Ll(9,{destroy:void 0},qp.bind(null,a,l,n,t),null),n},useId:function(){var e=hn(),t=ct.identifierPrefix;if(Ve){var n=ma,a=ga;n=(a&~(1<<32-Rn(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ai++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Hx++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:df,useFormState:$h,useActionState:$h,useOptimistic:function(e){var t=hn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ff.bind(null,Oe,!0,n),n.dispatch=t,[e,t]},useMemoCache:lf,useCacheRefresh:function(){return hn().memoizedState=qx.bind(null,Oe)},useEffectEvent:function(e){var t=hn(),n={impl:e};return t.memoizedState=n,function(){if(Qe&2)throw Error(J(440));return n.impl.apply(void 0,arguments)}}},hf={readContext:ln,use:ac,useCallback:sb,useContext:ln,useEffect:of,useImperativeHandle:lb,useInsertionEffect:nb,useLayoutEffect:ab,useMemo:ob,useReducer:ri,useRef:eb,useState:function(){return ri(Ya)},useDebugValue:cf,useDeferredValue:function(e,t){var n=Ot();return ib(n,lt.memoizedState,e,t)},useTransition:function(){var e=ri(Ya)[0],t=Ot().memoizedState;return[typeof e=="boolean"?e:so(e),t]},useSyncExternalStore:Xp,useId:fb,useHostTransitionStatus:df,useFormState:Fh,useActionState:Fh,useOptimistic:function(e,t){var n=Ot();return Qp(n,lt,e,t)},useMemoCache:lf,useCacheRefresh:hb};hf.useEffectEvent=tb;var _b={readContext:ln,use:ac,useCallback:sb,useContext:ln,useEffect:of,useImperativeHandle:lb,useInsertionEffect:nb,useLayoutEffect:ab,useMemo:ob,useReducer:Uc,useRef:eb,useState:function(){return Uc(Ya)},useDebugValue:cf,useDeferredValue:function(e,t){var n=Ot();return lt===null?uf(n,e,t):ib(n,lt.memoizedState,e,t)},useTransition:function(){var e=Uc(Ya)[0],t=Ot().memoizedState;return[typeof e=="boolean"?e:so(e),t]},useSyncExternalStore:Xp,useId:fb,useHostTransitionStatus:df,useFormState:Wh,useActionState:Wh,useOptimistic:function(e,t){var n=Ot();return lt!==null?Qp(n,lt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:lf,useCacheRefresh:hb};_b.useEffectEvent=tb;function Hc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zu={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Bn(),r=ur(a);r.payload=t,n!=null&&(r.callback=n),t=dr(e,r,a),t!==null&&(wn(t,e,a),Cs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Bn(),r=ur(a);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=dr(e,r,a),t!==null&&(wn(t,e,a),Cs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bn(),a=ur(n);a.tag=2,t!=null&&(a.callback=t),t=dr(e,a,n),t!==null&&(wn(t,e,n),Cs(t,e,n))}};function Zh(e,t,n,a,r,l,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,l,s):t.prototype&&t.prototype.isPureReactComponent?!Is(n,a)||!Is(r,l):!0}function Kh(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Zu.enqueueReplaceState(t,t.state,null)}function Vr(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=yt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function yb(e){xi(e)}function xb(e){console.error(e)}function vb(e){xi(e)}function Ti(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Ph(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ku(e,t,n){return n=ur(n),n.tag=3,n.payload={element:null},n.callback=function(){Ti(e,t)},n}function wb(e){return e=ur(e),e.tag=3,e}function Sb(e,t,n,a){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var l=a.value;e.payload=function(){return r(l)},e.callback=function(){Ph(t,n,a)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Ph(t,n,a),typeof r!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=a.stack;this.componentDidCatch(a.value,{componentStack:o!==null?o:""})})}function Fx(e,t,n,a,r){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Yl(t,n,r,!0),n=Un.current,n!==null){switch(n.tag){case 31:case 13:return Wn===null?ji():n.alternate===null&&Tt===0&&(Tt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===Ci?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Zc(e,a,r)),!1;case 22:return n.flags|=65536,a===Ci?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Zc(e,a,r)),!1}throw Error(J(435,n.tag))}return Zc(e,a,r),ji(),!1}if(Ve)return t=Un.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==Uu&&(e=Error(J(422),{cause:a}),Gs($n(e,n)))):(a!==Uu&&(t=Error(J(423),{cause:a}),Gs($n(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,a=$n(a,n),r=Ku(e.stateNode,a,r),zc(e,r),Tt!==4&&(Tt=2)),!1;var l=Error(J(520),{cause:a});if(l=$n(l,n),ks===null?ks=[l]:ks.push(l),Tt!==4&&(Tt=2),t===null)return!0;a=$n(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Ku(n.stateNode,a,e),zc(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(fr===null||!fr.has(l))))return n.flags|=65536,r&=-r,n.lanes|=r,r=wb(r),Sb(r,e,n,a),zc(n,r),!1}n=n.return}while(n!==null);return!1}var gf=Error(J(461)),Ht=!1;function nn(e,t,n,a){t.child=e===null?zp(t,null,n,a):Gr(t,e.child,n,a)}function Jh(e,t,n,a,r){n=n.render;var l=t.ref;if("ref"in a){var s={};for(var o in a)o!=="ref"&&(s[o]=a[o])}else s=a;return Yr(t),a=tf(e,t,n,s,l,r),o=nf(),e!==null&&!Ht?(af(e,t,r),Ga(e,t,r)):(Ve&&o&&Fd(t),t.flags|=1,nn(e,t,a,r),t.child)}function eg(e,t,n,a,r){if(e===null){var l=n.type;return typeof l=="function"&&!$d(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,Cb(e,t,l,a,r)):(e=ni(n.type,null,a,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!mf(e,r)){var s=l.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(s,a)&&e.ref===t.ref)return Ga(e,t,r)}return t.flags|=1,e=Ba(l,a),e.ref=t.ref,e.return=t,t.child=e}function Cb(e,t,n,a,r){if(e!==null){var l=e.memoizedProps;if(Is(l,a)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=a=l,mf(e,r))e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,Ga(e,t,r)}return Pu(e,t,n,a,r)}function Eb(e,t,n,a){var r=a.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(t.flags&128){if(l=l!==null?l.baseLanes|n:n,e!==null){for(a=t.child=e.child,r=0;a!==null;)r=r|a.lanes|a.childLanes,a=a.sibling;a=r&~l}else a=0,t.child=null;return tg(e,t,l,n,a)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ai(t,l!==null?l.cachePool:null),l!==null?Xh(t,l):qu(),Ip(t);else return a=t.lanes=536870912,tg(e,t,l!==null?l.baseLanes|n:n,n,a)}else l!==null?(ai(t,l.cachePool),Xh(t,l),tr(),t.memoizedState=null):(e!==null&&ai(t,null),qu(),tr());return nn(e,t,r,n),t.child}function gs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function tg(e,t,n,a,r){var l=Zd();return l=l===null?null:{parent:Ut._currentValue,pool:l},t.memoizedState={baseLanes:n,cachePool:l},e!==null&&ai(t,null),qu(),Ip(t),e!==null&&Yl(e,t,a,!0),t.childLanes=r,null}function si(e,t){return t=ki({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ng(e,t,n){return Gr(t,e.child,null,n),e=si(t,t.pendingProps),e.flags|=2,kn(t),t.memoizedState=null,e}function Wx(e,t,n){var a=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ve){if(a.mode==="hidden")return e=si(t,a),t.lanes=536870912,gs(null,e);if($u(t),(e=bt)?(e=b_(e,Fn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:br!==null?{id:ga,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},n=kp(e),n.return=t,t.child=n,rn=t,bt=null)):e=null,e===null)throw _r(t);return t.lanes=536870912,null}return si(t,a)}var l=e.memoizedState;if(l!==null){var s=l.dehydrated;if($u(t),r)if(t.flags&256)t.flags&=-257,t=ng(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(J(558));else if(Ht||Yl(e,t,n,!1),r=(n&e.childLanes)!==0,Ht||r){if(a=ct,a!==null&&(s=np(a,n),s!==0&&s!==l.retryLane))throw l.retryLane=s,Qr(e,s),wn(a,e,s),gf;ji(),t=ng(e,t,n)}else e=l.treeContext,bt=Qn(s.nextSibling),rn=t,Ve=!0,cr=null,Fn=!1,e!==null&&Lp(t,e),t=si(t,a),t.flags|=4096;return t}return e=Ba(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function oi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(J(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Pu(e,t,n,a,r){return Yr(t),n=tf(e,t,n,a,void 0,r),a=nf(),e!==null&&!Ht?(af(e,t,r),Ga(e,t,r)):(Ve&&a&&Fd(t),t.flags|=1,nn(e,t,n,r),t.child)}function ag(e,t,n,a,r,l){return Yr(t),t.updateQueue=null,n=Gp(t,a,n,r),Yp(e),a=nf(),e!==null&&!Ht?(af(e,t,l),Ga(e,t,l)):(Ve&&a&&Fd(t),t.flags|=1,nn(e,t,n,l),t.child)}function rg(e,t,n,a,r){if(Yr(t),t.stateNode===null){var l=ml,s=n.contextType;typeof s=="object"&&s!==null&&(l=ln(s)),l=new n(a,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Zu,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=a,l.state=t.memoizedState,l.refs={},Pd(t),s=n.contextType,l.context=typeof s=="object"&&s!==null?ln(s):ml,l.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Hc(t,n,s,a),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&Zu.enqueueReplaceState(l,l.state,null),Ms(t,a,l,r),Es(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){l=t.stateNode;var o=t.memoizedProps,i=Vr(n,o);l.props=i;var d=l.context,p=n.contextType;s=ml,typeof p=="object"&&p!==null&&(s=ln(p));var g=n.getDerivedStateFromProps;p=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o||d!==s)&&Kh(t,l,a,s),Pa=!1;var m=t.memoizedState;l.state=m,Ms(t,a,l,r),Es(),d=t.memoizedState,o||m!==d||Pa?(typeof g=="function"&&(Hc(t,n,g,a),d=t.memoizedState),(i=Pa||Zh(t,n,i,a,m,d,s))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),l.props=a,l.state=d,l.context=s,a=i):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,Xu(e,t),s=t.memoizedProps,p=Vr(n,s),l.props=p,g=t.pendingProps,m=l.context,d=n.contextType,i=ml,typeof d=="object"&&d!==null&&(i=ln(d)),o=n.getDerivedStateFromProps,(d=typeof o=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==g||m!==i)&&Kh(t,l,a,i),Pa=!1,m=t.memoizedState,l.state=m,Ms(t,a,l,r),Es();var x=t.memoizedState;s!==g||m!==x||Pa||e!==null&&e.dependencies!==null&&Si(e.dependencies)?(typeof o=="function"&&(Hc(t,n,o,a),x=t.memoizedState),(p=Pa||Zh(t,n,p,a,m,x,i)||e!==null&&e.dependencies!==null&&Si(e.dependencies))?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,x,i),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,x,i)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),l.props=a,l.state=x,l.context=i,a=p):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return l=a,oi(e,t),a=(t.flags&128)!==0,l||a?(l=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&a?(t.child=Gr(t,e.child,null,r),t.child=Gr(t,null,n,r)):nn(e,t,n,r),t.memoizedState=l.state,e=t.child):e=Ga(e,t,r),e}function lg(e,t,n,a){return Ir(),t.flags|=256,nn(e,t,n,a),t.child}var Ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:jp()}}function Gc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ln),e}function Mb(e,t,n){var a=t.pendingProps,r=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(Lt.current&2)!==0),s&&(r=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ve){if(r?er(t):tr(),(e=bt)?(e=b_(e,Fn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:br!==null?{id:ga,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},n=kp(e),n.return=t,t.child=n,rn=t,bt=null)):e=null,e===null)throw _r(t);return fd(e)?t.lanes=32:t.lanes=536870912,null}var o=a.children;return a=a.fallback,r?(tr(),r=t.mode,o=ki({mode:"hidden",children:o},r),a=Br(a,r,n,null),o.return=t,a.return=t,o.sibling=a,t.child=o,a=t.child,a.memoizedState=Yc(n),a.childLanes=Gc(e,s,n),t.memoizedState=Ic,gs(null,a)):(er(t),Ju(t,o))}var i=e.memoizedState;if(i!==null&&(o=i.dehydrated,o!==null)){if(l)t.flags&256?(er(t),t.flags&=-257,t=Xc(e,t,n)):t.memoizedState!==null?(tr(),t.child=e.child,t.flags|=128,t=null):(tr(),o=a.fallback,r=t.mode,a=ki({mode:"visible",children:a.children},r),o=Br(o,r,n,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,Gr(t,e.child,null,n),a=t.child,a.memoizedState=Yc(n),a.childLanes=Gc(e,s,n),t.memoizedState=Ic,t=gs(null,a));else if(er(t),fd(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var d=s.dgst;s=d,a=Error(J(419)),a.stack="",a.digest=s,Gs({value:a,source:null,stack:null}),t=Xc(e,t,n)}else if(Ht||Yl(e,t,n,!1),s=(n&e.childLanes)!==0,Ht||s){if(s=ct,s!==null&&(a=np(s,n),a!==0&&a!==i.retryLane))throw i.retryLane=a,Qr(e,a),wn(s,e,a),gf;dd(o)||ji(),t=Xc(e,t,n)}else dd(o)?(t.flags|=192,t.child=e.child,t=null):(e=i.treeContext,bt=Qn(o.nextSibling),rn=t,Ve=!0,cr=null,Fn=!1,e!==null&&Lp(t,e),t=Ju(t,a.children),t.flags|=4096);return t}return r?(tr(),o=a.fallback,r=t.mode,i=e.child,d=i.sibling,a=Ba(i,{mode:"hidden",children:a.children}),a.subtreeFlags=i.subtreeFlags&65011712,d!==null?o=Ba(d,o):(o=Br(o,r,n,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,gs(null,a),a=t.child,o=e.child.memoizedState,o===null?o=Yc(n):(r=o.cachePool,r!==null?(i=Ut._currentValue,r=r.parent!==i?{parent:i,pool:i}:r):r=jp(),o={baseLanes:o.baseLanes|n,cachePool:r}),a.memoizedState=o,a.childLanes=Gc(e,s,n),t.memoizedState=Ic,gs(e.child,a)):(er(t),n=e.child,e=n.sibling,n=Ba(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ju(e,t){return t=ki({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ki(e,t){return e=Dn(22,e,null,t),e.lanes=0,e}function Xc(e,t,n){return Gr(t,e.child,null,n),e=Ju(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sg(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Iu(e.return,t,n)}function Vc(e,t,n,a,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r,treeForkCount:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r,s.treeForkCount=l)}function Nb(e,t,n){var a=t.pendingProps,r=a.revealOrder,l=a.tail;a=a.children;var s=Lt.current,o=(s&2)!==0;if(o?(s=s&1|2,t.flags|=128):s&=1,dt(Lt,s),nn(e,t,a,n),a=Ve?Ys:0,!o&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sg(e,n,t);else if(e.tag===19)sg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Mi(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vc(t,!1,r,n,l,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Mi(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vc(t,!0,n,null,l,a);break;case"together":Vc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Ga(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xr|=t.lanes,!(n&t.childLanes))if(e!==null){if(Yl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Si(e)))}function Qx(e,t,n){switch(t.tag){case 3:pi(t,t.stateNode.containerInfo),Ja(t,Ut,e.memoizedState.cache),Ir();break;case 27:case 5:Nu(t);break;case 4:pi(t,t.stateNode.containerInfo);break;case 10:Ja(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,$u(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(er(t),t.flags|=128,null):n&t.child.childLanes?Mb(e,t,n):(er(t),e=Ga(e,t,n),e!==null?e.sibling:null);er(t);break;case 19:var r=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Yl(e,t,n,!1),a=(n&t.childLanes)!==0),r){if(a)return Nb(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),dt(Lt,Lt.current),a)break;return null;case 22:return t.lanes=0,Eb(e,t,n,t.pendingProps);case 24:Ja(t,Ut,e.memoizedState.cache)}return Ga(e,t,n)}function Ab(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ht=!0;else{if(!mf(e,n)&&!(t.flags&128))return Ht=!1,Qx(e,t,n);Ht=!!(e.flags&131072)}else Ht=!1,Ve&&t.flags&1048576&&Dp(t,Ys,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Lr(t.elementType),t.type=e,typeof e=="function")$d(e)?(a=Vr(e,a),t.tag=1,t=rg(null,t,e,a,n)):(t.tag=0,t=Pu(null,t,e,a,n));else{if(e!=null){var r=e.$$typeof;if(r===Ld){t.tag=11,t=Jh(null,t,e,a,n);break e}else if(r===Od){t.tag=14,t=eg(null,t,e,a,n);break e}}throw t=Eu(e)||e,Error(J(306,t,""))}}return t;case 0:return Pu(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,r=Vr(a,t.pendingProps),rg(e,t,a,r,n);case 3:e:{if(pi(t,t.stateNode.containerInfo),e===null)throw Error(J(387));a=t.pendingProps;var l=t.memoizedState;r=l.element,Xu(e,t),Ms(t,a,null,n);var s=t.memoizedState;if(a=s.cache,Ja(t,Ut,a),a!==l.cache&&Yu(t,[Ut],n,!0),Es(),a=s.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=lg(e,t,a,n);break e}else if(a!==r){r=$n(Error(J(424)),t),Gs(r),t=lg(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(bt=Qn(e.firstChild),rn=t,Ve=!0,cr=null,Fn=!0,n=zp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ir(),a===r){t=Ga(e,t,n);break e}nn(e,t,a,n)}t=t.child}return t;case 26:return oi(e,t),e===null?(n=Mg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ve||(n=t.type,e=t.pendingProps,a=Ui(ir.current).createElement(n),a[an]=t,a[Sn]=e,on(a,n,e),Qt(a),t.stateNode=a):t.memoizedState=Mg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nu(t),e===null&&Ve&&(a=t.stateNode=__(t.type,t.pendingProps,ir.current),rn=t,Fn=!0,r=bt,wr(t.type)?(hd=r,bt=Qn(a.firstChild)):bt=r),nn(e,t,t.pendingProps.children,n),oi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ve&&((r=a=bt)&&(a=Ev(a,t.type,t.pendingProps,Fn),a!==null?(t.stateNode=a,rn=t,bt=Qn(a.firstChild),Fn=!1,r=!0):r=!1),r||_r(t)),Nu(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,a=l.children,cd(r,l)?a=null:s!==null&&cd(r,s)&&(t.flags|=32),t.memoizedState!==null&&(r=tf(e,t,Ix,null,null,n),Ws._currentValue=r),oi(e,t),nn(e,t,a,n),t.child;case 6:return e===null&&Ve&&((e=n=bt)&&(n=Mv(n,t.pendingProps,Fn),n!==null?(t.stateNode=n,rn=t,bt=null,e=!0):e=!1),e||_r(t)),null;case 13:return Mb(e,t,n);case 4:return pi(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Gr(t,null,a,n):nn(e,t,a,n),t.child;case 11:return Jh(e,t,t.type,t.pendingProps,n);case 7:return nn(e,t,t.pendingProps,n),t.child;case 8:return nn(e,t,t.pendingProps.children,n),t.child;case 12:return nn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ja(t,t.type,a.value),nn(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,Yr(t),r=ln(r),a=a(r),t.flags|=1,nn(e,t,a,n),t.child;case 14:return eg(e,t,t.type,t.pendingProps,n);case 15:return Cb(e,t,t.type,t.pendingProps,n);case 19:return Nb(e,t,n);case 31:return Wx(e,t,n);case 22:return Eb(e,t,n,t.pendingProps);case 24:return Yr(t),a=ln(Ut),e===null?(r=Zd(),r===null&&(r=ct,l=Qd(),r.pooledCache=l,l.refCount++,l!==null&&(r.pooledCacheLanes|=n),r=l),t.memoizedState={parent:a,cache:r},Pd(t),Ja(t,Ut,r)):(e.lanes&n&&(Xu(e,t),Ms(t,null,null,n),Es()),r=e.memoizedState,l=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ja(t,Ut,a)):(a=l.cache,Ja(t,Ut,a),a!==r.cache&&Yu(t,[Ut],n,!0))),nn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(J(156,t.tag))}function Ea(e){e.flags|=4}function qc(e,t,n,a,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Pb())e.flags|=8192;else throw Ur=Ci,Kd}else e.flags&=-16777217}function og(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!v_(t))if(Pb())e.flags|=8192;else throw Ur=Ci,Kd}function Yo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jm():536870912,e.lanes|=t,Ol|=t)}function os(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&65011712,a|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Zx(e,t,n){var a=t.pendingProps;switch(Wd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),za(Ut),Nl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(tl(t)?Ea(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bc())),pt(t),null;case 26:var r=t.type,l=t.memoizedState;return e===null?(Ea(t),l!==null?(pt(t),og(t,l)):(pt(t),qc(t,r,null,a,n))):l?l!==e.memoizedState?(Ea(t),pt(t),og(t,l)):(pt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Ea(t),pt(t),qc(t,r,e,a,n)),null;case 27:if(bi(t),n=ir.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(!a){if(t.stateNode===null)throw Error(J(166));return pt(t),null}e=ba.current,tl(t)?Bh(t):(e=__(r,a,n),t.stateNode=e,Ea(t))}return pt(t),null;case 5:if(bi(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(!a){if(t.stateNode===null)throw Error(J(166));return pt(t),null}if(l=ba.current,tl(t))Bh(t);else{var s=Ui(ir.current);switch(l){case 1:l=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:l=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":l=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":l=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":l=s.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof a.is=="string"?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?l.multiple=!0:a.size&&(l.size=a.size);break;default:l=typeof a.is=="string"?s.createElement(r,{is:a.is}):s.createElement(r)}}l[an]=t,l[Sn]=a;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)l.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=l;e:switch(on(l,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ea(t)}}return pt(t),qc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(J(166));if(e=ir.current,tl(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,r=rn,r!==null)switch(r.tag){case 27:case 5:a=r.memoizedProps}e[an]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||g_(e.nodeValue,n)),e||_r(t,!0)}else e=Ui(e).createTextNode(a),e[an]=t,t.stateNode=e}return pt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=tl(t),n!==null){if(e===null){if(!a)throw Error(J(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(557));e[an]=t}else Ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),e=!1}else n=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(kn(t),t):(kn(t),null);if(t.flags&128)throw Error(J(558))}return pt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=tl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!r)throw Error(J(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(J(317));r[an]=t}else Ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),r=!1}else r=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(kn(t),t):(kn(t),null)}return kn(t),t.flags&128?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,r=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(r=a.alternate.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Yo(t,t.updateQueue),pt(t),null);case 4:return Nl(),e===null&&wf(t.stateNode.containerInfo),pt(t),null;case 10:return za(t.type),pt(t),null;case 19:if(Zt(Lt),a=t.memoizedState,a===null)return pt(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)os(a,!1);else{if(Tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Mi(e),l!==null){for(t.flags|=128,os(a,!1),e=l.updateQueue,t.updateQueue=e,Yo(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Tp(n,e),n=n.sibling;return dt(Lt,Lt.current&1|2),Ve&&Ta(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&On()>Li&&(t.flags|=128,r=!0,os(a,!1),t.lanes=4194304)}else{if(!r)if(e=Mi(l),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Yo(t,e),os(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ve)return pt(t),null}else 2*On()-a.renderingStartTime>Li&&n!==536870912&&(t.flags|=128,r=!0,os(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(e=a.last,e!==null?e.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=On(),e.sibling=null,n=Lt.current,dt(Lt,r?n&1|2:n&1),Ve&&Ta(t,a.treeForkCount),e):(pt(t),null);case 22:case 23:return kn(t),Jd(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?n&536870912&&!(t.flags&128)&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),n=t.updateQueue,n!==null&&Yo(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&Zt(zr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),za(Ut),pt(t),null;case 25:return null;case 30:return null}throw Error(J(156,t.tag))}function Kx(e,t){switch(Wd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return za(Ut),Nl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return bi(t),null;case 31:if(t.memoizedState!==null){if(kn(t),t.alternate===null)throw Error(J(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zt(Lt),null;case 4:return Nl(),null;case 10:return za(t.type),null;case 22:case 23:return kn(t),Jd(),e!==null&&Zt(zr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return za(Ut),null;case 25:return null;default:return null}}function Tb(e,t){switch(Wd(t),t.tag){case 3:za(Ut),Nl();break;case 26:case 27:case 5:bi(t);break;case 4:Nl();break;case 31:t.memoizedState!==null&&kn(t);break;case 13:kn(t);break;case 19:Zt(Lt);break;case 10:za(t.type);break;case 22:case 23:kn(t),Jd(),e!==null&&Zt(zr);break;case 24:za(Ut)}}function oo(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var r=a.next;n=r;do{if((n.tag&e)===e){a=void 0;var l=n.create,s=n.inst;a=l(),s.destroy=a}n=n.next}while(n!==r)}}catch(o){nt(t,t.return,o)}}function yr(e,t,n){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var l=r.next;a=l;do{if((a.tag&e)===e){var s=a.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=t;var i=n,d=o;try{d()}catch(p){nt(r,i,p)}}}a=a.next}while(a!==l)}}catch(p){nt(t,t.return,p)}}function kb(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Hp(t,n)}catch(a){nt(e,e.return,a)}}}function Db(e,t,n){n.props=Vr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){nt(e,t,a)}}function As(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(r){nt(e,t,r)}}function pa(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(r){nt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){nt(e,t,r)}else n.current=null}function Lb(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){nt(e,e.return,r)}}function $c(e,t,n){try{var a=e.stateNode;yv(a,e.type,n,t),a[Sn]=t}catch(r){nt(e,e.return,r)}}function Ob(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wr(e.type)||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ob(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ed(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ja));else if(a!==4&&(a===27&&wr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ed(e,t,n),e=e.sibling;e!==null;)ed(e,t,n),e=e.sibling}function Di(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&wr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Di(e,t,n),e=e.sibling;e!==null;)Di(e,t,n),e=e.sibling}function jb(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);on(t,a,n),t[an]=e,t[Sn]=n}catch(l){nt(e,e.return,l)}}var ka=!1,zt=!1,Wc=!1,ig=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function Px(e,t){if(e=e.containerInfo,od=Gi,e=vp(e),Xd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var s=0,o=-1,i=-1,d=0,p=0,g=e,m=null;t:for(;;){for(var x;g!==n||r!==0&&g.nodeType!==3||(o=s+r),g!==l||a!==0&&g.nodeType!==3||(i=s+a),g.nodeType===3&&(s+=g.nodeValue.length),(x=g.firstChild)!==null;)m=g,g=x;for(;;){if(g===e)break t;if(m===n&&++d===r&&(o=s),m===l&&++p===a&&(i=s),(x=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=x}n=o===-1||i===-1?null:{start:o,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},Gi=!1,Wt=t;Wt!==null;)if(t=Wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Wt=e;else for(;Wt!==null;){switch(t=Wt,l=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,r=l.memoizedProps,l=l.memoizedState,a=n.stateNode;try{var L=Vr(n.type,r);e=a.getSnapshotBeforeUpdate(L,l),a.__reactInternalSnapshotBeforeUpdate=e}catch(k){nt(n,n.return,k)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ud(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ud(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(J(163))}if(e=t.sibling,e!==null){e.return=t.return,Wt=e;break}Wt=t.return}}function Rb(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Na(e,n),a&4&&oo(5,n);break;case 1:if(Na(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){nt(n,n.return,s)}else{var r=Vr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){nt(n,n.return,s)}}a&64&&kb(n),a&512&&As(n,n.return);break;case 3:if(Na(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Hp(e,t)}catch(s){nt(n,n.return,s)}}break;case 27:t===null&&a&4&&jb(n);case 26:case 5:Na(e,n),t===null&&a&4&&Lb(n),a&512&&As(n,n.return);break;case 12:Na(e,n);break;case 31:Na(e,n),a&4&&Ub(e,n);break;case 13:Na(e,n),a&4&&Hb(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ov.bind(null,n),Nv(e,n))));break;case 22:if(a=n.memoizedState!==null||ka,!a){t=t!==null&&t.memoizedState!==null||zt,r=ka;var l=zt;ka=a,(zt=t)&&!l?Aa(e,n,(n.subtreeFlags&8772)!==0):Na(e,n),ka=r,zt=l}break;case 30:break;default:Na(e,n)}}function Bb(e){var t=e.alternate;t!==null&&(e.alternate=null,Bb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var St=null,xn=!1;function Ma(e,t,n){for(n=n.child;n!==null;)zb(e,t,n),n=n.sibling}function zb(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(eo,n)}catch{}switch(n.tag){case 26:zt||pa(n,t),Ma(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||pa(n,t);var a=St,r=xn;wr(n.type)&&(St=n.stateNode,xn=!1),Ma(e,t,n),Ls(n.stateNode),St=a,xn=r;break;case 5:zt||pa(n,t);case 6:if(a=St,r=xn,St=null,Ma(e,t,n),St=a,xn=r,St!==null)if(xn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(n.stateNode)}catch(l){nt(n,t,l)}else try{St.removeChild(n.stateNode)}catch(l){nt(n,t,l)}break;case 18:St!==null&&(xn?(e=St,vg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),zl(e)):vg(St,n.stateNode));break;case 4:a=St,r=xn,St=n.stateNode.containerInfo,xn=!0,Ma(e,t,n),St=a,xn=r;break;case 0:case 11:case 14:case 15:yr(2,n,t),zt||yr(4,n,t),Ma(e,t,n);break;case 1:zt||(pa(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Db(n,t,a)),Ma(e,t,n);break;case 21:Ma(e,t,n);break;case 22:zt=(a=zt)||n.memoizedState!==null,Ma(e,t,n),zt=a;break;default:Ma(e,t,n)}}function Ub(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zl(e)}catch(n){nt(t,t.return,n)}}}function Hb(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zl(e)}catch(n){nt(t,t.return,n)}}function Jx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ig),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ig),t;default:throw Error(J(435,e.tag))}}function Go(e,t){var n=Jx(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var r=iv.bind(null,e,a);a.then(r,r)}})}function _n(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a],l=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(wr(o.type)){St=o.stateNode,xn=!1;break e}break;case 5:St=o.stateNode,xn=!1;break e;case 3:case 4:St=o.stateNode.containerInfo,xn=!0;break e}o=o.return}if(St===null)throw Error(J(160));zb(l,s,r),St=null,xn=!1,l=r.alternate,l!==null&&(l.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ib(t,e),t=t.sibling}var oa=null;function Ib(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_n(t,e),yn(e),a&4&&(yr(3,e,e.return),oo(3,e),yr(5,e,e.return));break;case 1:_n(t,e),yn(e),a&512&&(zt||n===null||pa(n,n.return)),a&64&&ka&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var r=oa;if(_n(t,e),yn(e),a&512&&(zt||n===null||pa(n,n.return)),a&4){var l=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":l=r.getElementsByTagName("title")[0],(!l||l[ao]||l[an]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=r.createElement(a),r.head.insertBefore(l,r.querySelector("head > title"))),on(l,a,n),l[an]=e,Qt(l),a=l;break e;case"link":var s=Ag("link","href",r).get(a+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(l=s[o],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}l=r.createElement(a),on(l,a,n),r.head.appendChild(l);break;case"meta":if(s=Ag("meta","content",r).get(a+(n.content||""))){for(o=0;o<s.length;o++)if(l=s[o],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}l=r.createElement(a),on(l,a,n),r.head.appendChild(l);break;default:throw Error(J(468,a))}l[an]=e,Qt(l),a=l}e.stateNode=a}else Tg(r,e.type,e.stateNode);else e.stateNode=Ng(r,a,e.memoizedProps);else l!==a?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,a===null?Tg(r,e.type,e.stateNode):Ng(r,a,e.memoizedProps)):a===null&&e.stateNode!==null&&$c(e,e.memoizedProps,n.memoizedProps)}break;case 27:_n(t,e),yn(e),a&512&&(zt||n===null||pa(n,n.return)),n!==null&&a&4&&$c(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_n(t,e),yn(e),a&512&&(zt||n===null||pa(n,n.return)),e.flags&32){r=e.stateNode;try{Tl(r,"")}catch(L){nt(e,e.return,L)}}a&4&&e.stateNode!=null&&(r=e.memoizedProps,$c(e,r,n!==null?n.memoizedProps:r)),a&1024&&(Wc=!0);break;case 6:if(_n(t,e),yn(e),a&4){if(e.stateNode===null)throw Error(J(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(L){nt(e,e.return,L)}}break;case 3:if(ui=null,r=oa,oa=Hi(t.containerInfo),_n(t,e),oa=r,yn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{zl(t.containerInfo)}catch(L){nt(e,e.return,L)}Wc&&(Wc=!1,Yb(e));break;case 4:a=oa,oa=Hi(e.stateNode.containerInfo),_n(t,e),yn(e),oa=a;break;case 12:_n(t,e),yn(e);break;case 31:_n(t,e),yn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Go(e,a)));break;case 13:_n(t,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(sc=On()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Go(e,a)));break;case 22:r=e.memoizedState!==null;var i=n!==null&&n.memoizedState!==null,d=ka,p=zt;if(ka=d||r,zt=p||i,_n(t,e),zt=p,ka=d,yn(e),a&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||i||ka||zt||Or(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){i=n=t;try{if(l=i.stateNode,r)s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=i.stateNode;var g=i.memoizedProps.style,m=g!=null&&g.hasOwnProperty("display")?g.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(L){nt(i,i.return,L)}}}else if(t.tag===6){if(n===null){i=t;try{i.stateNode.nodeValue=r?"":i.memoizedProps}catch(L){nt(i,i.return,L)}}}else if(t.tag===18){if(n===null){i=t;try{var x=i.stateNode;r?wg(x,!0):wg(i.stateNode,!1)}catch(L){nt(i,i.return,L)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Go(e,n))));break;case 19:_n(t,e),yn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Go(e,a)));break;case 30:break;case 21:break;default:_n(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Ob(a)){n=a;break}a=a.return}if(n==null)throw Error(J(160));switch(n.tag){case 27:var r=n.stateNode,l=Fc(e);Di(e,l,r);break;case 5:var s=n.stateNode;n.flags&32&&(Tl(s,""),n.flags&=-33);var o=Fc(e);Di(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,d=Fc(e);ed(e,d,i);break;default:throw Error(J(161))}}catch(p){nt(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yb(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Rb(e,t.alternate,t),t=t.sibling}function Or(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yr(4,t,t.return),Or(t);break;case 1:pa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Db(t,t.return,n),Or(t);break;case 27:Ls(t.stateNode);case 26:case 5:pa(t,t.return),Or(t);break;case 22:t.memoizedState===null&&Or(t);break;case 30:Or(t);break;default:Or(t)}e=e.sibling}}function Aa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,r=e,l=t,s=l.flags;switch(l.tag){case 0:case 11:case 15:Aa(r,l,n),oo(4,l);break;case 1:if(Aa(r,l,n),a=l,r=a.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(d){nt(a,a.return,d)}if(a=l,r=a.updateQueue,r!==null){var o=a.stateNode;try{var i=r.shared.hiddenCallbacks;if(i!==null)for(r.shared.hiddenCallbacks=null,r=0;r<i.length;r++)Up(i[r],o)}catch(d){nt(a,a.return,d)}}n&&s&64&&kb(l),As(l,l.return);break;case 27:jb(l);case 26:case 5:Aa(r,l,n),n&&a===null&&s&4&&Lb(l),As(l,l.return);break;case 12:Aa(r,l,n);break;case 31:Aa(r,l,n),n&&s&4&&Ub(r,l);break;case 13:Aa(r,l,n),n&&s&4&&Hb(r,l);break;case 22:l.memoizedState===null&&Aa(r,l,n),As(l,l.return);break;case 30:break;default:Aa(r,l,n)}t=t.sibling}}function pf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&lo(n))}function bf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lo(e))}function sa(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gb(e,t,n,a),t=t.sibling}function Gb(e,t,n,a){var r=t.flags;switch(t.tag){case 0:case 11:case 15:sa(e,t,n,a),r&2048&&oo(9,t);break;case 1:sa(e,t,n,a);break;case 3:sa(e,t,n,a),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lo(e)));break;case 12:if(r&2048){sa(e,t,n,a),e=t.stateNode;try{var l=t.memoizedProps,s=l.id,o=l.onPostCommit;typeof o=="function"&&o(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(i){nt(t,t.return,i)}}else sa(e,t,n,a);break;case 31:sa(e,t,n,a);break;case 13:sa(e,t,n,a);break;case 23:break;case 22:l=t.stateNode,s=t.alternate,t.memoizedState!==null?l._visibility&2?sa(e,t,n,a):Ts(e,t):l._visibility&2?sa(e,t,n,a):(l._visibility|=2,ll(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),r&2048&&pf(s,t);break;case 24:sa(e,t,n,a),r&2048&&bf(t.alternate,t);break;default:sa(e,t,n,a)}}function ll(e,t,n,a,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,s=t,o=n,i=a,d=s.flags;switch(s.tag){case 0:case 11:case 15:ll(l,s,o,i,r),oo(8,s);break;case 23:break;case 22:var p=s.stateNode;s.memoizedState!==null?p._visibility&2?ll(l,s,o,i,r):Ts(l,s):(p._visibility|=2,ll(l,s,o,i,r)),r&&d&2048&&pf(s.alternate,s);break;case 24:ll(l,s,o,i,r),r&&d&2048&&bf(s.alternate,s);break;default:ll(l,s,o,i,r)}t=t.sibling}}function Ts(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,r=a.flags;switch(a.tag){case 22:Ts(n,a),r&2048&&pf(a.alternate,a);break;case 24:Ts(n,a),r&2048&&bf(a.alternate,a);break;default:Ts(n,a)}t=t.sibling}}var ms=8192;function nl(e,t,n){if(e.subtreeFlags&ms)for(e=e.child;e!==null;)Xb(e,t,n),e=e.sibling}function Xb(e,t,n){switch(e.tag){case 26:nl(e,t,n),e.flags&ms&&e.memoizedState!==null&&Hv(n,oa,e.memoizedState,e.memoizedProps);break;case 5:nl(e,t,n);break;case 3:case 4:var a=oa;oa=Hi(e.stateNode.containerInfo),nl(e,t,n),oa=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ms,ms=16777216,nl(e,t,n),ms=a):nl(e,t,n));break;default:nl(e,t,n)}}function Vb(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function is(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Wt=a,$b(a,e)}Vb(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qb(e),e=e.sibling}function qb(e){switch(e.tag){case 0:case 11:case 15:is(e),e.flags&2048&&yr(9,e,e.return);break;case 3:is(e);break;case 12:is(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ii(e)):is(e);break;default:is(e)}}function ii(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Wt=a,$b(a,e)}Vb(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:yr(8,t,t.return),ii(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ii(t));break;default:ii(t)}e=e.sibling}}function $b(e,t){for(;Wt!==null;){var n=Wt;switch(n.tag){case 0:case 11:case 15:yr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:lo(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Wt=a;else e:for(n=e;Wt!==null;){a=Wt;var r=a.sibling,l=a.return;if(Bb(a),a===n){Wt=null;break e}if(r!==null){r.return=l,Wt=r;break e}Wt=l}}}var ev={getCacheForType:function(e){var t=ln(Ut),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ln(Ut).controller.signal}},tv=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ct=null,Ye=null,Xe=0,tt=0,Tn=null,lr=!1,Xl=!1,_f=!1,Xa=0,Tt=0,xr=0,Hr=0,yf=0,Ln=0,Ol=0,ks=null,vn=null,td=!1,sc=0,Fb=0,Li=1/0,Oi=null,fr=null,Vt=0,hr=null,jl=null,Ua=0,nd=0,ad=null,Wb=null,Ds=0,rd=null;function Bn(){return Qe&2&&Xe!==0?Xe&-Xe:Ne.T!==null?vf():ap()}function Qb(){if(Ln===0)if(!(Xe&536870912)||Ve){var e=jo;jo<<=1,!(jo&3932160)&&(jo=262144),Ln=e}else Ln=536870912;return e=Un.current,e!==null&&(e.flags|=32),Ln}function wn(e,t,n){(e===ct&&(tt===2||tt===9)||e.cancelPendingCommit!==null)&&(Rl(e,0),sr(e,Xe,Ln,!1)),no(e,n),(!(Qe&2)||e!==ct)&&(e===ct&&(!(Qe&2)&&(Hr|=n),Tt===4&&sr(e,Xe,Ln,!1)),ya(e))}function Zb(e,t,n){if(Qe&6)throw Error(J(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||to(e,t),r=a?rv(e,t):Qc(e,t,!0),l=a;do{if(r===0){Xl&&!a&&sr(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!nv(n)){r=Qc(e,t,!1),l=!1;continue}if(r===2){if(l=t,e.errorRecoveryDisabledLanes&l)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var o=e;r=ks;var i=o.current.memoizedState.isDehydrated;if(i&&(Rl(o,s).flags|=256),s=Qc(o,s,!1),s!==2){if(_f&&!i){o.errorRecoveryDisabledLanes|=l,Hr|=l,r=4;break e}l=vn,vn=r,l!==null&&(vn===null?vn=l:vn.push.apply(vn,l))}r=s}if(l=!1,r!==2)continue}}if(r===1){Rl(e,0),sr(e,t,0,!0);break}e:{switch(a=e,l=r,l){case 0:case 1:throw Error(J(345));case 4:if((t&4194048)!==t)break;case 6:sr(a,t,Ln,!lr);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(J(329))}if((t&62914560)===t&&(r=sc+300-On(),10<r)){if(sr(a,t,Ln,!lr),Qi(a,0,!0)!==0)break e;Ua=t,a.timeoutHandle=p_(cg.bind(null,a,n,vn,Oi,td,t,Ln,Hr,Ol,lr,l,"Throttled",-0,0),r);break e}cg(a,n,vn,Oi,td,t,Ln,Hr,Ol,lr,l,null,-0,0)}}break}while(!0);ya(e)}function cg(e,t,n,a,r,l,s,o,i,d,p,g,m,x){if(e.timeoutHandle=-1,g=t.subtreeFlags,g&8192||(g&16785408)===16785408){g={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ja},Xb(t,l,g);var L=(l&62914560)===l?sc-On():(l&4194048)===l?Fb-On():0;if(L=Iv(g,L),L!==null){Ua=l,e.cancelPendingCommit=L(dg.bind(null,e,t,l,n,a,r,s,o,i,p,g,null,m,x)),sr(e,l,s,!d);return}}dg(e,t,l,n,a,r,s,o,i)}function nv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var r=n[a],l=r.getSnapshot;r=r.value;try{if(!zn(l(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sr(e,t,n,a){t&=~yf,t&=~Hr,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var r=t;0<r;){var l=31-Rn(r),s=1<<l;a[l]=-1,r&=~s}n!==0&&ep(e,n,t)}function oc(){return Qe&6?!0:(io(0),!1)}function xf(){if(Ye!==null){if(tt===0)var e=Ye.return;else e=Ye,Ra=Zr=null,rf(e),Cl=null,Xs=0,e=Ye;for(;e!==null;)Tb(e.alternate,e),e=e.return;Ye=null}}function Rl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,wv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ua=0,xf(),ct=e,Ye=n=Ba(e.current,null),Xe=t,tt=0,Tn=null,lr=!1,Xl=to(e,t),_f=!1,Ol=Ln=yf=Hr=xr=Tt=0,vn=ks=null,td=!1,t&8&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var r=31-Rn(a),l=1<<r;t|=e[r],a&=~l}return Xa=t,Ji(),n}function Kb(e,t){Oe=null,Ne.H=qs,t===Gl||t===tc?(t=Yh(),tt=3):t===Kd?(t=Yh(),tt=4):tt=t===gf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tn=t,Ye===null&&(Tt=1,Ti(e,$n(t,e.current)))}function Pb(){var e=Un.current;return e===null?!0:(Xe&4194048)===Xe?Wn===null:(Xe&62914560)===Xe||Xe&536870912?e===Wn:!1}function Jb(){var e=Ne.H;return Ne.H=qs,e===null?qs:e}function e_(){var e=Ne.A;return Ne.A=ev,e}function ji(){Tt=4,lr||(Xe&4194048)!==Xe&&Un.current!==null||(Xl=!0),!(xr&134217727)&&!(Hr&134217727)||ct===null||sr(ct,Xe,Ln,!1)}function Qc(e,t,n){var a=Qe;Qe|=2;var r=Jb(),l=e_();(ct!==e||Xe!==t)&&(Oi=null,Rl(e,t)),t=!1;var s=Tt;e:do try{if(tt!==0&&Ye!==null){var o=Ye,i=Tn;switch(tt){case 8:xf(),s=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(t=!0);var d=tt;if(tt=0,Tn=null,_l(e,o,i,d),n&&Xl){s=0;break e}break;default:d=tt,tt=0,Tn=null,_l(e,o,i,d)}}av(),s=Tt;break}catch(p){Kb(e,p)}while(!0);return t&&e.shellSuspendCounter++,Ra=Zr=null,Qe=a,Ne.H=r,Ne.A=l,Ye===null&&(ct=null,Xe=0,Ji()),s}function av(){for(;Ye!==null;)t_(Ye)}function rv(e,t){var n=Qe;Qe|=2;var a=Jb(),r=e_();ct!==e||Xe!==t?(Oi=null,Li=On()+500,Rl(e,t)):Xl=to(e,t);e:do try{if(tt!==0&&Ye!==null){t=Ye;var l=Tn;t:switch(tt){case 1:tt=0,Tn=null,_l(e,t,l,1);break;case 2:case 9:if(Ih(l)){tt=0,Tn=null,ug(t);break}t=function(){tt!==2&&tt!==9||ct!==e||(tt=7),ya(e)},l.then(t,t);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ih(l)?(tt=0,Tn=null,ug(t)):(tt=0,Tn=null,_l(e,t,l,7));break;case 5:var s=null;switch(Ye.tag){case 26:s=Ye.memoizedState;case 5:case 27:var o=Ye;if(s?v_(s):o.stateNode.complete){tt=0,Tn=null;var i=o.sibling;if(i!==null)Ye=i;else{var d=o.return;d!==null?(Ye=d,ic(d)):Ye=null}break t}}tt=0,Tn=null,_l(e,t,l,5);break;case 6:tt=0,Tn=null,_l(e,t,l,6);break;case 8:xf(),Tt=6;break e;default:throw Error(J(462))}}lv();break}catch(p){Kb(e,p)}while(!0);return Ra=Zr=null,Ne.H=a,Ne.A=r,Qe=n,Ye!==null?0:(ct=null,Xe=0,Ji(),Tt)}function lv(){for(;Ye!==null&&!A0();)t_(Ye)}function t_(e){var t=Ab(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,t===null?ic(e):Ye=t}function ug(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ag(n,t,t.pendingProps,t.type,void 0,Xe);break;case 11:t=ag(n,t,t.pendingProps,t.type.render,t.ref,Xe);break;case 5:rf(t);default:Tb(n,t),t=Ye=Tp(t,Xa),t=Ab(n,t,Xa)}e.memoizedProps=e.pendingProps,t===null?ic(e):Ye=t}function _l(e,t,n,a){Ra=Zr=null,rf(t),Cl=null,Xs=0;var r=t.return;try{if(Fx(e,r,t,n,Xe)){Tt=1,Ti(e,$n(n,e.current)),Ye=null;return}}catch(l){if(r!==null)throw Ye=r,l;Tt=1,Ti(e,$n(n,e.current)),Ye=null;return}t.flags&32768?(Ve||a===1?e=!0:Xl||Xe&536870912?e=!1:(lr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Un.current,a!==null&&a.tag===13&&(a.flags|=16384))),n_(t,e)):ic(t)}function ic(e){var t=e;do{if(t.flags&32768){n_(t,lr);return}e=t.return;var n=Zx(t.alternate,t,Xa);if(n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Tt===0&&(Tt=5)}function n_(e,t){do{var n=Kx(e.alternate,e);if(n!==null){n.flags&=32767,Ye=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=n}while(e!==null);Tt=6,Ye=null}function dg(e,t,n,a,r,l,s,o,i){e.cancelPendingCommit=null;do cc();while(Vt!==0);if(Qe&6)throw Error(J(327));if(t!==null){if(t===e.current)throw Error(J(177));if(l=t.lanes|t.childLanes,l|=Vd,U0(e,n,l,s,o,i),e===ct&&(Ye=ct=null,Xe=0),jl=t,hr=e,Ua=n,nd=l,ad=r,Wb=a,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,cv(_i,function(){return o_(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,t.subtreeFlags&13878||a){a=Ne.T,Ne.T=null,r=Ze.p,Ze.p=2,s=Qe,Qe|=4;try{Px(e,t,n)}finally{Qe=s,Ze.p=r,Ne.T=a}}Vt=1,a_(),r_(),l_()}}function a_(){if(Vt===1){Vt=0;var e=hr,t=jl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Ne.T,Ne.T=null;var a=Ze.p;Ze.p=2;var r=Qe;Qe|=4;try{Ib(t,e);var l=id,s=vp(e.containerInfo),o=l.focusedElem,i=l.selectionRange;if(s!==o&&o&&o.ownerDocument&&xp(o.ownerDocument.documentElement,o)){if(i!==null&&Xd(o)){var d=i.start,p=i.end;if(p===void 0&&(p=d),"selectionStart"in o)o.selectionStart=d,o.selectionEnd=Math.min(p,o.value.length);else{var g=o.ownerDocument||document,m=g&&g.defaultView||window;if(m.getSelection){var x=m.getSelection(),L=o.textContent.length,k=Math.min(i.start,L),U=i.end===void 0?k:Math.min(i.end,L);!x.extend&&k>U&&(s=U,U=k,k=s);var b=Oh(o,k),_=Oh(o,U);if(b&&_&&(x.rangeCount!==1||x.anchorNode!==b.node||x.anchorOffset!==b.offset||x.focusNode!==_.node||x.focusOffset!==_.offset)){var v=g.createRange();v.setStart(b.node,b.offset),x.removeAllRanges(),k>U?(x.addRange(v),x.extend(_.node,_.offset)):(v.setEnd(_.node,_.offset),x.addRange(v))}}}}for(g=[],x=o;x=x.parentNode;)x.nodeType===1&&g.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<g.length;o++){var S=g[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Gi=!!od,id=od=null}finally{Qe=r,Ze.p=a,Ne.T=n}}e.current=t,Vt=2}}function r_(){if(Vt===2){Vt=0;var e=hr,t=jl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Ne.T,Ne.T=null;var a=Ze.p;Ze.p=2;var r=Qe;Qe|=4;try{Rb(e,t.alternate,t)}finally{Qe=r,Ze.p=a,Ne.T=n}}Vt=3}}function l_(){if(Vt===4||Vt===3){Vt=0,T0();var e=hr,t=jl,n=Ua,a=Wb;t.subtreeFlags&10256||t.flags&10256?Vt=5:(Vt=0,jl=hr=null,s_(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(fr=null),Bd(n),t=t.stateNode,jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(eo,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=Ne.T,r=Ze.p,Ze.p=2,Ne.T=null;try{for(var l=e.onRecoverableError,s=0;s<a.length;s++){var o=a[s];l(o.value,{componentStack:o.stack})}}finally{Ne.T=t,Ze.p=r}}Ua&3&&cc(),ya(e),r=e.pendingLanes,n&261930&&r&42?e===rd?Ds++:(Ds=0,rd=e):Ds=0,io(0)}}function s_(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,lo(t)))}function cc(){return a_(),r_(),l_(),o_()}function o_(){if(Vt!==5)return!1;var e=hr,t=nd;nd=0;var n=Bd(Ua),a=Ne.T,r=Ze.p;try{Ze.p=32>n?32:n,Ne.T=null,n=ad,ad=null;var l=hr,s=Ua;if(Vt=0,jl=hr=null,Ua=0,Qe&6)throw Error(J(331));var o=Qe;if(Qe|=4,qb(l.current),Gb(l,l.current,s,n),Qe=o,io(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(eo,l)}catch{}return!0}finally{Ze.p=r,Ne.T=a,s_(e,t)}}function fg(e,t,n){t=$n(n,t),t=Ku(e.stateNode,t,2),e=dr(e,t,2),e!==null&&(no(e,2),ya(e))}function nt(e,t,n){if(e.tag===3)fg(e,e,n);else for(;t!==null;){if(t.tag===3){fg(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(fr===null||!fr.has(a))){e=$n(n,e),n=wb(2),a=dr(t,n,2),a!==null&&(Sb(n,a,t,e),no(a,2),ya(a));break}}t=t.return}}function Zc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new tv;var r=new Set;a.set(t,r)}else r=a.get(t),r===void 0&&(r=new Set,a.set(t,r));r.has(n)||(_f=!0,r.add(n),e=sv.bind(null,e,t,n),t.then(e,e))}function sv(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ct===e&&(Xe&n)===n&&(Tt===4||Tt===3&&(Xe&62914560)===Xe&&300>On()-sc?!(Qe&2)&&Rl(e,0):yf|=n,Ol===Xe&&(Ol=0)),ya(e)}function i_(e,t){t===0&&(t=Jm()),e=Qr(e,t),e!==null&&(no(e,t),ya(e))}function ov(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),i_(e,n)}function iv(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(J(314))}a!==null&&a.delete(t),i_(e,n)}function cv(e,t){return jd(e,t)}var Ri=null,sl=null,ld=!1,Bi=!1,Kc=!1,or=0;function ya(e){e!==sl&&e.next===null&&(sl===null?Ri=sl=e:sl=sl.next=e),Bi=!0,ld||(ld=!0,dv())}function io(e,t){if(!Kc&&Bi){Kc=!0;do for(var n=!1,a=Ri;a!==null;){if(e!==0){var r=a.pendingLanes;if(r===0)var l=0;else{var s=a.suspendedLanes,o=a.pingedLanes;l=(1<<31-Rn(42|e)+1)-1,l&=r&~(s&~o),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,hg(a,l))}else l=Xe,l=Qi(a,a===ct?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(l&3)||to(a,l)||(n=!0,hg(a,l));a=a.next}while(n);Kc=!1}}function uv(){c_()}function c_(){Bi=ld=!1;var e=0;or!==0&&vv()&&(e=or);for(var t=On(),n=null,a=Ri;a!==null;){var r=a.next,l=u_(a,t);l===0?(a.next=null,n===null?Ri=r:n.next=r,r===null&&(sl=n)):(n=a,(e!==0||l&3)&&(Bi=!0)),a=r}Vt!==0&&Vt!==5||io(e),or!==0&&(or=0)}function u_(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var s=31-Rn(l),o=1<<s,i=r[s];i===-1?(!(o&n)||o&a)&&(r[s]=z0(o,t)):i<=t&&(e.expiredLanes|=o),l&=~o}if(t=ct,n=Xe,n=Qi(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(tt===2||tt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ec(a),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||to(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Ec(a),Bd(n)){case 2:case 8:n=Km;break;case 32:n=_i;break;case 268435456:n=Pm;break;default:n=_i}return a=d_.bind(null,e),n=jd(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Ec(a),e.callbackPriority=2,e.callbackNode=null,2}function d_(e,t){if(Vt!==0&&Vt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cc()&&e.callbackNode!==n)return null;var a=Xe;return a=Qi(e,e===ct?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Zb(e,a,t),u_(e,On()),e.callbackNode!=null&&e.callbackNode===n?d_.bind(null,e):null)}function hg(e,t){if(cc())return null;Zb(e,t,!0)}function dv(){Sv(function(){Qe&6?jd(Zm,uv):c_()})}function vf(){if(or===0){var e=kl;e===0&&(e=Oo,Oo<<=1,!(Oo&261888)&&(Oo=256)),or=e}return or}function gg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jo(""+e)}function mg(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function fv(e,t,n,a,r){if(t==="submit"&&n&&n.stateNode===r){var l=gg((r[Sn]||null).action),s=a.submitter;s&&(t=(t=s[Sn]||null)?gg(t.formAction):s.getAttribute("formAction"),t!==null&&(l=t,s=null));var o=new Zi("action","action",null,a,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(or!==0){var i=s?mg(r,s):new FormData(r);Qu(n,{pending:!0,data:i,method:r.method,action:l},null,i)}}else typeof l=="function"&&(o.preventDefault(),i=s?mg(r,s):new FormData(r),Qu(n,{pending:!0,data:i,method:r.method,action:l},l,i))},currentTarget:r}]})}}for(var Pc=0;Pc<zu.length;Pc++){var Jc=zu[Pc],hv=Jc.toLowerCase(),gv=Jc[0].toUpperCase()+Jc.slice(1);ca(hv,"on"+gv)}ca(Sp,"onAnimationEnd");ca(Cp,"onAnimationIteration");ca(Ep,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(kx,"onTransitionRun");ca(Dx,"onTransitionStart");ca(Lx,"onTransitionCancel");ca(Mp,"onTransitionEnd");Al("onMouseEnter",["mouseout","mouseover"]);Al("onMouseLeave",["mouseout","mouseover"]);Al("onPointerEnter",["pointerout","pointerover"]);Al("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($s));function f_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var s=a.length-1;0<=s;s--){var o=a[s],i=o.instance,d=o.currentTarget;if(o=o.listener,i!==l&&r.isPropagationStopped())break e;l=o,r.currentTarget=d;try{l(r)}catch(p){xi(p)}r.currentTarget=null,l=i}else for(s=0;s<a.length;s++){if(o=a[s],i=o.instance,d=o.currentTarget,o=o.listener,i!==l&&r.isPropagationStopped())break e;l=o,r.currentTarget=d;try{l(r)}catch(p){xi(p)}r.currentTarget=null,l=i}}}}function Ie(e,t){var n=t[Tu];n===void 0&&(n=t[Tu]=new Set);var a=e+"__bubble";n.has(a)||(h_(t,e,2,!1),n.add(a))}function eu(e,t,n){var a=0;t&&(a|=4),h_(n,e,a,t)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function wf(e){if(!e[Xo]){e[Xo]=!0,rp.forEach(function(n){n!=="selectionchange"&&(mv.has(n)||eu(n,!1,e),eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xo]||(t[Xo]=!0,eu("selectionchange",!1,t))}}function h_(e,t,n,a){switch(M_(t)){case 2:var r=Xv;break;case 8:r=Vv;break;default:r=Mf}n=r.bind(null,t,n,e),r=void 0,!ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),a?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function tu(e,t,n,a,r){var l=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var s=a.tag;if(s===3||s===4){var o=a.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=a.return;s!==null;){var i=s.tag;if((i===3||i===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=cl(o),s===null)return;if(i=s.tag,i===5||i===6||i===26||i===27){a=l=s;continue e}o=o.parentNode}}a=a.return}fp(function(){var d=l,p=Hd(n),g=[];e:{var m=Np.get(e);if(m!==void 0){var x=Zi,L=e;switch(e){case"keypress":if(ti(n)===0)break e;case"keydown":case"keyup":x=ix;break;case"focusin":L="focus",x=kc;break;case"focusout":L="blur",x=kc;break;case"beforeblur":case"afterblur":x=kc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=dx;break;case Sp:case Cp:case Ep:x=J0;break;case Mp:x=hx;break;case"scroll":case"scrollend":x=W0;break;case"wheel":x=mx;break;case"copy":case"cut":case"paste":x=tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Eh;break;case"toggle":case"beforetoggle":x=bx}var k=(t&4)!==0,U=!k&&(e==="scroll"||e==="scrollend"),b=k?m!==null?m+"Capture":null:m;k=[];for(var _=d,v;_!==null;){var S=_;if(v=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||v===null||b===null||(S=Us(_,b),S!=null&&k.push(Fs(_,S,v))),U)break;_=_.return}0<k.length&&(m=new x(m,L,null,n,p),g.push({event:m,listeners:k}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==Ou&&(L=n.relatedTarget||n.fromElement)&&(cl(L)||L[Hl]))break e;if((x||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,x?(L=n.relatedTarget||n.toElement,x=d,L=L?cl(L):null,L!==null&&(U=Js(L),k=L.tag,L!==U||k!==5&&k!==27&&k!==6)&&(L=null)):(x=null,L=d),x!==L)){if(k=Sh,S="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(k=Eh,S="onPointerLeave",b="onPointerEnter",_="pointer"),U=x==null?m:hs(x),v=L==null?m:hs(L),m=new k(S,_+"leave",x,n,p),m.target=U,m.relatedTarget=v,S=null,cl(p)===d&&(k=new k(b,_+"enter",L,n,p),k.target=v,k.relatedTarget=U,S=k),U=S,x&&L)t:{for(k=pv,b=x,_=L,v=0,S=b;S;S=k(S))v++;S=0;for(var N=_;N;N=k(N))S++;for(;0<v-S;)b=k(b),v--;for(;0<S-v;)_=k(_),S--;for(;v--;){if(b===_||_!==null&&b===_.alternate){k=b;break t}b=k(b),_=k(_)}k=null}else k=null;x!==null&&pg(g,m,x,k,!1),L!==null&&U!==null&&pg(g,U,L,k,!0)}}e:{if(m=d?hs(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var z=Th;else if(Ah(m))if(_p)z=Nx;else{z=Ex;var R=Cx}else x=m.nodeName,!x||x.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?d&&Ud(d.elementType)&&(z=Th):z=Mx;if(z&&(z=z(e,d))){bp(g,z,n,p);break e}R&&R(e,m,d),e==="focusout"&&d&&m.type==="number"&&d.memoizedProps.value!=null&&Lu(m,"number",m.value)}switch(R=d?hs(d):window,e){case"focusin":(Ah(R)||R.contentEditable==="true")&&(fl=R,Ru=d,ws=null);break;case"focusout":ws=Ru=fl=null;break;case"mousedown":Bu=!0;break;case"contextmenu":case"mouseup":case"dragend":Bu=!1,jh(g,n,p);break;case"selectionchange":if(Tx)break;case"keydown":case"keyup":jh(g,n,p)}var K;if(Gd)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else dl?mp(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(gp&&n.locale!=="ko"&&(dl||F!=="onCompositionStart"?F==="onCompositionEnd"&&dl&&(K=hp()):(rr=p,Id="value"in rr?rr.value:rr.textContent,dl=!0)),R=zi(d,F),0<R.length&&(F=new Ch(F,e,null,n,p),g.push({event:F,listeners:R}),K?F.data=K:(K=pp(n),K!==null&&(F.data=K)))),(K=yx?xx(e,n):vx(e,n))&&(F=zi(d,"onBeforeInput"),0<F.length&&(R=new Ch("onBeforeInput","beforeinput",null,n,p),g.push({event:R,listeners:F}),R.data=K)),fv(g,e,d,n,p)}f_(g,t)})}function Fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zi(e,t){for(var n=t+"Capture",a=[];e!==null;){var r=e,l=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||l===null||(r=Us(e,n),r!=null&&a.unshift(Fs(e,r,l)),r=Us(e,t),r!=null&&a.push(Fs(e,r,l))),e.tag===3)return a;e=e.return}return[]}function pv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pg(e,t,n,a,r){for(var l=t._reactName,s=[];n!==null&&n!==a;){var o=n,i=o.alternate,d=o.stateNode;if(o=o.tag,i!==null&&i===a)break;o!==5&&o!==26&&o!==27||d===null||(i=d,r?(d=Us(n,l),d!=null&&s.unshift(Fs(n,d,i))):r||(d=Us(n,l),d!=null&&s.push(Fs(n,d,i)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var bv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function bg(e){return(typeof e=="string"?e:""+e).replace(bv,`
`).replace(_v,"")}function g_(e,t){return t=bg(t),bg(e)===t}function rt(e,t,n,a,r,l){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Tl(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Tl(e,""+a);break;case"className":Bo(e,"class",a);break;case"tabIndex":Bo(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(e,n,a);break;case"style":dp(e,a,l);break;case"data":if(t!=="object"){Bo(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Jo(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&rt(e,t,"name",r.name,r,null),rt(e,t,"formEncType",r.formEncType,r,null),rt(e,t,"formMethod",r.formMethod,r,null),rt(e,t,"formTarget",r.formTarget,r,null)):(rt(e,t,"encType",r.encType,r,null),rt(e,t,"method",r.method,r,null),rt(e,t,"target",r.target,r,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Jo(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=ja);break;case"onScroll":a!=null&&Ie("scroll",e);break;case"onScrollEnd":a!=null&&Ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(J(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Jo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Ie("beforetoggle",e),Ie("toggle",e),Po(e,"popover",a);break;case"xlinkActuate":Ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ca(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ca(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ca(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ca(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Po(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$0.get(n)||n,Po(e,n,a))}}function sd(e,t,n,a,r,l){switch(n){case"style":dp(e,a,l);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(J(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Tl(e,a):(typeof a=="number"||typeof a=="bigint")&&Tl(e,""+a);break;case"onScroll":a!=null&&Ie("scroll",e);break;case"onScrollEnd":a!=null&&Ie("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lp.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),l=e[Sn]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,r),typeof a=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,r);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Po(e,n,a)}}}function on(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",e),Ie("load",e);var a=!1,r=!1,l;for(l in n)if(n.hasOwnProperty(l)){var s=n[l];if(s!=null)switch(l){case"src":a=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:rt(e,t,l,s,n,null)}}r&&rt(e,t,"srcSet",n.srcSet,n,null),a&&rt(e,t,"src",n.src,n,null);return;case"input":Ie("invalid",e);var o=l=s=r=null,i=null,d=null;for(a in n)if(n.hasOwnProperty(a)){var p=n[a];if(p!=null)switch(a){case"name":r=p;break;case"type":s=p;break;case"checked":i=p;break;case"defaultChecked":d=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(J(137,t));break;default:rt(e,t,a,p,n,null)}}ip(e,l,o,i,d,s,r,!1);return;case"select":Ie("invalid",e),a=s=l=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":l=o;break;case"defaultValue":s=o;break;case"multiple":a=o;default:rt(e,t,r,o,n,null)}t=l,n=s,e.multiple=!!a,t!=null?vl(e,!!a,t,!1):n!=null&&vl(e,!!a,n,!0);return;case"textarea":Ie("invalid",e),l=r=a=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":a=o;break;case"defaultValue":r=o;break;case"children":l=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(J(91));break;default:rt(e,t,s,o,n,null)}up(e,a,r,l);return;case"option":for(i in n)if(n.hasOwnProperty(i)&&(a=n[i],a!=null))switch(i){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:rt(e,t,i,a,n,null)}return;case"dialog":Ie("beforetoggle",e),Ie("toggle",e),Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":Ie("load",e);break;case"video":case"audio":for(a=0;a<$s.length;a++)Ie($s[a],e);break;case"image":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"embed":case"source":case"link":Ie("error",e),Ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(a=n[d],a!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:rt(e,t,d,a,n,null)}return;default:if(Ud(t)){for(p in n)n.hasOwnProperty(p)&&(a=n[p],a!==void 0&&sd(e,t,p,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!=null&&rt(e,t,o,a,n,null))}function yv(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,s=null,o=null,i=null,d=null,p=null;for(x in n){var g=n[x];if(n.hasOwnProperty(x)&&g!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":i=g;default:a.hasOwnProperty(x)||rt(e,t,x,null,a,g)}}for(var m in a){var x=a[m];if(g=n[m],a.hasOwnProperty(m)&&(x!=null||g!=null))switch(m){case"type":l=x;break;case"name":r=x;break;case"checked":d=x;break;case"defaultChecked":p=x;break;case"value":s=x;break;case"defaultValue":o=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(J(137,t));break;default:x!==g&&rt(e,t,m,x,a,g)}}Du(e,s,o,i,d,p,l,r);return;case"select":x=s=o=m=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null)switch(l){case"value":break;case"multiple":x=i;default:a.hasOwnProperty(l)||rt(e,t,l,null,a,i)}for(r in a)if(l=a[r],i=n[r],a.hasOwnProperty(r)&&(l!=null||i!=null))switch(r){case"value":m=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:l!==i&&rt(e,t,r,l,a,i)}t=o,n=s,a=x,m!=null?vl(e,!!n,m,!1):!!a!=!!n&&(t!=null?vl(e,!!n,t,!0):vl(e,!!n,n?[]:"",!1));return;case"textarea":x=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!a.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:rt(e,t,o,null,a,r)}for(s in a)if(r=a[s],l=n[s],a.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":m=r;break;case"defaultValue":x=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(J(91));break;default:r!==l&&rt(e,t,s,r,a,l)}cp(e,m,x);return;case"option":for(var L in n)if(m=n[L],n.hasOwnProperty(L)&&m!=null&&!a.hasOwnProperty(L))switch(L){case"selected":e.selected=!1;break;default:rt(e,t,L,null,a,m)}for(i in a)if(m=a[i],x=n[i],a.hasOwnProperty(i)&&m!==x&&(m!=null||x!=null))switch(i){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:rt(e,t,i,m,a,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!=null&&!a.hasOwnProperty(k)&&rt(e,t,k,null,a,m);for(d in a)if(m=a[d],x=n[d],a.hasOwnProperty(d)&&m!==x&&(m!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(J(137,t));break;default:rt(e,t,d,m,a,x)}return;default:if(Ud(t)){for(var U in n)m=n[U],n.hasOwnProperty(U)&&m!==void 0&&!a.hasOwnProperty(U)&&sd(e,t,U,void 0,a,m);for(p in a)m=a[p],x=n[p],!a.hasOwnProperty(p)||m===x||m===void 0&&x===void 0||sd(e,t,p,m,a,x);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!a.hasOwnProperty(b)&&rt(e,t,b,null,a,m);for(g in a)m=a[g],x=n[g],!a.hasOwnProperty(g)||m===x||m==null&&x==null||rt(e,t,g,m,a,x)}function _g(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var r=n[a],l=r.transferSize,s=r.initiatorType,o=r.duration;if(l&&o&&_g(s)){for(s=0,o=r.responseEnd,a+=1;a<n.length;a++){var i=n[a],d=i.startTime;if(d>o)break;var p=i.transferSize,g=i.initiatorType;p&&_g(g)&&(i=i.responseEnd,s+=p*(i<o?1:(o-d)/(i-d)))}if(--a,t+=8*(l+s)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var od=null,id=null;function Ui(e){return e.nodeType===9?e:e.ownerDocument}function yg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nu=null;function vv(){var e=window.event;return e&&e.type==="popstate"?e===nu?!1:(nu=e,!0):(nu=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(e){return xg.resolve(null).then(e).catch(Cv)}:p_;function Cv(e){setTimeout(function(){throw e})}function wr(e){return e==="head"}function vg(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(r),zl(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Ls(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ls(n);for(var l=n.firstChild;l;){var s=l.nextSibling,o=l.nodeName;l[ao]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&l.rel.toLowerCase()==="stylesheet"||n.removeChild(l),l=s}}else n==="body"&&Ls(e.ownerDocument.body);n=r}while(n);zl(t)}function wg(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function ud(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ud(n),zd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ev(e,t,n,a){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ao])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function Mv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qn(e.nextSibling),e===null))return null;return e}function b_(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Qn(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$?"||e.data==="$~"}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Nv(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var hd=null;function Sg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Qn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function __(e,t,n){switch(t=Ui(n),e){case"html":if(e=t.documentElement,!e)throw Error(J(452));return e;case"head":if(e=t.head,!e)throw Error(J(453));return e;case"body":if(e=t.body,!e)throw Error(J(454));return e;default:throw Error(J(451))}}function Ls(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zd(e)}var Zn=new Map,Eg=new Set;function Hi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Va=Ze.d;Ze.d={f:Av,r:Tv,D:kv,C:Dv,L:Lv,m:Ov,X:Rv,S:jv,M:Bv};function Av(){var e=Va.f(),t=oc();return e||t}function Tv(e){var t=Il(e);t!==null&&t.tag===5&&t.type==="form"?db(t):Va.r(e)}var Vl=typeof document>"u"?null:document;function y_(e,t,n){var a=Vl;if(a&&typeof t=="string"&&t){var r=qn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Eg.has(r)||(Eg.add(r),e={rel:e,crossOrigin:n,href:t},a.querySelector(r)===null&&(t=a.createElement("link"),on(t,"link",e),Qt(t),a.head.appendChild(t)))}}function kv(e){Va.D(e),y_("dns-prefetch",e,null)}function Dv(e,t){Va.C(e,t),y_("preconnect",e,t)}function Lv(e,t,n){Va.L(e,t,n);var a=Vl;if(a&&e&&t){var r='link[rel="preload"][as="'+qn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+qn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+qn(n.imageSizes)+'"]')):r+='[href="'+qn(e)+'"]';var l=r;switch(t){case"style":l=Bl(e);break;case"script":l=ql(e)}Zn.has(l)||(e=yt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Zn.set(l,e),a.querySelector(r)!==null||t==="style"&&a.querySelector(co(l))||t==="script"&&a.querySelector(uo(l))||(t=a.createElement("link"),on(t,"link",e),Qt(t),a.head.appendChild(t)))}}function Ov(e,t){Va.m(e,t);var n=Vl;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+qn(a)+'"][href="'+qn(e)+'"]',l=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=ql(e)}if(!Zn.has(l)&&(e=yt({rel:"modulepreload",href:e},t),Zn.set(l,e),n.querySelector(r)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(uo(l)))return}a=n.createElement("link"),on(a,"link",e),Qt(a),n.head.appendChild(a)}}}function jv(e,t,n){Va.S(e,t,n);var a=Vl;if(a&&e){var r=xl(a).hoistableStyles,l=Bl(e);t=t||"default";var s=r.get(l);if(!s){var o={loading:0,preload:null};if(s=a.querySelector(co(l)))o.loading=5;else{e=yt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Zn.get(l))&&Sf(e,n);var i=s=a.createElement("link");Qt(i),on(i,"link",e),i._p=new Promise(function(d,p){i.onload=d,i.onerror=p}),i.addEventListener("load",function(){o.loading|=1}),i.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ci(s,t,a)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(l,s)}}}function Rv(e,t){Va.X(e,t);var n=Vl;if(n&&e){var a=xl(n).hoistableScripts,r=ql(e),l=a.get(r);l||(l=n.querySelector(uo(r)),l||(e=yt({src:e,async:!0},t),(t=Zn.get(r))&&Cf(e,t),l=n.createElement("script"),Qt(l),on(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(r,l))}}function Bv(e,t){Va.M(e,t);var n=Vl;if(n&&e){var a=xl(n).hoistableScripts,r=ql(e),l=a.get(r);l||(l=n.querySelector(uo(r)),l||(e=yt({src:e,async:!0,type:"module"},t),(t=Zn.get(r))&&Cf(e,t),l=n.createElement("script"),Qt(l),on(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(r,l))}}function Mg(e,t,n,a){var r=(r=ir.current)?Hi(r):null;if(!r)throw Error(J(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Bl(n.href),n=xl(r).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Bl(n.href);var l=xl(r).hoistableStyles,s=l.get(e);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,s),(l=r.querySelector(co(e)))&&!l._p&&(s.instance=l,s.state.loading=5),Zn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zn.set(e,n),l||zv(r,e,n,s.state))),t&&a===null)throw Error(J(528,""));return s}if(t&&a!==null)throw Error(J(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ql(n),n=xl(r).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(J(444,e))}}function Bl(e){return'href="'+qn(e)+'"'}function co(e){return'link[rel="stylesheet"]['+e+"]"}function x_(e){return yt({},e,{"data-precedence":e.precedence,precedence:null})}function zv(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),on(t,"link",n),Qt(t),e.head.appendChild(t))}function ql(e){return'[src="'+qn(e)+'"]'}function uo(e){return"script[async]"+e}function Ng(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+qn(n.href)+'"]');if(a)return t.instance=a,Qt(a),a;var r=yt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Qt(a),on(a,"style",r),ci(a,n.precedence,e),t.instance=a;case"stylesheet":r=Bl(n.href);var l=e.querySelector(co(r));if(l)return t.state.loading|=4,t.instance=l,Qt(l),l;a=x_(n),(r=Zn.get(r))&&Sf(a,r),l=(e.ownerDocument||e).createElement("link"),Qt(l);var s=l;return s._p=new Promise(function(o,i){s.onload=o,s.onerror=i}),on(l,"link",a),t.state.loading|=4,ci(l,n.precedence,e),t.instance=l;case"script":return l=ql(n.src),(r=e.querySelector(uo(l)))?(t.instance=r,Qt(r),r):(a=n,(r=Zn.get(l))&&(a=yt({},n),Cf(a,r)),e=e.ownerDocument||e,r=e.createElement("script"),Qt(r),on(r,"link",a),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(J(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(a=t.instance,t.state.loading|=4,ci(a,n.precedence,e));return t.instance}function ci(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,l=r,s=0;s<a.length;s++){var o=a[s];if(o.dataset.precedence===t)l=o;else if(l!==r)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Sf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ui=null;function Ag(e,t,n){if(ui===null){var a=new Map,r=ui=new Map;r.set(n,a)}else r=ui,a=r.get(n),a||(a=new Map,r.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var l=n[r];if(!(l[ao]||l[an]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var s=l.getAttribute(t)||"";s=e+s;var o=a.get(s);o?o.push(l):a.set(s,[l])}}return a}function Tg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Uv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function v_(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Hv(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Bl(a.href),l=t.querySelector(co(r));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ii.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=l,Qt(l);return}l=t.ownerDocument||t,a=x_(a),(r=Zn.get(r))&&Sf(a,r),l=l.createElement("link"),Qt(l);var s=l;s._p=new Promise(function(o,i){s.onload=o,s.onerror=i}),on(l,"link",a),n.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Ii.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var au=0;function Iv(e,t){return e.stylesheets&&e.count===0&&di(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&di(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&au===0&&(au=62500*xv());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&di(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>au?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(r)}}:null}function Ii(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)di(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yi=null;function di(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yi=new Map,t.forEach(Yv,e),Yi=null,Ii.call(e))}function Yv(e,t){if(!(t.state.loading&4)){var n=Yi.get(e);if(n)var a=n.get(null);else{n=new Map,Yi.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var s=r[l];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),a=s)}a&&n.set(null,a)}r=t.instance,s=r.getAttribute("data-precedence"),l=n.get(s)||a,l===a&&n.set(null,r),n.set(s,r),this.count++,a=Ii.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),l?l.parentNode.insertBefore(r,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ws={$$typeof:Oa,Provider:null,Consumer:null,_currentValue:Rr,_currentValue2:Rr,_threadCount:0};function Gv(e,t,n,a,r,l,s,o,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mc(0),this.hiddenUpdates=Mc(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function w_(e,t,n,a,r,l,s,o,i,d,p,g){return e=new Gv(e,t,n,s,i,d,p,g,o),t=1,l===!0&&(t|=24),l=Dn(3,null,null,t),e.current=l,l.stateNode=e,t=Qd(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:a,isDehydrated:n,cache:t},Pd(l),e}function S_(e){return e?(e=ml,e):ml}function C_(e,t,n,a,r,l){r=S_(r),a.context===null?a.context=r:a.pendingContext=r,a=ur(t),a.payload={element:n},l=l===void 0?null:l,l!==null&&(a.callback=l),n=dr(e,a,t),n!==null&&(wn(n,e,t),Cs(n,e,t))}function kg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ef(e,t){kg(e,t),(e=e.alternate)&&kg(e,t)}function E_(e){if(e.tag===13||e.tag===31){var t=Qr(e,67108864);t!==null&&wn(t,e,67108864),Ef(e,67108864)}}function Dg(e){if(e.tag===13||e.tag===31){var t=Bn();t=Rd(t);var n=Qr(e,t);n!==null&&wn(n,e,t),Ef(e,t)}}var Gi=!0;function Xv(e,t,n,a){var r=Ne.T;Ne.T=null;var l=Ze.p;try{Ze.p=2,Mf(e,t,n,a)}finally{Ze.p=l,Ne.T=r}}function Vv(e,t,n,a){var r=Ne.T;Ne.T=null;var l=Ze.p;try{Ze.p=8,Mf(e,t,n,a)}finally{Ze.p=l,Ne.T=r}}function Mf(e,t,n,a){if(Gi){var r=gd(a);if(r===null)tu(e,t,a,Xi,n),Lg(e,a);else if($v(r,e,t,n,a))a.stopPropagation();else if(Lg(e,a),t&4&&-1<qv.indexOf(e)){for(;r!==null;){var l=Il(r);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var s=Dr(l.pendingLanes);if(s!==0){var o=l;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var i=1<<31-Rn(s);o.entanglements[1]|=i,s&=~i}ya(l),!(Qe&6)&&(Li=On()+500,io(0))}}break;case 31:case 13:o=Qr(l,2),o!==null&&wn(o,l,2),oc(),Ef(l,2)}if(l=gd(a),l===null&&tu(e,t,a,Xi,n),l===r)break;r=l}r!==null&&a.stopPropagation()}else tu(e,t,a,null,n)}}function gd(e){return e=Hd(e),Nf(e)}var Xi=null;function Nf(e){if(Xi=null,e=cl(e),e!==null){var t=Js(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=qm(t),e!==null)return e;e=null}else if(n===31){if(e=$m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xi=e,null}function M_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(k0()){case Zm:return 2;case Km:return 8;case _i:case D0:return 32;case Pm:return 268435456;default:return 32}default:return 32}}var md=!1,gr=null,mr=null,pr=null,Qs=new Map,Zs=new Map,nr=[],qv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lg(e,t){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function cs(e,t,n,a,r,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:l,targetContainers:[r]},t!==null&&(t=Il(t),t!==null&&E_(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function $v(e,t,n,a,r){switch(t){case"focusin":return gr=cs(gr,e,t,n,a,r),!0;case"dragenter":return mr=cs(mr,e,t,n,a,r),!0;case"mouseover":return pr=cs(pr,e,t,n,a,r),!0;case"pointerover":var l=r.pointerId;return Qs.set(l,cs(Qs.get(l)||null,e,t,n,a,r)),!0;case"gotpointercapture":return l=r.pointerId,Zs.set(l,cs(Zs.get(l)||null,e,t,n,a,r)),!0}return!1}function N_(e){var t=cl(e.target);if(t!==null){var n=Js(t);if(n!==null){if(t=n.tag,t===13){if(t=qm(n),t!==null){e.blockedOn=t,ph(e.priority,function(){Dg(n)});return}}else if(t===31){if(t=$m(n),t!==null){e.blockedOn=t,ph(e.priority,function(){Dg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gd(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ou=a,n.target.dispatchEvent(a),Ou=null}else return t=Il(n),t!==null&&E_(t),e.blockedOn=n,!1;t.shift()}return!0}function Og(e,t,n){fi(e)&&n.delete(t)}function Fv(){md=!1,gr!==null&&fi(gr)&&(gr=null),mr!==null&&fi(mr)&&(mr=null),pr!==null&&fi(pr)&&(pr=null),Qs.forEach(Og),Zs.forEach(Og)}function Vo(e,t){e.blockedOn===t&&(e.blockedOn=null,md||(md=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Fv)))}var qo=null;function jg(e){qo!==e&&(qo=e,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,function(){qo===e&&(qo=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],r=e[t+2];if(typeof a!="function"){if(Nf(a||n)===null)continue;break}var l=Il(n);l!==null&&(e.splice(t,3),t-=3,Qu(l,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function zl(e){function t(i){return Vo(i,e)}gr!==null&&Vo(gr,e),mr!==null&&Vo(mr,e),pr!==null&&Vo(pr,e),Qs.forEach(t),Zs.forEach(t);for(var n=0;n<nr.length;n++){var a=nr[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)N_(n),n.blockedOn===null&&nr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var r=n[a],l=n[a+1],s=r[Sn]||null;if(typeof l=="function")s||jg(n);else if(s){var o=null;if(l&&l.hasAttribute("formAction")){if(r=l,s=l[Sn]||null)o=s.formAction;else if(Nf(r)!==null)continue}else o=s.action;typeof o=="function"?n[a+1]=o:(n.splice(a,3),a-=3),jg(n)}}}function A_(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Af(e){this._internalRoot=e}uc.prototype.render=Af.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));var n=t.current,a=Bn();C_(n,a,e,t,null,null)};uc.prototype.unmount=Af.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;C_(e.current,2,null,e,null,null),oc(),t[Hl]=null}};function uc(e){this._internalRoot=e}uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=ap();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nr.length&&t!==0&&t<nr[n].priority;n++);nr.splice(n,0,e),n===0&&N_(e)}};var Rg=Xm.version;if(Rg!=="19.2.3")throw Error(J(527,Rg,"19.2.3"));Ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=S0(t),e=e!==null?Fm(e):null,e=e===null?null:e.stateNode,e};var Wv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{eo=$o.inject(Wv),jn=$o}catch{}}Fi.createRoot=function(e,t){if(!Vm(e))throw Error(J(299));var n=!1,a="",r=yb,l=xb,s=vb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=w_(e,1,!1,null,null,n,a,null,r,l,s,A_),e[Hl]=t.current,wf(e),new Af(t)};Fi.hydrateRoot=function(e,t,n){if(!Vm(e))throw Error(J(299));var a=!1,r="",l=yb,s=xb,o=vb,i=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(i=n.formState)),t=w_(e,1,!0,t,n??null,a,r,i,l,s,o,A_),t.context=S_(null),n=t.current,a=Bn(),a=Rd(a),r=ur(a),r.callback=null,dr(n,r,a),n=a,t.current.lanes=n,no(t,n),ya(t),e[Hl]=t.current,wf(e),new uc(t)};Fi.version="19.2.3";function T_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T_)}catch(e){console.error(e)}}T_(),zm.exports=Fi;var Qv=zm.exports;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),Bg=e=>{const t=Kv(e);return t.charAt(0).toUpperCase()+t.slice(1)},k_=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim(),Pv=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:r="",children:l,iconNode:s,...o},i)=>h.createElement("svg",{ref:i,...Jv,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:k_("lucide",r),...!l&&!Pv(o)&&{"aria-hidden":"true"},...o},[...s.map(([d,p])=>h.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=(e,t)=>{const n=h.forwardRef(({className:a,...r},l)=>h.createElement(ew,{ref:l,iconNode:t,className:k_(`lucide-${Zv(Bg(e))}`,`lucide-${e}`,a),...r}));return n.displayName=Bg(e),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D_=qa("chevron-down",tw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],aw=qa("download",nw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lw=qa("info",rw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ow=qa("moon",sw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cw=qa("search",iw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dw=qa("settings",uw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],hw=qa("sticky-note",fw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mw=qa("sun",gw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bw=qa("upload",pw),_w={ko:{meta:{title:"Coco Viewer - Gerber/ODB++",description:" Gerber       "},lang:{toggleLabel:"EN",toggleAria:" "},terms:{net:"Net",component:"Component",layer:"",odbJob:"ODB++ "},errors:{fileNotFound:"   : {path}",canvasMissing:"Canvas    .",captureFailed:"  : {message}",datasetMissing:"ODB++   .",highlightMissing:"   .",patternRequired:"pattern .",listFetchFailed:"{type}   .",nameRequired:"{type}  .",notFound:"{type}()   : {name}",netSelectionEmpty:" Net .",regexInvalid:" : {message}",highlightApiMissing:" API . WASM   .",netLayerMapMissing:"Net   API . WASM   .",netLengthApiMissing:"Net length API . WASM   .",netLengthFailed:"Net length  : {message}",netPinApiMissing:"Net pin API . WASM   .",netPinFailed:"Net pin  : {message}",highlightToggleFailed:"  : {message}",colorFormat:"color #RRGGBB  .",layerNotFound:"   : {layer}",netLayerNotFound:"Net     .",sceneBatchMissing:"Scene     ."},noscript:{message:"Gerber Viewer   JavaScript ."},header:{logo:"Coco Viewer",logoSubtext:"Gerber  ODB++",privacyBadge:"    -   ",importMenuAria:" ",import:"",infoAria:" ",info:"",settings:"",settingsAria:" ",sceneNotesTitle:" ",sceneNotes:"",userSymbolsTitle:"User Symbol ",userSymbols:"User Symbols"},cadencePicker:{title:"Cadence  ",description:"   :",cancel:""},menu:{openGerber:"Gerber ",openGerberHint:"   ",openOdb:"ODB++ ",openOdbHint:"  ",openCadence:"Cadence Allegro ",openCadenceHint:"Extracta report (.out) ",importModeLabel:" ",importModeAppend:"",importModeReplace:"",importModeHint:"Gerber . ODB++  .",privacyNotice:"       .      ."},settings:{title:"",gpuLabel:"GPU   ",gpuDescription:"    .",gpuUnsupported:"    .",workerLabel:"  ()",workerDescription:"   .",workerUnsupported:"    .",workerRequiresGpu:"GPU    .",skipDocumentLabel:"Document  ",skipDocumentDescription:"ODB++   document   .",renderPerfLabel:"WebGPU   (Circle/Arc 8)",renderPerfDescription:"/ARC      .",renderPerfRequiresGpu:"WebGPU  ."},infoPanel:{title:"Coco Viewer",version:"v1.0.0",about:{title:"",body:"Gerber  ODB++     EDA  ."},features:{title:" ",body:"Gerber View, ODB++ View"},mcp:{title:"MCP ",body:"Claude Code  MCP     .",link:"  "},privacy:{title:" ",body:"      .      .",mcpNote:", MCP     LLM    ."},disclaimer:{title:" ",body:'      " " .       , , , ,       .'},purpose:{title:"",body:" EDA      ."},footer:" 2025 Coco Viewer. All rights reserved."},sidebar:{title:"Layers",openImportMenu:"  ",sampleManualLayer:"  1",emptyTitle:"  ",emptyHint:"    +, &  (ODB++   )",searchPlaceholder:" ...",showAll:" ",hideAll:" "},layers:{changeColor:"  ",toggleVisibility:"  ",remove:" ",parseFailed:"  ",noShapes:"   ."},canvas:{aria:"Gerber Viewer canvas"},overlay:{title:"Layer Viewer",text:"Gerber  ODB++    .",welcomeTitle:"Coco Viewer   ",welcomePrivacy:"   .",welcomePrivacyNote:"   (, AI - MCP )"},status:{ready:"",coords:"X: {x}, Y: {y}",grid:{off:"Grid: ",unknown:"Grid: ",value:"Grid: {value} mm",toggle:"Grid "},file:{unzip:"{filename}   ...",noSupportedLayer:"{filename}     .",entryLoadError:"{filename}    .",unzipFailed:"{filename}    ."},odb:{loading:"ODB++   ...",invalidFolder:"ODB++  . matrix/matrix  steps/layers  .",readFailed:"ODB++ {job}  : {error}",loadFailed:"ODB++ {job}  : {error}",noLayers:" ODB++   .",summary:"ODB++ {job} {parsed}/{total}  "},layer:{loading:"{name}  ...",loaded:"{name}  ",loadError:"{name}  "},scene:{saveNoActiveLayer:"  :   .",saveNoView:"  :     .",saveSuccess:"  : {title}",saveStorageError:"  :  ",documentExported:"  : {title}",documentBatchExported:" {count} : {filename}",updateSuccess:"  .",deleteSuccess:" .",deleteStorageError:"  :  ",replaceSuccess:"  .",replaceStorageError:"  :  ",importSuccess:" .",importStorageError:"  :  ",copySuccess:" .",copyTextOnly:"   .",copyFallbackText:"    .",copyNoData:"  .",copyUnavailable:"    .",copyFailed:"  : {error}",layerMissing:"   : {layer}"},mcp:{connected:"MCP "}},mcp:{labelDisabled:"MCP ()",titleDisabled:"MCP .  ",titleConnected:"MCP  .  ",titleActive:"MCP   (  )",titleInactive:"MCP   (  )",titleDisconnected:"MCP  .   ",titleDisconnect:"MCP  "},rightPanel:{tabs:{nets:"Nets",components:"",highlights:"",selection:"",measure:""},highlights:{title:"Net/Component Highlights",fitTitle:"   ",fit:"Zoom Fit",clearTitle:" Net/Component  ",clear:"",removeTitle:"  ",autoFit:"Auto Fit",autoLayer:"Layer  ",autoLayerTrace:"(TRC)",dimUnhighlighted:"  ",empty:"  "},nets:{searchPlaceholder:"Net ...",empty:"Net ",noMatch:" Net ",selectAll:" ",deselectAll:" "},components:{searchPlaceholder:"Component ...",empty:"Component ",noMatch:" Component ",selectAll:" ",deselectAll:" "},selection:{filterNet:"Net",filterComponent:"",fitTitle:"   ",fit:" ",clearTitle:"  ",clear:"",autoFit:" ",pickedItems:" ",addToHighlights:" ",addedToHighlights:"",empty:"  ",infoTitle:" ",badges:{net:"Net",comp:"",feature:""},table:{layer:"",feature:"",type:"",net:"Net",subnet:"",component:"",pinToe:"Pin/Toe",featureType:" ",size:""}},measure:{mode:" ",includeWidth:" ",clear:"",datasetRequired:"ODB++  ",pickTwo:"    ",enableHint:"     ",shortcut:": M",targets:"",targetA:"A",targetB:"B",targetAEmpty:" A ",targetBEmpty:" B ",result:"",relation:"",distance:"",outline:"",empty:"  "}},scene:{panelEyebrow:"Scene ",panelTitle:"Scene ",save:"Scene ",import:"",exportMenu:"",exportMenuAria:" ",exportSelected:" ",exportAll:" ",exportDocumentSelected:" ()",exportDocumentAll:" ()",deleteSelected:" ",compactToggle:"  ",compactCollapse:" ",compactExpand:" ",autoApply:"   ",close:"Scene Notes ",listTitle:"Scenes",selectedCount:" {count}",selectAll:" ",clearSelection:" ",searchPlaceholder:"   ",emptyList:"  .",emptyDetailTitle:"  ",emptyDetailHint:"      .",labelTitle:"",labelTags:"",titlePlaceholder:" ",tagsPlaceholder:" ( )",createdAt:": {date}",updatedAt:": {date}",apply:"/",applyInline:"",noteEdit:"",notePreview:"",notePlaceholder:"Markdown ",copy:" ",exportDocument:" ",update:"",delete:"",thumbnailFallback:"VIEW",thumbnailAlt:'"{title}" ',untitled:" ",fallbackTitle:"Scene {timestamp}",selectAria:"",confirmDelete:'"{title}"  ?',confirmDeleteSelected:"  {count} ?",confirmIncludeThumbnail:"  ?",confirmReplaceAll:"      ?",confirmOverwrite:" ID  . ?   .",exportModal:{title:" ",description:"        .",include:"  ",exclude:" ",highRes:" "},documentExportModal:{title:"  ",description:"         .",default:"()",highRes:" ",cancel:"",confirmHighRes:"   ?"},document:{title:"Scene Document",summary:"CAD  ",visual:"CAD ",layersHighlights:"/",notes:"",exportedAt:" ",createdAt:" ",updatedAt:" ",tags:"",emptyTags:" ",viewBox:" ",layers:" ",highlights:"",otherHighlights:"",highlightIncluded:" ",highlightDim:" dim",viewport:"",camera:"",emptyThumbnail:"  .",emptyNotes:"  .",emptyLayers:"  ",emptyHighlights:" ",emptyViewBox:"   ",yes:"",no:""},documentIndex:{title:" ",subtitle:"{date}   {count}",searchPlaceholder:"/ ",openDocument:" ",empty:" ."},alertImportInvalid:"    .",alertImportNoData:"   .",alertExportNoSelection:"  .",alertDeleteNoSelection:"  .",modal:{title:" ",labelTitle:"",labelTags:"",tagsPlaceholder:": DFM, critical",includeLayers:"   ",includeHighlights:" ",includeThumbnail:" ",cancel:"",confirm:""}},userSymbols:{eyebrow:"ODB++",title:"User Symbols",close:"User Symbols ",jobMissing:"ODB++  ",count:"Symbols {count}",statusIdle:"Main  ODB++   .",statusSyncing:"User Symbols  ...",statusNoFiles:" ODB++  .",statusLoaded:"{job}  ",statusLoadError:"User Symbols  : {error}",statusRenderStart:"{name}  ...",statusRenderDone:"{name}  ",statusRenderFail:"{name}  : {error}",listEmpty:"User Symbol .",listPrompt:" ODB++ .",canvasTitle:"Canvas"},playground:{title:"Shape Viewer Playground",subtitle:"PGeom/Gerber Layer inspector + Standard Symbol previewer",tabLayers:"Layers Viewer",tabSymbols:"Symbol Viewer"},layersView:{title:"Layers Viewer",statusLoadingWasm:"Loading WASM",statusWasmReady:"WASM ready",statusWasmFailed:"Failed to initialise WASM",legendLayers:"Layers",addPgeom:"Add PGeom",addGerber:"Add Gerber",addManual:"Add From Input",legendManual:"Manual PGeom Input",resetView:"Reset View",legendRenderer:"Renderer",rendererCanvas:"Canvas",rendererWebgl:"WebGL",rendererWebgpu:"WebGPU",instancingOn:"Instancing: On",instancingOff:"Instancing: Off",workerOn:"Worker: ",workerOff:"Worker: ",workerUnavailable:"Worker:  ",gridHide:"Hide Grid",gridShow:"Show Grid",gridUnavailable:"Grid Unavailable",gridOff:"Grid: off",gridAuto:"auto",gridValue:"Grid: {value}",gridUnavailableDetail:"Grid: n/a (WebGL/WebGPU)",legendDetails:"Details",detailRaw:"Raw Input",detailScene:"Scene JSON",detailEmpty:"     Scene JSON   .",detailError:": {message}",detailPending:"  Scene JSON .",manualLayerPrefix:"Manual Layer {index}"},symbolsView:{title:"Standard Symbol Viewer",statusLoadingWasm:"Loading WASM",statusWasmReady:"WASM ready",statusWasmFailed:"Failed to initialise WASM",legendInputs:"Inputs",labelSymbol:"Symbol",placeholderSymbol:"e.g. rect100x50xr10",labelSymbolUnit:"Symbol unit",symbolUnitMicron:"Micron (default)",symbolUnitMil:"Mil (imperial)",labelProductUnit:"Product unit",productUnitMm:"Millimeter",productUnitInch:"Inch",renderButton:"Render Symbol",resetButton:"Reset View",quickExamples:"Quick Examples:",legendCanvas:"Canvas",gridOff:"Grid: off",gridHide:"Hide Grid",gridShow:"Show Grid",gridAuto:"auto",gridValue:"Grid: {value}",exportPng:"Save PNG",legendScene:"Scene JSON",sceneAwaiting:"Awaiting render",statusEnterSymbol:"Enter a symbol name (e.g. r200, rect120x60xr10).",statusRendering:"Rendering symbol",statusNoGeometry:"Symbol returned no geometry.",statusRendered:"Rendered {name} ({count} shape{plural}).",statusFailedRender:"Failed to render symbol.",statusSavingPng:"Saving canvas as PNG",statusSavedPng:"Saved PNG ({filename}).",statusFailedSave:"Failed to save PNG.",examples:{round:"",square:"",rectangle:"",oval:"",roundedRect:" ",chamferedRect:" ",halfOval:"",octagon:"",triangle:"",diamond:"",hexHorizontal:" ()",hexVertical:" ()",donutRound:" ()",donutSquare:" ()",thermalRound:" ()",thermalSquare:" ()",thermalOval:" ()"}}},en:{meta:{title:"Coco Viewer - Gerber/ODB++",description:"Production viewer for loading and comparing multiple Gerber layers."},lang:{toggleLabel:"",toggleAria:"Switch language"},terms:{net:"Net",component:"Component",layer:"Layer",odbJob:"ODB++ job"},errors:{fileNotFound:"File not found: {path}",canvasMissing:"Canvas element not found.",captureFailed:"Screen capture failed: {message}",datasetMissing:"ODB++ dataset not loaded.",highlightMissing:"No highlights on the active layer.",patternRequired:"Pattern is required.",listFetchFailed:"Failed to fetch {type} list.",nameRequired:"{type} name is required.",notFound:"{type} not found: {name}",netSelectionEmpty:"No Nets selected.",regexInvalid:"Regex error: {message}",highlightApiMissing:"Highlight API missing. WASM rebuild required.",netLayerMapMissing:"Net layer mapping API missing. WASM rebuild required.",netLengthApiMissing:"Net length API missing. WASM rebuild required.",netLengthFailed:"Net length calculation failed: {message}",netPinApiMissing:"Net pin API missing. WASM rebuild required.",netPinFailed:"Net pin lookup failed: {message}",highlightToggleFailed:"Failed to toggle highlight: {message}",colorFormat:"Color must be in #RRGGBB format.",layerNotFound:"Layer not found: {layer}",netLayerNotFound:"No layers found for the selected Nets.",sceneBatchMissing:"Scene batch status not found."},noscript:{message:"Please enable JavaScript in your browser to use Gerber Viewer."},header:{logo:"Coco Viewer",logoSubtext:"Gerber  ODB++",privacyBadge:"All processing happens locally - No data uploaded",importMenuAria:"Import menu",import:"Import",infoAria:"Site information",info:"Info",settings:"Settings",settingsAria:"Open settings",sceneNotesTitle:"Open scene notes",sceneNotes:"Scene Notes",userSymbolsTitle:"Open user symbols",userSymbols:"User Symbols"},cadencePicker:{title:"Select Cadence Design",description:"Multiple designs found in folder:",cancel:"Cancel"},menu:{openGerber:"Gerber files",openGerberHint:"Multiple files supported",openOdb:"ODB++ folder",openOdbHint:"Folder selection required",openCadence:"Cadence Allegro folder",openCadenceHint:"Extracta report (.out) folder",importModeLabel:"Import mode",importModeAppend:"Append",importModeReplace:"Replace",importModeHint:"Applies to Gerber only. ODB++ always replaces.",privacyNotice:"Browsers may show a default warning when selecting folders. Files are processed locally and never sent to a server."},settings:{title:"Settings",gpuLabel:"Use GPU-accelerated rendering",gpuDescription:"Renders faster in supported browsers.",gpuUnsupported:"Not available in this browser.",workerLabel:"Use background rendering (experimental)",workerDescription:"Separates rendering when supported.",workerUnsupported:"Not available in this environment.",workerRequiresGpu:"Requires GPU acceleration to be on.",skipDocumentLabel:"Skip document layers",skipDocumentDescription:"Skips ODB++ layers whose type is document at load time.",renderPerfLabel:"WebGPU performance mode (Circle/Arc 8)",renderPerfDescription:"Reduces circle/arc segments to cut render preparation time.",renderPerfRequiresGpu:"Applies when WebGPU rendering is active."},infoPanel:{title:"Coco Viewer",version:"v1.0.0",about:{title:"About",body:"A browser-based EDA file viewer supporting Gerber and ODB++ formats."},features:{title:"Key Features",body:"Gerber View, ODB++ View"},mcp:{title:"MCP Integration",body:"Control the viewer from MCP clients like Claude Code.",link:"Learn more "},privacy:{title:"Privacy",body:"All file processing is performed locally in your browser. No data is transmitted to any external server.",mcpNote:"Note: When using MCP integration, viewer data may be sent to LLM services."},disclaimer:{title:"Disclaimer",body:'This software is provided "as is" without warranty of any kind, express or implied. The authors shall not be liable for any direct, indirect, incidental, special, or consequential damages arising from the use of this software.'},purpose:{title:"Purpose",body:"Created for personal EDA technology learning and review."},footer:" 2025 Coco Viewer. All rights reserved."},sidebar:{title:"Layers",openImportMenu:"Open import menu",sampleManualLayer:"Manual Layer 1",emptyTitle:"No layers yet",emptyHint:"Use the import menu, sidebar +, or drag & drop to add files (ODB++ requires folder selection)",searchPlaceholder:"Search layers...",showAll:"Show All",hideAll:"Hide All"},layers:{changeColor:"Change layer color",toggleVisibility:"Toggle layer visibility",remove:"Remove layer",parseFailed:"Layer failed to parse",noShapes:"No shapes to render."},canvas:{aria:"Gerber Viewer canvas"},overlay:{title:"Layer Viewer",text:"Load Gerber files or an ODB++ folder to inspect layers.",welcomeTitle:"Welcome to Coco Viewer",welcomePrivacy:"All processing happens locally.",welcomePrivacyNote:"No data uploaded (except AI - MCP)"},status:{ready:"Ready",coords:"X: {x}, Y: {y}",grid:{off:"Grid: off",unknown:"Grid: ",value:"Grid: {value} mm",toggle:"Toggle grid"},file:{unzip:"Extracting {filename}...",noSupportedLayer:"No supported layer files found in {filename}.",entryLoadError:"Error while loading {filename}.",unzipFailed:"Failed to open {filename} archive."},odb:{loading:"Loading ODB++ folder...",invalidFolder:"Not an ODB++ folder. Check for matrix/matrix or steps/layers structure.",readFailed:"Failed to read ODB++ {job}: {error}",loadFailed:"Failed to load ODB++ {job}: {error}",noLayers:"No ODB++ layers found to load.",summary:"Added {parsed}/{total} layers from ODB++ {job}"},layer:{loading:"Loading {name}...",loaded:"Loaded {name}",loadError:"Error loading {name}"},scene:{saveNoActiveLayer:"Scene save failed: no active layer.",saveNoView:"Scene save failed: unable to capture view state.",saveSuccess:"Scene saved: {title}",saveStorageError:"Scene save failed: storage error.",documentExported:"Scene document exported: {title}",documentBatchExported:"Exported {count} documents: {filename}",updateSuccess:"Scene updated.",deleteSuccess:"Scene deleted.",deleteStorageError:"Scene delete failed: storage error.",replaceSuccess:"Replaced scene list.",replaceStorageError:"Replace failed: storage error.",importSuccess:"Scenes imported.",importStorageError:"Import failed: storage error.",copySuccess:"Copied to clipboard.",copyTextOnly:"Copied note only (no thumbnail).",copyFallbackText:"Clipboard blocked; copied note only.",copyNoData:"No note to copy.",copyUnavailable:"Clipboard copy is not available.",copyFailed:"Clipboard copy failed: {error}",layerMissing:"Layer not found: {layer}"},mcp:{connected:"MCP connected"}},mcp:{labelDisabled:"MCP (disabled)",titleDisabled:"MCP disabled. Click to enable.",titleConnected:"MCP connected. Click to disable.",titleActive:"MCP connected (this tab is active).",titleInactive:"MCP connected (this tab is inactive).",titleDisconnected:"MCP disconnected. Click to reconnect.",titleDisconnect:"Disconnect MCP"},rightPanel:{tabs:{nets:"Nets",components:"Components",highlights:"Highlights",selection:"Selection",measure:"Measure"},highlights:{title:"Net/Component Highlights",fitTitle:"Zoom to highlighted area",fit:"Zoom Fit",clearTitle:"Clear selected Net/Component highlights",clear:"Clear",removeTitle:"Remove highlight",autoFit:"Auto Fit",autoLayer:"Auto Layer",autoLayerTrace:"TRC only",dimUnhighlighted:"Dim non-highlighted",empty:"No highlights selected"},nets:{searchPlaceholder:"Search nets...",empty:"No nets available",noMatch:"No matching nets",selectAll:"Select All",deselectAll:"Deselect All"},components:{searchPlaceholder:"Search components...",empty:"No components available",noMatch:"No matching components",selectAll:"Select All",deselectAll:"Deselect All"},selection:{filterNet:"Net",filterComponent:"Component",fitTitle:"Zoom to selection",fit:"Zoom Fit",clearTitle:"Clear selection",clear:"Clear",autoFit:"Auto Fit",pickedItems:"Picked Items",addToHighlights:"Highlight",addedToHighlights:"Highlighted",empty:"No selection",infoTitle:"Selection Info",badges:{net:"NET",comp:"COMP",feature:"FEATURE"},table:{layer:"Layer",feature:"Feature",type:"Type",net:"Net",subnet:"SubNet",component:"Component",pinToe:"Pin/Toe",featureType:"Feature Type",size:"Size"}},measure:{mode:"Measure Mode",includeWidth:"Include width",clear:"Clear",datasetRequired:"ODB++ dataset required",pickTwo:"Click two features to measure",enableHint:"Enable measure mode to pick two features",shortcut:"Shortcut: M",targets:"Targets",targetA:"A",targetB:"B",targetAEmpty:"Target A empty",targetBEmpty:"Target B empty",result:"Result",relation:"Relation",distance:"Distance",outline:"Outline",empty:"No measurement yet"}},scene:{panelEyebrow:"Scene Notes",panelTitle:"Scene Snapshots",save:"Save Scene",import:"Import",exportMenu:"Export",exportMenuAria:"Export menu",exportSelected:"Export Selected",exportAll:"Export All",exportDocumentSelected:"Export Documents (Selected)",exportDocumentAll:"Export Documents (All)",deleteSelected:"Delete Selected",compactToggle:"Toggle panel width",compactCollapse:"Narrow view",compactExpand:"Wide view",autoApply:"Apply on click",close:"Close Scene Notes",listTitle:"Scenes",selectedCount:"Selected {count}",selectAll:"Select all",clearSelection:"Clear selection",searchPlaceholder:"Search or filter tags",emptyList:"No saved scenes.",emptyDetailTitle:"Select a scene",emptyDetailHint:"Save the current view and add notes.",labelTitle:"Title",labelTags:"Tags",titlePlaceholder:"Scene title",tagsPlaceholder:"Tags (comma separated)",createdAt:"Created: {date}",updatedAt:"Updated: {date}",apply:"Apply",applyInline:"Apply",noteEdit:"Edit",notePreview:"Preview",notePlaceholder:"Markdown note",copy:"Copy to clipboard",exportDocument:"Export Document",update:"Save",delete:"Delete",thumbnailFallback:"VIEW",thumbnailAlt:'"{title}" thumbnail',untitled:"Untitled",fallbackTitle:"Scene {timestamp}",selectAria:"Select",confirmDelete:'Delete "{title}"?',confirmDeleteSelected:"Delete {count} selected scenes?",confirmIncludeThumbnail:"Include thumbnails in export?",confirmReplaceAll:"Replace all existing scenes with the imported list?",confirmOverwrite:"Scenes with the same ID exist. Overwrite? Cancel will create new IDs.",exportModal:{title:"Export Thumbnails",description:"High-res recaptures the view and may take longer.",include:"Include (standard)",exclude:"Exclude",highRes:"Include high-res"},documentExportModal:{title:"Document Thumbnail Quality",description:"High-res captures the current view again and may increase the document size.",default:"Standard (smaller)",highRes:"Include high-res",cancel:"Cancel",confirmHighRes:"Include a high-resolution thumbnail in the document?"},document:{title:"Scene Document",summary:"CAD View Details",visual:"CAD View",layersHighlights:"Layers & Highlights",notes:"Notes",exportedAt:"Exported At",createdAt:"Created At",updatedAt:"Updated At",tags:"Tags",emptyTags:"No tags",viewBox:"View box",layers:"Active layers",highlights:"Highlights",otherHighlights:"Other",highlightIncluded:"Highlights included",highlightDim:"Dim non-highlighted",viewport:"Viewport",camera:"Camera",emptyThumbnail:"No snapshot image available.",emptyNotes:"No notes available.",emptyLayers:"No active layers.",emptyHighlights:"No highlights.",emptyViewBox:"No view box data.",yes:"Yes",no:"No"},documentIndex:{title:"Document Index",subtitle:"Exported {date}  {count} items",searchPlaceholder:"Search by title or tags",openDocument:"Open document",empty:"No documents available."},alertImportInvalid:"Failed to read scene file.",alertImportNoData:"No valid scene data.",alertExportNoSelection:"No scenes selected.",alertDeleteNoSelection:"No scenes selected.",modal:{title:"Save Scene",labelTitle:"Title",labelTags:"Tags",tagsPlaceholder:"e.g., DFM, critical",includeLayers:"Include visible layers",includeHighlights:"Include highlights",includeThumbnail:"Save thumbnail",cancel:"Cancel",confirm:"Save"}},userSymbols:{eyebrow:"ODB++",title:"User Symbols",close:"Close User Symbols",jobMissing:"ODB++ not loaded",count:"Symbols {count}",statusIdle:"Load ODB++ in the main panel to sync automatically.",statusSyncing:"Syncing user symbols...",statusNoFiles:"No ODB++ files loaded.",statusLoaded:"{job} loaded",statusLoadError:"Failed to load user symbols: {error}",statusRenderStart:"Rendering {name}...",statusRenderDone:"Rendered {name}",statusRenderFail:"Failed to render {name}: {error}",listEmpty:"No user symbols.",listPrompt:"Load ODB++ in the main panel.",canvasTitle:"Canvas"},playground:{title:"Shape Viewer Playground",subtitle:"PGeom/Gerber Layer inspector + Standard Symbol previewer",tabLayers:"Layers Viewer",tabSymbols:"Symbol Viewer"},layersView:{title:"Layers Viewer",statusLoadingWasm:"Loading WASM",statusWasmReady:"WASM ready",statusWasmFailed:"Failed to initialise WASM",legendLayers:"Layers",addPgeom:"Add PGeom",addGerber:"Add Gerber",addManual:"Add From Input",legendManual:"Manual PGeom Input",resetView:"Reset View",legendRenderer:"Renderer",rendererCanvas:"Canvas",rendererWebgl:"WebGL",rendererWebgpu:"WebGPU",instancingOn:"Instancing: On",instancingOff:"Instancing: Off",workerOn:"Worker: On",workerOff:"Worker: Off",workerUnavailable:"Worker: Unavailable",gridHide:"Hide Grid",gridShow:"Show Grid",gridUnavailable:"Grid Unavailable",gridOff:"Grid: off",gridAuto:"auto",gridValue:"Grid: {value}",gridUnavailableDetail:"Grid: n/a (WebGL/WebGPU)",legendDetails:"Details",detailRaw:"Raw Input",detailScene:"Scene JSON",detailEmpty:"Select a layer to inspect its raw input or scene JSON.",detailError:"Error: {message}",detailPending:"Scene JSON will be available once parsing completes.",manualLayerPrefix:"Manual Layer {index}"},symbolsView:{title:"Standard Symbol Viewer",statusLoadingWasm:"Loading WASM",statusWasmReady:"WASM ready",statusWasmFailed:"Failed to initialise WASM",legendInputs:"Inputs",labelSymbol:"Symbol",placeholderSymbol:"e.g. rect100x50xr10",labelSymbolUnit:"Symbol unit",symbolUnitMicron:"Micron (default)",symbolUnitMil:"Mil (imperial)",labelProductUnit:"Product unit",productUnitMm:"Millimeter",productUnitInch:"Inch",renderButton:"Render Symbol",resetButton:"Reset View",quickExamples:"Quick Examples:",legendCanvas:"Canvas",gridOff:"Grid: off",gridHide:"Hide Grid",gridShow:"Show Grid",gridAuto:"auto",gridValue:"Grid: {value}",exportPng:"Save PNG",legendScene:"Scene JSON",sceneAwaiting:"Awaiting render",statusEnterSymbol:"Enter a symbol name (e.g. r200, rect120x60xr10).",statusRendering:"Rendering symbol",statusNoGeometry:"Symbol returned no geometry.",statusRendered:"Rendered {name} ({count} shape{plural}).",statusFailedRender:"Failed to render symbol.",statusSavingPng:"Saving canvas as PNG",statusSavedPng:"Saved PNG ({filename}).",statusFailedSave:"Failed to save PNG.",examples:{round:"Round",square:"Square",rectangle:"Rectangle",oval:"Oval",roundedRect:"Rounded Rect",chamferedRect:"Chamfered Rect",halfOval:"Half Oval",octagon:"Octagon",triangle:"Triangle",diamond:"Diamond",hexHorizontal:"Hex (Horizontal)",hexVertical:"Hex (Vertical)",donutRound:"Donut (Round)",donutSquare:"Donut (Square)",thermalRound:"Round Thermal",thermalSquare:"Square Thermal",thermalOval:"Oval Thermal"}}}},L_="ko",O_="coco-viewer-lang";let Ks=xw();const pd=new Set,yw={ko:"ko-KR",en:"en-US"};function xw(){const e=typeof localStorage<"u"?localStorage.getItem(O_):null;return e==="ko"||e==="en"?e:L_}function zg(e,t){const n=t.split(".");let a=_w[e];for(const r of n){if(!a||typeof a!="object")return null;a=a[r]}return typeof a=="string"?a:null}function vw(e,t){return t?e.replace(/\{(\w+)\}/g,(n,a)=>{const r=t[a];return r==null?n:String(r)}):e}function C(e,t){const n=zg(Ks,e),a=zg(L_,e);return vw(n??a??e,t)}function j_(){return Ks}function Tf(e=Ks){return yw[e]}function ww(e){e!==Ks&&(Ks=e,typeof localStorage<"u"&&localStorage.setItem(O_,e),pd.forEach(t=>t(e)))}function fo(e){return pd.add(e),()=>pd.delete(e)}function Sw({isDark:e=!0,onToggleTheme:t,onOpenGerberFiles:n,onOpenOdbFolder:a,onOpenCadenceFolder:r,isScenePanelOpen:l=!1,onToggleScenePanel:s,importMode:o="replace",onImportModeChange:i,renderer:d="canvas",supportsWebgpu:p=!1,onRendererChange:g,webgpuWorkerEnabled:m=!1,supportsWebgpuWorker:x=!1,onToggleWebgpuWorker:L,skipDocumentLayersEnabled:k=!1,onToggleSkipDocumentLayers:U,webgpuRenderPerfModeEnabled:b=!1,onToggleWebgpuRenderPerfMode:_}){const[v,S]=h.useState(!1),[N,z]=h.useState(!1),[R,K]=h.useState(!1),[F,P]=h.useState(j_()),re=h.useRef(null),se=h.useRef(null),Ce=h.useRef(null),Ge="/coco-viewer-pages/coco-icon.png";h.useEffect(()=>{const vt=Re=>{const ee=Re.target;v&&re.current&&!re.current.contains(ee)&&S(!1),N&&se.current&&!se.current.contains(ee)&&z(!1),R&&Ce.current&&!Ce.current.contains(ee)&&K(!1)},ft=Re=>{Re.key==="Escape"&&(S(!1),z(!1),K(!1))};return document.addEventListener("mousedown",vt),document.addEventListener("keydown",ft),()=>{document.removeEventListener("mousedown",vt),document.removeEventListener("keydown",ft)}},[v,N,R]),h.useEffect(()=>{const vt=fo(ft=>{P(ft)});return()=>{vt()}},[]),h.useEffect(()=>{document.documentElement.lang=Tf(F)},[F]);const Se=()=>{ww(F==="ko"?"en":"ko")},Y=d==="webgpu",ne=C(p?"settings.gpuDescription":"settings.gpuUnsupported"),oe=C(x?Y?"settings.workerDescription":"settings.workerRequiresGpu":"settings.workerUnsupported"),he=Y&&m,Le=!x||!Y||!L,Ke=!p||!g,Pe=!U,et=!_,je=C(Y?"settings.renderPerfDescription":"settings.renderPerfRequiresGpu"),Ae=()=>{p&&(g==null||g(Y?"canvas":"webgpu"))},Je=()=>{!x||!Y||L==null||L()},jt=()=>{U==null||U()},xt=()=>{_==null||_()};return c.jsxs("header",{className:"relative z-40 overflow-visible border-b border-border-default bg-white/85 dark:bg-surface-900/70 backdrop-blur-xl shadow-[0_10px_24px_rgba(15,23,42,0.08)]",children:[c.jsx("div",{className:"absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-primary-400/40 via-transparent to-primary-300/30"}),c.jsxs("div",{className:"flex items-center justify-between pl-5 pr-7 py-2.5",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:Ge,alt:"Coco",className:"h-9 w-9 rounded-xl"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-[15px] font-semibold text-text-primary tracking-tight",children:C("header.logo")}),c.jsx("p",{className:"text-[11px] tracking-wide text-text-muted",children:C("header.logoSubtext")})]})]}),c.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2",ref:se,children:[c.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 rounded-full bg-primary-500 text-white text-sm font-semibold shadow-[0_8px_18px_rgba(6,182,212,0.28)] hover:bg-primary-400 transition-colors",onClick:()=>z(vt=>!vt),"aria-haspopup":"menu","aria-expanded":N,"aria-label":C("header.importMenuAria"),children:[c.jsx("span",{className:"text-lg leading-none",children:"+"}),C("header.import"),c.jsx(D_,{className:`w-4 h-4 transition-transform ${N?"rotate-180":""}`})]}),N&&c.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 min-w-[280px] rounded-xl border border-slate-200/80 bg-white/98 text-slate-700 shadow-[0_20px_40px_rgba(15,23,42,0.15)] backdrop-blur-xl z-[100] dark:border-primary-400/20 dark:bg-surface-900/95 dark:text-slate-200 overflow-hidden",role:"menu",children:[c.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 transition-colors hover:bg-slate-100 dark:hover:bg-surface-800/80",children:[c.jsxs("button",{type:"button",className:"flex-1 text-left hover:text-slate-900 dark:hover:text-slate-100 transition-colors",onClick:()=>{z(!1),n==null||n()},role:"menuitem",children:[c.jsx("div",{className:"text-[15px] font-bold text-slate-800 dark:text-slate-100",children:C("menu.openGerber")}),c.jsx("div",{className:"text-[13px] text-slate-500 dark:text-slate-400 mt-0.5",children:C("menu.openGerberHint")})]}),c.jsxs("div",{className:"inline-flex items-center rounded-md border border-slate-200/80 bg-white/80 p-0.5 shadow-[inset_0_1px_0_rgba(255,255,255,0.8)] dark:bg-surface-800/70 dark:border-primary-400/20",title:C("menu.importModeHint"),"aria-label":C("menu.importModeLabel"),children:[c.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-[6px] text-xs font-semibold transition-colors ${o==="append"?"bg-primary-500 text-white shadow-[0_4px_10px_rgba(6,182,212,0.2)]":"text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100"}`,onClick:()=>i==null?void 0:i("append"),"aria-pressed":o==="append","aria-label":`${C("menu.importModeLabel")} - ${C("menu.importModeAppend")}`,children:C("menu.importModeAppend")}),c.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-[6px] text-xs font-semibold transition-colors ${o==="replace"?"bg-primary-500 text-white shadow-[0_4px_10px_rgba(6,182,212,0.2)]":"text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100"}`,onClick:()=>i==null?void 0:i("replace"),"aria-pressed":o==="replace","aria-label":`${C("menu.importModeLabel")} - ${C("menu.importModeReplace")}`,children:C("menu.importModeReplace")})]})]}),c.jsx("div",{className:"h-px bg-slate-200 dark:bg-primary-400/15"}),c.jsxs("button",{type:"button",className:"w-full px-5 py-4 text-left hover:bg-slate-100 dark:hover:bg-surface-800/80 transition-colors",onClick:()=>{z(!1),a==null||a()},role:"menuitem",children:[c.jsx("div",{className:"text-[15px] font-bold text-slate-800 dark:text-slate-100",children:C("menu.openOdb")}),c.jsx("div",{className:"text-[13px] text-slate-500 dark:text-slate-400 mt-0.5",children:C("menu.openOdbHint")})]}),c.jsx("div",{className:"h-px bg-slate-200 dark:bg-primary-400/15"}),c.jsxs("button",{type:"button",className:"w-full px-5 py-4 text-left hover:bg-slate-100 dark:hover:bg-surface-800/80 transition-colors",onClick:()=>{z(!1),r==null||r()},role:"menuitem",children:[c.jsx("div",{className:"text-[15px] font-bold text-slate-800 dark:text-slate-100",children:C("menu.openCadence")}),c.jsx("div",{className:"text-[13px] text-slate-500 dark:text-slate-400 mt-0.5",children:C("menu.openCadenceHint")})]}),c.jsx("div",{className:"px-5 py-3 border-t border-slate-200 dark:border-primary-400/15 text-[11px] text-slate-400 dark:text-slate-500",children:C("menu.privacyNotice")})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{type:"button",className:`flex items-center gap-2 px-4 py-2 rounded-xl border text-sm font-semibold transition-colors shadow-[0_6px_14px_rgba(15,23,42,0.08)] ${l?"border-primary-300 bg-primary-50 text-primary-600 dark:bg-primary-500/15 dark:text-primary-200":"border-border-default bg-white/80 dark:bg-surface-800/70 text-text-secondary hover:text-text-primary hover:border-border-strong"}`,onClick:()=>s==null?void 0:s(),title:C("header.sceneNotesTitle"),"aria-label":C("header.sceneNotesTitle"),"aria-pressed":l,children:[c.jsx(hw,{className:"w-4 h-4"}),c.jsx("span",{children:C("header.sceneNotes")})]}),c.jsx("button",{className:"p-2 rounded-full border border-border-default bg-white/70 dark:bg-surface-800/70 text-slate-700 dark:text-slate-100 hover:text-slate-900 dark:hover:text-white transition-colors",onClick:t,title:e?"Switch to Light Mode":"Switch to Dark Mode","aria-label":"Toggle theme",children:e?c.jsx(mw,{className:"w-5 h-5"}):c.jsx(ow,{className:"w-5 h-5"})}),c.jsx("button",{type:"button",className:"px-2.5 py-1.5 rounded-full border border-border-default bg-white/70 dark:bg-surface-800/70 text-[11px] font-semibold text-text-secondary hover:text-text-primary transition-colors",onClick:Se,"aria-label":C("lang.toggleAria"),children:C("lang.toggleLabel")}),c.jsxs("div",{className:"relative",ref:Ce,children:[c.jsx("button",{type:"button",className:"p-2 rounded-full border border-border-default bg-white/70 dark:bg-surface-800/70 text-slate-700 dark:text-slate-100 hover:text-slate-900 dark:hover:text-white transition-colors",onClick:()=>K(vt=>!vt),title:C("header.settings"),"aria-label":C("header.settingsAria"),"aria-haspopup":"dialog","aria-expanded":R,children:c.jsx(dw,{className:"w-5 h-5"})}),R&&c.jsx("div",{className:"absolute right-0 top-full mt-2 w-[320px] rounded-xl border border-slate-200/80 bg-white/98 text-slate-700 shadow-[0_20px_40px_rgba(15,23,42,0.15)] backdrop-blur-xl z-[100] dark:border-primary-400/20 dark:bg-surface-900/95 dark:text-slate-200 overflow-hidden",role:"dialog","aria-label":C("header.settingsAria"),children:c.jsxs("div",{className:"px-5 py-4",children:[c.jsx("div",{className:"text-[13px] font-semibold text-slate-800 dark:text-slate-100",children:C("settings.title")}),c.jsxs("div",{className:"mt-3 space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[13px] font-semibold text-slate-700 dark:text-slate-100",children:C("settings.gpuLabel")}),c.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-1",children:ne})]}),c.jsx("button",{type:"button",role:"switch","aria-checked":Y,"aria-label":C("settings.gpuLabel"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Y?"bg-primary-500":"bg-slate-300/80 dark:bg-surface-600/70"} ${Ke?"opacity-50 cursor-not-allowed":"hover:brightness-95"}`,onClick:Ae,disabled:Ke,children:c.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${Y?"translate-x-5":"translate-x-1"}`})})]}),c.jsx("div",{className:"h-px bg-slate-200 dark:bg-primary-400/15"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[13px] font-semibold text-slate-700 dark:text-slate-100",children:C("settings.workerLabel")}),c.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-1",children:oe})]}),c.jsx("button",{type:"button",role:"switch","aria-checked":he,"aria-label":C("settings.workerLabel"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${he?"bg-primary-500":"bg-slate-300/80 dark:bg-surface-600/70"} ${Le?"opacity-50 cursor-not-allowed":"hover:brightness-95"}`,onClick:Je,disabled:Le,children:c.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${he?"translate-x-5":"translate-x-1"}`})})]}),c.jsx("div",{className:"h-px bg-slate-200 dark:bg-primary-400/15"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[13px] font-semibold text-slate-700 dark:text-slate-100",children:C("settings.skipDocumentLabel")}),c.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-1",children:C("settings.skipDocumentDescription")})]}),c.jsx("button",{type:"button",role:"switch","aria-checked":k,"aria-label":C("settings.skipDocumentLabel"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${k?"bg-primary-500":"bg-slate-300/80 dark:bg-surface-600/70"} ${Pe?"opacity-50 cursor-not-allowed":"hover:brightness-95"}`,onClick:jt,disabled:Pe,children:c.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${k?"translate-x-5":"translate-x-1"}`})})]}),c.jsx("div",{className:"h-px bg-slate-200 dark:bg-primary-400/15"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[13px] font-semibold text-slate-700 dark:text-slate-100",children:C("settings.renderPerfLabel")}),c.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-1",children:je})]}),c.jsx("button",{type:"button",role:"switch","aria-checked":b,"aria-label":C("settings.renderPerfLabel"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b?"bg-primary-500":"bg-slate-300/80 dark:bg-surface-600/70"} ${et?"opacity-50 cursor-not-allowed":"hover:brightness-95"}`,onClick:xt,disabled:et,children:c.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${b?"translate-x-5":"translate-x-1"}`})})]})]})]})})]}),c.jsxs("div",{className:"relative",ref:re,children:[c.jsx("button",{type:"button",className:"p-2 rounded-full border border-border-default bg-white/70 dark:bg-surface-800/70 text-slate-700 dark:text-slate-100 hover:text-slate-900 dark:hover:text-white transition-colors",onClick:()=>S(vt=>!vt),title:C("header.info"),"aria-label":C("header.infoAria"),"aria-haspopup":"dialog","aria-expanded":v,children:c.jsx(lw,{className:"w-5 h-5"})}),v&&c.jsxs("div",{className:"fixed top-14 right-4 min-w-[280px] max-w-[360px] max-h-[70vh] overflow-hidden rounded-xl border border-slate-200/80 bg-white/98 text-slate-700 shadow-[0_20px_40px_rgba(15,23,42,0.15)] backdrop-blur-xl z-[100] dark:border-primary-400/20 dark:bg-surface-900/95 dark:text-slate-200",role:"dialog","aria-label":C("header.infoAria"),children:[c.jsx("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:c.jsx("div",{className:"text-[15px] font-bold text-slate-800 dark:text-slate-100",children:C("infoPanel.title")})}),c.jsx("div",{className:"px-6 pb-3 text-[11px] text-slate-400 dark:text-slate-500",children:C("infoPanel.version")}),c.jsxs("div",{className:"px-6 pb-6 space-y-3 text-[13px] leading-relaxed text-slate-600 dark:text-slate-300/90 overflow-y-auto max-h-[55vh]",children:[c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.about.title")}),c.jsx("p",{children:C("infoPanel.about.body")})]}),c.jsx("div",{className:"h-px w-full bg-slate-200 dark:bg-primary-400/15 my-0.5",role:"presentation"}),c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.features.title")}),c.jsx("p",{children:C("infoPanel.features.body")})]}),c.jsx("div",{className:"h-px w-full bg-slate-200 dark:bg-primary-400/15 my-0.5",role:"presentation"}),c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.mcp.title")}),c.jsx("p",{children:C("infoPanel.mcp.body")}),c.jsx("div",{className:"mt-1 rounded bg-slate-100 dark:bg-black/30 px-2.5 py-2 overflow-x-auto",children:c.jsx("code",{className:"font-mono text-xs text-sky-600 dark:text-sky-300 whitespace-nowrap",children:"claude mcp add coco-viewer -- npx coco-viewer-mcp"})}),c.jsx("a",{href:"https://www.npmjs.com/package/coco-viewer-mcp",target:"_blank",rel:"noopener",className:"text-xs text-sky-600 dark:text-sky-400 hover:underline",children:C("infoPanel.mcp.link")})]}),c.jsx("div",{className:"h-px w-full bg-slate-200 dark:bg-primary-400/15 my-0.5",role:"presentation"}),c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.privacy.title")}),c.jsx("p",{children:C("infoPanel.privacy.body")}),c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400/90",children:C("infoPanel.privacy.mcpNote")})]}),c.jsx("div",{className:"h-px w-full bg-slate-200 dark:bg-primary-400/15 my-0.5",role:"presentation"}),c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.disclaimer.title")}),c.jsx("p",{children:C("infoPanel.disclaimer.body")})]}),c.jsx("div",{className:"h-px w-full bg-slate-200 dark:bg-primary-400/15 my-0.5",role:"presentation"}),c.jsxs("section",{className:"flex flex-col gap-1.5",children:[c.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200/95",children:C("infoPanel.purpose.title")}),c.jsx("p",{children:C("infoPanel.purpose.body")})]})]}),c.jsx("div",{className:"px-5 py-3 border-t border-slate-200 dark:border-primary-400/15 text-[11px] text-slate-400 dark:text-slate-500 text-center",children:C("infoPanel.footer")})]})]})]})]})]})}function Cw(e){switch(e){case"gerber":return"GBR";case"excellon":return"DRL";case"pgeom":return"PGE";case"odb":return"ODB";case"cadence":return"CDN";default:return e}}function Ew({layer:e,isVisible:t,isSelected:n,onToggleVisibility:a,onSelect:r,onColorChange:l}){return c.jsxs("div",{className:`
                flex items-center gap-2 px-3 py-2 rounded-xl cursor-pointer
                border transition-all duration-150
                ${n?"bg-primary-100/70 dark:bg-primary-500/15 border-primary-300/70 shadow-[0_8px_18px_rgba(6,182,212,0.18)]":"bg-white/60 dark:bg-surface-700/50 border-transparent hover:bg-white/85 dark:hover:bg-surface-700/70 hover:border-border-default"}
            `,onClick:r,children:[c.jsx("button",{className:`
                    w-5 h-5 flex items-center justify-center rounded
                    transition-colors
                    ${t?"text-accent-emerald":"text-text-muted hover:text-text-secondary"}
                `,onClick:s=>{s.stopPropagation(),a()},children:t?c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}):c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})})}),c.jsx("div",{className:`w-2 h-2 rounded-full ${e.status==="parsed"?"bg-accent-emerald":e.status==="error"?"bg-accent-rose":"bg-accent-amber animate-pulse"}`}),c.jsx("span",{className:"px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em] bg-surface-200/70 dark:bg-surface-600/70 text-text-muted rounded-full",children:Cw(e.kind)}),c.jsx("span",{className:"flex-1 text-xs text-text-primary truncate",title:e.name,children:e.name}),e.status==="error"&&c.jsx("span",{className:"text-accent-rose text-xs",title:e.errorMessage,children:"!"}),c.jsx("input",{type:"color",value:e.color||"#8ab4ff",className:"w-5 h-5 rounded cursor-pointer border border-border-default bg-transparent",onClick:s=>s.stopPropagation(),onChange:s=>l(s.target.value)})]})}function Mw({layers:e,visibleLayerIds:t,selectedLayerId:n,onToggleVisibility:a,onSelectLayer:r,onRemoveLayer:l,onColorChange:s}){return e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-text-muted border border-dashed border-border-default/80 rounded-2xl bg-white/60 dark:bg-surface-800/40 p-6",children:[c.jsx("svg",{className:"w-12 h-12 mb-4 opacity-40",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),c.jsx("p",{className:"text-xs font-semibold text-text-primary",children:"No layers loaded"}),c.jsx("p",{className:"text-xs mt-1 text-text-muted",children:"Drag & drop files or use Open Files"})]}):c.jsx("div",{className:"flex flex-col gap-1",children:e.map(o=>c.jsx(Ew,{layer:o,isVisible:t.has(o.id),isSelected:n===o.id,onToggleVisibility:()=>a(o.id),onSelect:()=>r(o.id),onColorChange:i=>s(o.id,i)},o.id))})}function Nw({layers:e,visibleLayerIds:t,selectedLayerId:n,onToggleVisibility:a,onSelectLayer:r,onRemoveLayer:l,onColorChange:s,onShowAll:o,onHideAll:i,width:d}){const[p,g]=h.useState(""),m=e.filter(L=>t.has(L.id)).length,x=h.useMemo(()=>{if(!p.trim())return e;const L=p.toLowerCase();return e.filter(k=>k.name.toLowerCase().includes(L))},[e,p]);return c.jsxs("aside",{className:"w-72 flex-shrink-0 bg-white/75 dark:bg-surface-800/80 backdrop-blur-xl border-r border-border-default/80 shadow-[0_12px_30px_rgba(15,23,42,0.08)] flex flex-col transition-colors",style:d?{width:d}:void 0,children:[c.jsxs("div",{className:"px-4 py-2.5 border-b border-border-default/80",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h2",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-text-muted",children:"Layers"}),c.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold bg-primary-100/80 dark:bg-primary-500/20 text-primary-700 dark:text-primary-200 rounded-full",children:[m,"/",e.length]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(cw,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted"}),c.jsx("input",{type:"text",placeholder:C("sidebar.searchPlaceholder"),value:p,onChange:L=>g(L.target.value),className:"w-full pl-8 pr-3 py-1.5 text-xs bg-white/70 dark:bg-surface-700/50 border border-border-default/80 rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:ring-1 focus:ring-primary-400/50 focus:border-primary-400/50"})]}),x.length>0&&(o||i)&&c.jsxs("div",{className:"flex gap-2 mt-2",children:[o&&c.jsx("button",{onClick:o,className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("sidebar.showAll")}),i&&c.jsx("button",{onClick:i,className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("sidebar.hideAll")})]})]}),c.jsx("div",{className:"flex-1 overflow-auto p-3",children:c.jsx(Mw,{layers:x,visibleLayerIds:t,selectedLayerId:n,onToggleVisibility:a,onSelectLayer:r,onRemoveLayer:l,onColorChange:s})})]})}function Aw({isLoading:e=!1,loadingMessage:t="Loading...",isEmpty:n=!0}){const[,a]=h.useState(0),r="/coco-viewer-pages/coco-icon.png";return h.useEffect(()=>{const l=fo(()=>{a(s=>s+1)});return()=>{l()}},[]),e?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 dark:bg-surface-900/80 backdrop-blur-sm z-10",children:c.jsxs("div",{className:"text-center rounded-2xl border border-border-default/70 bg-white/80 dark:bg-surface-800/70 px-6 py-5 shadow-[0_18px_40px_rgba(15,23,42,0.12)]",children:[c.jsx("div",{className:"w-10 h-10 mx-auto mb-4 border-2 border-primary-500 dark:border-primary-400 border-t-transparent rounded-full animate-spin"}),c.jsx("p",{className:"text-sm font-medium text-text-secondary",children:t})]})}):n?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsx("div",{className:"text-center rounded-3xl border border-border-default/70 bg-surface-50 dark:bg-surface-800 backdrop-blur-xl shadow-[0_20px_50px_rgba(15,23,42,0.12)]",children:c.jsxs("div",{className:"px-12 py-10",children:[c.jsx("img",{src:r,alt:"Coco",className:"w-20 h-20 mx-auto mb-5 rounded-full"}),c.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-3 whitespace-nowrap",children:C("overlay.welcomeTitle")}),c.jsx("p",{className:"text-text-secondary leading-relaxed whitespace-nowrap",children:C("overlay.welcomePrivacy")}),c.jsx("p",{className:"text-xs text-text-muted mt-1 whitespace-nowrap",children:C("overlay.welcomePrivacyNote")})]})})}):null}function Tw({canvasRef:e,webgpuCanvasRef:t,measureOverlayRef:n,isLoading:a,isEmpty:r,isDragging:l,rendererType:s,webgpuCanvasKey:o}){const i=s==="webgpu",d=`canvas absolute inset-0 w-full h-full transition-opacity duration-150 ${i?"opacity-0 pointer-events-none":"opacity-100"}`,p=`canvas absolute inset-0 w-full h-full transition-opacity duration-150 ${i?"opacity-100":"opacity-0 pointer-events-none"}`;return c.jsx("main",{className:"flex-1 flex flex-col p-1",children:c.jsxs("div",{className:`
                flex-1 relative overflow-hidden border border-border-default/70
                bg-surface-50/80 dark:bg-surface-900/80 shadow-[inset_0_1px_0_rgba(255,255,255,0.6)]
                viewer-surface
                ${l?"ring-2 ring-primary-400 ring-inset":""}
            `,children:[c.jsx("canvas",{ref:e,id:"main-canvas",className:d,"aria-hidden":i}),c.jsx("canvas",{ref:t,id:"main-webgpu-canvas",className:p,"aria-hidden":!i},o??0),c.jsx("canvas",{ref:n,className:"absolute inset-0 w-full h-full pointer-events-none","aria-hidden":"true"}),c.jsx(Aw,{isLoading:a,loadingMessage:"Initializing WASM...",isEmpty:r&&!l}),l&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-primary-500/10 backdrop-blur-md pointer-events-none",children:c.jsxs("div",{className:"text-center rounded-2xl border border-primary-400/40 bg-white/70 dark:bg-surface-900/70 px-8 py-6 shadow-[0_20px_45px_rgba(6,182,212,0.2)]",children:[c.jsx("svg",{className:"w-14 h-14 mx-auto mb-4 text-primary-400",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}),c.jsx("p",{className:"text-base font-semibold text-primary-600 dark:text-primary-300",children:"Drop files here"})]})})]})})}let Vi=null;const bd=new Set;function R_(){bd.forEach(e=>e())}function Ug(){return Vi}function kw(e){return bd.add(e),()=>bd.delete(e)}function Dw(e){Vi=e,R_()}function Lw(){Vi!==null&&(Vi=null,R_())}function Ow(){return h.useSyncExternalStore(kw,Ug,Ug)}function jw({gridEnabled:e,gridSpacing:t,onToggleGrid:n,gridAvailable:a=!0,mcpStatus:r="disconnected",mcpEnabled:l=!1,mcpActive:s=!1,onMcpReconnect:o,onMcpDisconnect:i}){const d=Ow(),g=a?e?t!==null?(b=>{const _=b<1?4:3;return Number(b.toFixed(_)).toString()})(t):"":"Off":"N/A",m=r==="connected",x=m&&s,L=l?"MCP":C("mcp.labelDisabled"),k=C(l?m?x?"mcp.titleActive":"mcp.titleInactive":"mcp.titleDisconnected":"mcp.titleDisabled"),U=!!(i&&l&&m);return c.jsxs("footer",{className:"flex items-center gap-4 px-6 py-3 bg-white/75 dark:bg-surface-800/80 border-t border-border-default/80 backdrop-blur-xl shadow-[0_-12px_30px_rgba(15,23,42,0.08)]",children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono text-text-muted",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-[0.28em] text-text-muted/80",children:"Cursor"}),c.jsxs("span",{className:"text-text-primary",children:["X: ",(d==null?void 0:d.worldX.toFixed(3))??"0.000"]}),c.jsxs("span",{className:"text-text-primary",children:["Y: ",(d==null?void 0:d.worldY.toFixed(3))??"0.000"]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"flex items-center gap-5 text-xs text-text-muted",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",className:`
                            inline-flex items-center gap-1.5 px-2.5 py-1 text-[11px] font-semibold rounded-full
                            border transition-colors cursor-pointer
                            ${x?"border-green-400/50 bg-green-500/10 text-green-600 dark:text-green-400":m?"border-blue-400/50 bg-blue-500/10 text-blue-600 dark:text-blue-400":l?"border-slate-300/60 bg-slate-200/50 text-slate-500 dark:border-slate-600/50 dark:bg-slate-700/40 dark:text-slate-400":"border-slate-200/50 bg-slate-100/40 text-slate-400 dark:border-slate-700/40 dark:bg-slate-800/30 dark:text-slate-500"}
                            hover:opacity-80
                        `,onClick:o,title:k,"aria-label":k,children:[c.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${x?"bg-green-500":m?"bg-blue-500":l?"bg-slate-400 dark:bg-slate-500":"bg-slate-300 dark:bg-slate-600"}`}),L]}),i?c.jsx("button",{type:"button",className:`
                                inline-flex items-center justify-center w-6 h-6 rounded-full border text-[12px]
                                transition-colors
                                ${U?"border-rose-400/50 bg-rose-500/10 text-rose-600 dark:text-rose-400 hover:bg-rose-500/20":"border-slate-200/60 bg-slate-100/50 text-slate-300 dark:border-slate-700/50 dark:bg-slate-800/30 dark:text-slate-600"}
                            `,onClick:U?i:void 0,title:C("mcp.titleDisconnect"),"aria-label":C("mcp.titleDisconnect"),disabled:!U,children:""}):null]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"uppercase tracking-[0.2em] text-[10px]",children:"Grid"}),c.jsx("span",{className:"font-mono text-text-primary",children:g}),c.jsx("button",{className:`
                            px-3 py-1.5 text-xs font-semibold border rounded-full transition-colors
                            ${e&&a?"bg-primary-500/10 text-primary-700 dark:text-primary-200 border-primary-400/40 hover:bg-primary-500/20":"bg-surface-200/80 dark:bg-surface-700/60 border-border-default text-text-muted hover:text-text-secondary"}
                        `,onClick:n,disabled:!a,children:a?e?"On":"Off":"N/A"})]})]})]})}function Rw({width:e,nets:t,components:n,selectedNets:a,selectedComponents:r,getHighlightColor:l,onHighlightColorChange:s,onToggleNet:o,onToggleComponent:i,onClearHighlights:d,onZoomFit:p,selectionMeta:g,selectionEntries:m,selectionInfoRows:x,selectionCount:L,onSelectionZoomFit:k,selectionAutoFit:U,onSelectionAutoFitChange:b,onClearSelection:_,measureMode:v,measureAvailable:S,measureIncludeWidth:N,onMeasureModeChange:z,onMeasureIncludeWidthChange:R,onClearMeasure:K,measureTargetA:F,measureTargetB:P,measureResult:re,measureError:se,highlightOptions:Ce,onHighlightOptionChange:Ge}){const[Se,Y]=h.useState("nets"),[ne,oe]=h.useState(""),[he,Le]=h.useState(""),[,Ke]=h.useState(0),Pe=[{id:"nets",label:C("rightPanel.tabs.nets")},{id:"components",label:C("rightPanel.tabs.components")},{id:"highlights",label:C("rightPanel.tabs.highlights")},{id:"selection",label:C("rightPanel.tabs.selection")},{id:"measure",label:C("rightPanel.tabs.measure")}];h.useEffect(()=>{const ee=fo(()=>Ke(M=>M+1));return()=>{ee()}},[]),h.useEffect(()=>{v&&Y("measure")},[v]);const et=h.useMemo(()=>{if(!ne)return t;const ee=ne.toLowerCase();return t.filter(M=>M.toLowerCase().includes(ee))},[t,ne]),je=h.useMemo(()=>{if(!he)return n;const ee=he.toLowerCase();return n.filter(M=>M.toLowerCase().includes(ee))},[n,he]),Ae=a.size+r.size,Je=L>0,jt=!!F||!!P,xt=S&&v,vt=ee=>Number.isFinite(ee)?Number(ee.toFixed(3)).toString():"-",ft=ee=>ee?ee.charAt(0).toUpperCase()+ee.slice(1):"-",Re=h.useMemo(()=>{const ee=[];return a.forEach(M=>ee.push({type:"net",name:M})),r.forEach(M=>ee.push({type:"component",name:M})),ee},[a,r]);return c.jsxs("aside",{className:"w-80 flex-shrink-0 bg-white/90 dark:bg-surface-900/95 backdrop-blur-xl border-l border-border-default dark:border-surface-700 flex flex-col transition-colors",style:e?{width:e}:void 0,children:[c.jsx("div",{className:"border-b border-border-default dark:border-surface-700",children:c.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1 px-3 py-2",children:Pe.map(ee=>c.jsxs("button",{onClick:()=>Y(ee.id),className:`
                                px-1 py-2 text-xs font-medium transition-colors relative
                                ${Se===ee.id?"text-accent-blue":"text-text-muted hover:text-text-secondary"}
                            `,children:[ee.label,Se===ee.id&&c.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent-blue"})]},ee.id))})}),c.jsxs("div",{className:"flex-1 overflow-auto",children:[Se==="nets"&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsx("input",{type:"text",value:ne,onChange:ee=>oe(ee.target.value),placeholder:C("rightPanel.nets.searchPlaceholder"),className:"w-full px-3 py-2 bg-surface-50 dark:bg-surface-800 border border-border-default dark:border-surface-600 rounded-lg text-xs text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-blue"}),et.length>0&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>et.forEach(ee=>!a.has(ee)&&o(ee)),className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("rightPanel.nets.selectAll")}),c.jsx("button",{onClick:()=>et.forEach(ee=>a.has(ee)&&o(ee)),className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("rightPanel.nets.deselectAll")})]})]}),et.length>0?c.jsx("ul",{className:"flex-1 overflow-auto px-3 pb-3 space-y-0.5",children:et.map(ee=>c.jsxs("li",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors ${a.has(ee)?"bg-accent-blue/10 dark:bg-accent-blue/20":"hover:bg-surface-100 dark:hover:bg-surface-800"}`,onClick:()=>o(ee),children:[c.jsx("input",{type:"checkbox",checked:a.has(ee),onChange:()=>o(ee),className:"rounded border-border-default dark:border-surface-600 text-accent-blue focus:ring-accent-blue",onClick:M=>M.stopPropagation()}),c.jsx("span",{className:"text-xs text-text-primary truncate",title:ee,children:ee})]},ee))}):c.jsx("div",{className:"p-4 text-center text-text-muted text-xs",children:t.length===0?C("rightPanel.nets.empty"):C("rightPanel.nets.noMatch")})]}),Se==="components"&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsx("input",{type:"text",value:he,onChange:ee=>Le(ee.target.value),placeholder:C("rightPanel.components.searchPlaceholder"),className:"w-full px-3 py-2 bg-surface-50 dark:bg-surface-800 border border-border-default dark:border-surface-600 rounded-lg text-xs text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-blue"}),je.length>0&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>je.forEach(ee=>!r.has(ee)&&i(ee)),className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("rightPanel.components.selectAll")}),c.jsx("button",{onClick:()=>je.forEach(ee=>r.has(ee)&&i(ee)),className:"flex-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 rounded transition-colors",children:C("rightPanel.components.deselectAll")})]})]}),je.length>0?c.jsx("ul",{className:"flex-1 overflow-auto px-3 pb-3 space-y-0.5",children:je.map(ee=>c.jsxs("li",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors ${r.has(ee)?"bg-cyan-500/10 dark:bg-cyan-500/20":"hover:bg-surface-100 dark:hover:bg-surface-800"}`,onClick:()=>i(ee),children:[c.jsx("input",{type:"checkbox",checked:r.has(ee),onChange:()=>i(ee),className:"rounded border-border-default dark:border-surface-600 text-cyan-500 focus:ring-cyan-500",onClick:M=>M.stopPropagation()}),c.jsx("span",{className:"text-xs text-text-primary truncate",title:ee,children:ee})]},ee))}):c.jsx("div",{className:"p-4 text-center text-text-muted text-xs",children:n.length===0?C("rightPanel.components.empty"):C("rightPanel.components.noMatch")})]}),Se==="highlights"&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-3 space-y-3 border-b border-border-default dark:border-surface-700",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-medium text-text-primary",children:C("rightPanel.highlights.title")}),c.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 text-text-muted rounded-full",children:Ae})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:p,disabled:Ae===0,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 text-text-secondary rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C("rightPanel.highlights.fit")}),c.jsx("button",{onClick:d,disabled:Ae===0,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 text-text-secondary rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C("rightPanel.highlights.clear")})]}),c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("label",{className:"flex items-center gap-2 text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ce.autoFit,onChange:ee=>Ge("autoFit",ee.target.checked),className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.highlights.autoFit")})]}),c.jsxs("label",{className:"flex items-center gap-2 text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ce.autoShowLayers,onChange:ee=>Ge("autoShowLayers",ee.target.checked),className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.highlights.autoLayer")})]}),c.jsxs("label",{className:"flex items-center gap-2 text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ce.traceOnly,onChange:ee=>Ge("traceOnly",ee.target.checked),className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.highlights.autoLayerTrace")})]}),c.jsxs("label",{className:"flex items-center gap-2 text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ce.dimNonHighlighted,onChange:ee=>Ge("dimNonHighlighted",ee.target.checked),className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.highlights.dimUnhighlighted")})]})]})]}),c.jsx("div",{className:"flex-1 overflow-auto p-3",children:Re.length>0?c.jsx("ul",{className:"space-y-1",children:Re.map(({type:ee,name:M})=>c.jsxs("li",{className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-surface-100 dark:hover:bg-surface-800 group",children:[c.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ee==="net"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400"}`,children:ee==="net"?"NET":"COMP"}),c.jsx("span",{className:"flex-1 text-xs text-text-primary truncate",title:M,children:M}),c.jsx("input",{type:"color",value:l(ee,M),onChange:X=>s(ee,M,X.target.value),className:"h-6 w-6 cursor-pointer rounded border border-border-default dark:border-surface-600 bg-transparent","aria-label":`${ee==="net"?"Net":"Component"} ${M} highlight color`}),c.jsx("button",{onClick:()=>ee==="net"?o(M):i(M),className:"opacity-0 group-hover:opacity-100 text-text-muted hover:text-text-primary transition-opacity",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`${ee}-${M}`))}):c.jsx("div",{className:"p-4 text-center text-text-muted text-xs",children:C("rightPanel.highlights.empty")})})]}),Se==="selection"&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-3 space-y-3 border-b border-border-default dark:border-surface-700",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-xs text-text-muted",children:C("rightPanel.selection.filterNet")}),c.jsx("div",{className:"text-xs text-text-primary truncate",title:(g==null?void 0:g.netName)??"",children:(g==null?void 0:g.netName)??"-"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-xs text-text-muted",children:C("rightPanel.selection.filterComponent")}),c.jsx("div",{className:"text-xs text-text-primary truncate",title:(g==null?void 0:g.componentRef)??"",children:(g==null?void 0:g.componentRef)??"-"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:k,disabled:!Je,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 text-text-secondary rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C("rightPanel.selection.fit")}),c.jsx("button",{onClick:_,disabled:!Je,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 text-text-secondary rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C("rightPanel.selection.clear")})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:U,onChange:ee=>b(ee.target.checked),className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.selection.autoFit")})]})]}),c.jsxs("div",{className:"flex-1 overflow-auto p-3 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-medium text-text-primary",children:C("rightPanel.selection.pickedItems")}),c.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 text-text-muted rounded-full",children:L})]}),m.length?c.jsx("ul",{className:"space-y-1",children:m.map(ee=>{const M=ee.type==="net",X=ee.type==="comp",A=M?a.has(ee.value):X?r.has(ee.value):!1,B=M?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":X?"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400":"bg-surface-100 dark:bg-surface-700 text-text-muted",V=C(M?"rightPanel.selection.badges.net":X?"rightPanel.selection.badges.comp":"rightPanel.selection.badges.feature");return c.jsxs("li",{className:"flex items-center gap-2 px-2 py-1.5 rounded-lg border border-border-default dark:border-surface-700 bg-surface-50 dark:bg-surface-800/60",children:[c.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${B}`,children:V}),c.jsx("span",{className:"flex-1 text-xs text-text-primary truncate",title:ee.value,children:ee.value}),M||X?c.jsx("button",{type:"button",disabled:A,onClick:()=>{A||(M&&o(ee.value),X&&i(ee.value))},className:"px-2 py-0.5 text-[10px] font-semibold rounded-full border border-border-default dark:border-surface-700 text-text-secondary hover:text-text-primary hover:border-border-strong dark:hover:border-surface-500 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:C(A?"rightPanel.selection.addedToHighlights":"rightPanel.selection.addToHighlights")}):null]},`${ee.type}-${ee.value}`)})}):c.jsx("div",{className:"py-6 text-center text-xs text-text-muted",children:C("rightPanel.selection.empty")})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-medium text-text-primary",children:C("rightPanel.selection.infoTitle")}),x.length?c.jsx("div",{className:"space-y-1.5 text-xs",children:x.map(ee=>c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx("span",{className:"text-text-muted",children:ee.label}),c.jsx("span",{className:"text-text-primary text-right truncate",title:ee.value,children:ee.value})]},ee.label))}):c.jsx("div",{className:"py-6 text-center text-xs text-text-muted",children:C("rightPanel.selection.empty")})]})]})]}),Se==="measure"&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-3 space-y-3 border-b border-border-default dark:border-surface-700",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[c.jsx("span",{children:C("rightPanel.measure.mode")}),c.jsx("button",{type:"button",role:"switch","aria-checked":v,"aria-label":C("rightPanel.measure.mode"),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${v?"bg-primary-500":"bg-surface-200 dark:bg-surface-700"} ${S?"hover:brightness-95":"opacity-50 cursor-not-allowed"}`,onClick:()=>{S&&z(!v)},disabled:!S,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform ${v?"translate-x-4":"translate-x-1"}`})})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:N,onChange:ee=>R(ee.target.checked),disabled:!xt,className:"rounded border-border-default dark:border-surface-600"}),c.jsx("span",{children:C("rightPanel.measure.includeWidth")})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{onClick:K,disabled:!jt,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-surface-100 dark:bg-surface-700 hover:bg-surface-200 dark:hover:bg-surface-600 text-text-secondary rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C("rightPanel.measure.clear")})}),c.jsx("div",{className:"text-[11px] text-text-muted",children:C(S?v?"rightPanel.measure.pickTwo":"rightPanel.measure.enableHint":"rightPanel.measure.datasetRequired")}),c.jsx("div",{className:"text-[11px] text-text-muted",children:C("rightPanel.measure.shortcut")})]}),c.jsxs("div",{className:"flex-1 overflow-auto p-3 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-medium text-text-primary",children:C("rightPanel.measure.targets")}),c.jsxs("div",{className:"space-y-2",children:[F?c.jsxs("div",{className:"flex items-start gap-2 px-2 py-2 rounded-lg border border-border-default dark:border-surface-700 bg-surface-50 dark:bg-surface-800/60",children:[c.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-semibold rounded bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:C("rightPanel.measure.targetA")}),c.jsxs("div",{className:"flex-1 text-xs",children:[c.jsx("div",{className:"text-text-primary truncate",title:F.layerName,children:F.layerName}),c.jsxs("div",{className:"text-text-muted",children:["#",F.featureIndex," / ",F.geometryKind.toUpperCase()]})]})]}):c.jsx("div",{className:"px-2 py-2 text-xs text-text-muted border border-dashed border-border-default dark:border-surface-700 rounded-lg",children:C("rightPanel.measure.targetAEmpty")}),P?c.jsxs("div",{className:"flex items-start gap-2 px-2 py-2 rounded-lg border border-border-default dark:border-surface-700 bg-surface-50 dark:bg-surface-800/60",children:[c.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-semibold rounded bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300",children:C("rightPanel.measure.targetB")}),c.jsxs("div",{className:"flex-1 text-xs",children:[c.jsx("div",{className:"text-text-primary truncate",title:P.layerName,children:P.layerName}),c.jsxs("div",{className:"text-text-muted",children:["#",P.featureIndex," / ",P.geometryKind.toUpperCase()]})]})]}):c.jsx("div",{className:"px-2 py-2 text-xs text-text-muted border border-dashed border-border-default dark:border-surface-700 rounded-lg",children:C("rightPanel.measure.targetBEmpty")})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-medium text-text-primary",children:C("rightPanel.measure.result")}),re?c.jsxs("div",{className:"space-y-1.5 text-xs",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-text-muted",children:C("rightPanel.measure.relation")}),c.jsx("span",{className:"text-text-primary",children:ft(re.relation)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-text-muted",children:C("rightPanel.measure.distance")}),c.jsx("span",{className:"text-text-primary",children:vt(re.distance)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-text-muted",children:C("rightPanel.measure.outline")}),c.jsx("span",{className:"text-text-primary",children:vt(re.outline_distance)})]})]}):c.jsx("div",{className:"py-6 text-center text-xs text-text-muted",children:C("rightPanel.measure.empty")})]}),se?c.jsx("div",{className:"text-xs text-red-500",children:se}):null]})]})]})]})}function Bw(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function ru(e){let t=Bw(e);return t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*([^*]+)\*/g,"<em>$1</em>"),t}function Hg(e){const t=e.replace(/\r\n/g,`
`).split(`
`),n=[];let a=[],r=!1;const l=()=>{a.length&&(n.push(`<p>${ru(a.join(" "))}</p>`),a=[])},s=()=>{r&&(n.push("</ul>"),r=!1)};for(const o of t){const i=o.trim();if(!i){l(),s();continue}const d=i.match(/^(#{1,3})\s+(.*)$/);if(d){l(),s();const g=d[1].length;n.push(`<h${g}>${ru(d[2])}</h${g}>`);continue}const p=i.match(/^[-*]\s+(.*)$/);if(p){l(),r||(n.push("<ul>"),r=!0),n.push(`<li>${ru(p[1])}</li>`);continue}s(),a.push(i)}return l(),s(),n.join("")}const _d="coco-viewer:scene-snapshots-updated";function zw(e,t,n=0){const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,r.rel="noopener",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>URL.revokeObjectURL(a),n)}const Uw=(()=>{const e=new Uint32Array(256);for(let t=0;t<e.length;t+=1){let n=t;for(let a=0;a<8;a+=1)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e})();function Hw(e){let t=4294967295;for(let n=0;n<e.length;n+=1)t=Uw[(t^e[n])&255]^t>>>8;return(t^4294967295)>>>0}function Iw(e){const t=Math.max(1980,e.getFullYear()),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),l=e.getMinutes(),s=Math.floor(e.getSeconds()/2),o=t-1980<<9|n<<5|a,i=r<<11|l<<5|s;return{dosDate:o,dosTime:i}}function Yw(e,t){return typeof e=="string"?t.encode(e):e}function Gw(e,t={}){const n=new TextEncoder,a=t.lastModified??new Date,{dosDate:r,dosTime:l}=Iw(a),s=2048,o=[],i=[],d=[];let p=0;e.forEach(k=>{const U=n.encode(k.name),b=Yw(k.data,n),_=b.length,v=Hw(b),S=new Uint8Array(30+U.length),N=new DataView(S.buffer);N.setUint32(0,67324752,!0),N.setUint16(4,20,!0),N.setUint16(6,s,!0),N.setUint16(8,0,!0),N.setUint16(10,l,!0),N.setUint16(12,r,!0),N.setUint32(14,v,!0),N.setUint32(18,_,!0),N.setUint32(22,_,!0),N.setUint16(26,U.length,!0),N.setUint16(28,0,!0),S.set(U,30),o.push(S,b),d.push({name:U,crc:v,size:_,offset:p}),p+=S.length+_});let g=0;d.forEach(k=>{const U=new Uint8Array(46+k.name.length),b=new DataView(U.buffer);b.setUint32(0,33639248,!0),b.setUint16(4,20,!0),b.setUint16(6,20,!0),b.setUint16(8,s,!0),b.setUint16(10,0,!0),b.setUint16(12,l,!0),b.setUint16(14,r,!0),b.setUint32(16,k.crc,!0),b.setUint32(20,k.size,!0),b.setUint32(24,k.size,!0),b.setUint16(28,k.name.length,!0),b.setUint16(30,0,!0),b.setUint16(32,0,!0),b.setUint16(34,0,!0),b.setUint16(36,0,!0),b.setUint32(38,0,!0),b.setUint32(42,k.offset,!0),U.set(k.name,46),i.push(U),g+=U.length});const m=new Uint8Array(22),x=new DataView(m.buffer);x.setUint32(0,101010256,!0),x.setUint16(4,0,!0),x.setUint16(6,0,!0),x.setUint16(8,d.length,!0),x.setUint16(10,d.length,!0),x.setUint32(12,g,!0),x.setUint32(16,p,!0),x.setUint16(20,0,!0);const L=[...o,...i,m];return new Blob(L,{type:"application/zip"})}function Ee(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Xw(e){return e.trim().replace(/[\\/:*?"<>|]+/g,"-").replace(/\s+/g,"-").trim()||"scene-document"}function Vw(e,t){const n=Xw(e),a=t.replace(/[:.]/g,"-");return`${n}-${a}`}function lu(e,t,n){return`${Vw(e,t)}${n?`-${n}`:""}.html`}function qw(e,t,n){const a=lu(e,t);if(!n.has(a))return n.add(a),a;let r=2,l=lu(e,t,String(r));for(;n.has(l);)r+=1,l=lu(e,t,String(r));return n.add(l),l}function fa(e){if(!Number.isFinite(e))return"-";const t=Math.round(e*100)/100;return Number.isInteger(t)?`${t}`:t.toFixed(2)}function $w(e,t){return t?`${fa(t.minX)}, ${fa(t.minY)}  ${fa(t.maxX)}, ${fa(t.maxY)}`:e("scene.document.emptyViewBox")}function Fw(e){const t=e??{layers:[],highlight:[]},n=t.viewBox??t.bounds,a=t.layers??[],r=t.highlight??[],l=t.highlightColors??{},s={net:[],component:[],other:[]};return r.forEach(o=>{const[i,...d]=o.split(":"),p=d.join(":").trim();if(i==="net"&&p){s.net.push(p);return}if(i==="component"&&p){s.component.push(p);return}s.other.push(o)}),{viewBox:n,layers:a,highlights:r,highlightColors:l,highlightGroups:s,highlightIncluded:t.highlightIncluded,highlightDimUnhighlighted:t.highlightDimUnhighlighted,viewport:t.viewport,camera:t.camera}}function Ww(e,t){var re,se;const{scene:n,exportedAt:a}=e,{t:r,renderMarkdown:l,normalizeThumbnail:s,formatSceneDate:o}=t,i=(re=n.title)!=null&&re.trim()?n.title:r("scene.untitled"),d=Ee(i),p=n.tags??[],g=Fw(n.viewerState),m=((se=n.note)==null?void 0:se.markdown)??"",x=m?l(m):`<p class="doc-empty">${Ee(r("scene.document.emptyNotes"))}</p>`,L=s(n.thumbnail),k=L?`<img src="${L}" alt="${Ee(r("scene.thumbnailAlt",{title:i}))}" class="doc-thumbnail" />`:`<div class="doc-empty doc-thumbnail-empty">${Ee(r("scene.document.emptyThumbnail"))}</div>`,U=g.layers.length?`<ul class="doc-chip-list">${g.layers.map(Ce=>`<li>${Ee(Ce)}</li>`).join("")}</ul>`:`<p class="doc-empty">${Ee(r("scene.document.emptyLayers"))}</p>`,b=(Ce,Ge,Se)=>{if(!Ge.length)return"";const Y=Ge.map(ne=>{const oe=Se==null?void 0:Se[ne];return`<li>${oe?`<span class="doc-swatch" style="background:${Ee(oe)}"></span>`:""}<span>${Ee(ne)}</span></li>`}).join("");return`<div class="doc-group"><h4>${Ee(Ce)}</h4><ul class="doc-list">${Y}</ul></div>`},_=[b(r("terms.net"),g.highlightGroups.net,g.highlightColors.net),b(r("terms.component"),g.highlightGroups.component,g.highlightColors.component),b(r("scene.document.otherHighlights"),g.highlightGroups.other)].filter(Boolean).join(""),v=_||`<p class="doc-empty">${Ee(r("scene.document.emptyHighlights"))}</p>`,S=g.highlightIncluded===!1?r("scene.document.no"):r("scene.document.yes"),N=g.highlightDimUnhighlighted?r("scene.document.yes"):r("scene.document.no"),z=g.viewport?`${fa(g.viewport.width)}  ${fa(g.viewport.height)}`:"-",R=g.camera,K=(R==null?void 0:R.pan)??[0,0],F=R?`zoom ${fa(R.zoom)} / pan ${fa(K[0])}, ${fa(K[1])} / rot ${fa(R.rotation)}`:"-",P=o(a);return`<!doctype html>
<html lang="${Ee(t.language)}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${d}</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Inter", "Pretendard", system-ui, -apple-system, "Segoe UI", sans-serif;
        background: #f8fafc;
        color: #0f172a;
      }
      body {
        margin: 0;
        padding: 32px 24px 48px;
      }
      .doc-container {
        max-width: 880px;
        margin: 0 auto;
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 16px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
        overflow: hidden;
      }
      .doc-header {
        padding: 28px 32px 16px;
        border-bottom: 1px solid #e2e8f0;
        background: linear-gradient(135deg, #eff6ff 0%, #f8fafc 100%);
      }
      .doc-header h1 {
        margin: 0 0 8px;
        font-size: 24px;
      }
      .doc-header-tags {
        margin: 0 0 12px;
      }
      .doc-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        font-size: 13px;
        color: #475569;
      }
      .doc-body {
        padding: 24px 32px 32px;
        display: grid;
        gap: 24px;
      }
      .doc-section {
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 16px 18px;
        background: #ffffff;
      }
      .doc-section h2 {
        margin: 0 0 12px;
        font-size: 16px;
        color: #0f172a;
      }
      .doc-section h3 {
        margin: 0 0 10px;
        font-size: 14px;
        font-weight: 600;
        color: #0f172a;
      }
      .doc-section-title {
        font-size: 16px;
        font-weight: 600;
        color: #0f172a;
      }
      .doc-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }
      .doc-thumbnail {
        width: 100%;
        height: auto;
        border-radius: 10px;
        border: 1px solid #e2e8f0;
      }
      .doc-thumbnail-empty {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 160px;
        background: #f1f5f9;
        border-radius: 10px;
        border: 1px dashed #cbd5f5;
      }
      .doc-list,
      .doc-chip-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: 6px;
      }
      .doc-chip-list {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .doc-chip-list li {
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid #cbd5f5;
        background: #eef2ff;
        font-size: 12px;
        color: #1e293b;
      }
      .doc-list li {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        color: #1e293b;
      }
      .doc-swatch {
        width: 12px;
        height: 12px;
        border-radius: 3px;
        border: 1px solid #cbd5f5;
      }
      .doc-group h4 {
        margin: 0 0 6px;
        font-size: 13px;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .doc-empty {
        margin: 0;
        font-size: 13px;
        color: #94a3b8;
      }
      .doc-summary {
        display: grid;
        gap: 8px;
        font-size: 13px;
        color: #1e293b;
      }
      .doc-summary div {
        display: flex;
        gap: 8px;
      }
      .doc-summary span:first-child {
        min-width: 120px;
        color: #64748b;
      }
      .doc-notes {
        font-size: 14px;
        line-height: 1.6;
        color: #0f172a;
      }
      .doc-notes h1,
      .doc-notes h2,
      .doc-notes h3 {
        margin-top: 0;
      }
      details summary {
        cursor: pointer;
        font-weight: 600;
        color: #0f172a;
      }
      .doc-summary-details {
        margin-top: 16px;
        padding-top: 12px;
        border-top: 1px dashed #e2e8f0;
      }
      .doc-summary-details summary {
        list-style: none;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        font-size: 13px;
        font-weight: 600;
        color: #64748b;
      }
      .doc-summary-details summary::-webkit-details-marker {
        display: none;
      }
      .doc-summary-details summary::before {
        content: "";
        width: 14px;
        height: 2px;
        background: #cbd5f5;
        border-radius: 999px;
      }
      .doc-summary-details[open] summary::before {
        background: #94a3b8;
      }
      pre {
        background: #0f172a;
        color: #e2e8f0;
        padding: 12px;
        border-radius: 8px;
        overflow: auto;
        font-size: 12px;
      }
      @media (max-width: 768px) {
        body {
          padding: 16px 12px 24px;
        }
        .doc-header,
        .doc-body {
          padding: 20px;
        }
        .doc-grid {
          grid-template-columns: 1fr;
        }
        .doc-summary span:first-child {
          min-width: 96px;
        }
      }
    </style>
  </head>
  <body>
    <div class="doc-container">
      <header class="doc-header">
        <h1>${d}</h1>
        <div class="doc-header-tags">
          ${p.length?`<ul class="doc-chip-list">${p.map(Ce=>`<li>${Ee(Ce)}</li>`).join("")}</ul>`:`<p class="doc-empty">${Ee(r("scene.document.emptyTags"))}</p>`}
        </div>
        <div class="doc-meta">
          <span>${Ee(r("scene.document.exportedAt"))}: ${Ee(P)}</span>
          <span>${Ee(r("scene.document.createdAt"))}: ${Ee(o(n.createdAt))}</span>
          <span>${Ee(r("scene.document.updatedAt"))}: ${Ee(o(n.updatedAt))}</span>
        </div>
      </header>
      <main class="doc-body">
        <section class="doc-section">
          <h2 class="doc-section-title">${Ee(r("scene.document.visual"))}</h2>
          <div>${k}</div>
          <details class="doc-summary-details">
            <summary class="doc-section-title">${Ee(r("scene.document.summary"))}</summary>
            <div class="doc-summary">
              <div><span>${Ee(r("scene.document.viewBox"))}</span><span>${Ee($w(r,g.viewBox))}</span></div>
              <div><span>${Ee(r("scene.document.highlightIncluded"))}</span><span>${Ee(S)}</span></div>
              <div><span>${Ee(r("scene.document.highlightDim"))}</span><span>${Ee(N)}</span></div>
              <div><span>${Ee(r("scene.document.viewport"))}</span><span>${Ee(z)}</span></div>
              <div><span>${Ee(r("scene.document.camera"))}</span><span>${Ee(F)}</span></div>
            </div>
          </details>
        </section>
        <section class="doc-section">
          <h2 class="doc-section-title">${Ee(r("scene.document.layersHighlights"))}</h2>
          <div class="doc-grid">
            <div>
              <h3>${Ee(r("scene.document.layers"))}</h3>
              ${U}
            </div>
            <div>
              <h3>${Ee(r("scene.document.highlights"))}</h3>
              ${v}
            </div>
          </div>
        </section>
        <section class="doc-section">
          <h2 class="doc-section-title">${Ee(r("scene.document.notes"))}</h2>
          <div class="doc-notes">${x}</div>
        </section>
      </main>
    </div>
  </body>
</html>`}function Qw(e,t){const{exportedAt:n,entries:a}=e,{t:r,normalizeThumbnail:l,formatSceneDate:s}=t,o=r("scene.documentIndex.title"),i=r("scene.documentIndex.subtitle",{date:s(n),count:a.length}),d=r("scene.documentIndex.searchPlaceholder"),p=r("scene.documentIndex.empty"),g=r("scene.documentIndex.openDocument"),m=a.map(L=>{var R;const k=(R=L.title)!=null&&R.trim()?L.title:r("scene.untitled"),U=Ee(k),b=L.tags??[],_=`${k} ${b.join(" ")}`.trim().toLowerCase(),v=l(L.thumbnail),S=v?`<img src="${v}" alt="${Ee(r("scene.thumbnailAlt",{title:k}))}" />`:`<div class="doc-index-thumb-empty">${Ee(r("scene.document.emptyThumbnail"))}</div>`,N=b.length?`<ul class="doc-chip-list">${b.map(K=>`<li>${Ee(K)}</li>`).join("")}</ul>`:`<p class="doc-empty">${Ee(r("scene.document.emptyTags"))}</p>`,z=Ee(s(L.updatedAt));return`<article class="doc-card" data-doc-item data-search="${Ee(_)}">
  <a class="doc-card-link" href="${Ee(L.filename)}" rel="noopener">
    <div class="doc-card-thumb">${S}</div>
    <div class="doc-card-body">
      <h2>${U}</h2>
      <div class="doc-card-tags">${N}</div>
      <div class="doc-card-meta">
        <span>${Ee(r("scene.document.updatedAt"))}: ${z}</span>
      </div>
      <span class="doc-card-action">${Ee(g)}</span>
    </div>
  </a>
</article>`}).join(""),x=a.length?`<div class="doc-index-grid">${m}</div>`:`<p class="doc-index-empty">${Ee(p)}</p>`;return`<!doctype html>
<html lang="${Ee(t.language)}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${Ee(o)}</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Inter", "Pretendard", system-ui, -apple-system, "Segoe UI", sans-serif;
        background: #f8fafc;
        color: #0f172a;
      }
      body {
        margin: 0;
        padding: 28px 20px 48px;
      }
      .doc-index-header {
        max-width: 980px;
        margin: 0 auto 20px;
        display: grid;
        gap: 10px;
      }
      .doc-index-title {
        font-size: 24px;
        font-weight: 700;
      }
      .doc-index-subtitle {
        font-size: 13px;
        color: #64748b;
      }
      .doc-index-search {
        max-width: 360px;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #cbd5f5;
        font-size: 13px;
      }
      .doc-index-grid {
        max-width: 980px;
        margin: 0 auto;
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      }
      .doc-index-empty {
        max-width: 980px;
        margin: 24px auto 0;
        font-size: 14px;
        color: #94a3b8;
      }
      .doc-card {
        background: #ffffff;
        border-radius: 14px;
        border: 1px solid #e2e8f0;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
        overflow: hidden;
      }
      .doc-card-link {
        display: grid;
        height: 100%;
        text-decoration: none;
        color: inherit;
      }
      .doc-card-thumb {
        width: 100%;
        height: 160px;
        background: #f1f5f9;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }
      .doc-card-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .doc-index-thumb-empty {
        font-size: 12px;
        color: #94a3b8;
        border: 1px dashed #cbd5f5;
        padding: 10px 12px;
        border-radius: 10px;
        background: #f8fafc;
      }
      .doc-card-body {
        padding: 14px 16px 16px;
        display: grid;
        gap: 10px;
      }
      .doc-card-body h2 {
        margin: 0;
        font-size: 16px;
      }
      .doc-card-tags {
        min-height: 26px;
      }
      .doc-chip-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .doc-chip-list li {
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid #cbd5f5;
        background: #eef2ff;
        font-size: 12px;
        color: #1e293b;
      }
      .doc-empty {
        margin: 0;
        font-size: 12px;
        color: #94a3b8;
      }
      .doc-card-meta {
        font-size: 12px;
        color: #64748b;
      }
      .doc-card-action {
        font-size: 12px;
        font-weight: 600;
        color: #2563eb;
      }
      @media (max-width: 720px) {
        body {
          padding: 20px 16px 32px;
        }
        .doc-index-search {
          max-width: 100%;
        }
        .doc-card-thumb {
          height: 140px;
        }
      }
    </style>
  </head>
  <body>
    <header class="doc-index-header">
      <div class="doc-index-title">${Ee(o)}</div>
      <div class="doc-index-subtitle">${Ee(i)}</div>
      <input
        id="doc-search"
        class="doc-index-search"
        type="search"
        placeholder="${Ee(d)}"
        aria-label="${Ee(d)}"
      />
    </header>
    <main class="doc-index-main">
      ${x}
    </main>
    <script>
      (function () {
        var input = document.getElementById("doc-search");
        if (!input) return;
        var items = Array.from(document.querySelectorAll("[data-doc-item]"));
        function applyFilter() {
          var term = input.value.trim().toLowerCase();
          items.forEach(function (item) {
            var haystack = item.getAttribute("data-search") || "";
            var match = !term || haystack.indexOf(term) !== -1;
            item.style.display = match ? "" : "none";
          });
        }
        input.addEventListener("input", applyFilter);
      })();
    <\/script>
  </body>
</html>`}function Zw(e,t){const n=new Set,a=e.scenes.map(g=>{var x;const m=((x=g.title)==null?void 0:x.trim())||t.t("scene.untitled");return{id:g.id,title:m,tags:g.tags??[],createdAt:g.createdAt,updatedAt:g.updatedAt,filename:qw(m,e.exportedAt,n),thumbnail:g.thumbnail}}),r={version:"1.0",source:"coco-viewer",exportedAt:e.exportedAt,documents:a.map(g=>({id:g.id,title:g.title,tags:g.tags,createdAt:g.createdAt,updatedAt:g.updatedAt,filename:g.filename}))},l=a.map((g,m)=>{const x=e.scenes[m];return{name:g.filename,data:Ww({scene:x,exportedAt:e.exportedAt},t)}}),o=[{name:"index.html",data:Qw({exportedAt:e.exportedAt,entries:a},t)},{name:"manifest.json",data:JSON.stringify(r,null,2)},...l],i=new Date(e.exportedAt),d=Gw(o,{lastModified:Number.isNaN(i.getTime())?new Date:i}),p=`scene-documents-${e.exportedAt.replace(/[:.]/g,"-")}.zip`;return zw(d,p),{filename:p,count:a.length}}const Kw="coco-viewer",Pw=1,Kn="sceneSnapshots",B_="coco-viewer.sceneSnapshots";let su=null,Ig=!1;function z_(){return typeof indexedDB<"u"}function Jw(){return z_()?new Promise((e,t)=>{const n=indexedDB.open(Kw,Pw);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(Kn)||a.createObjectStore(Kn,{keyPath:"id"}).createIndex("updatedAt","updatedAt")},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error??new Error("IndexedDB open failed"))}):Promise.reject(new Error("IndexedDB not supported"))}async function ho(){if(Ig||!z_())return null;su||(su=Jw());try{return await su}catch(e){return console.warn("Scene snapshot DB fallback:",e),Ig=!0,null}}function dc(){const e=localStorage.getItem(B_);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(t){return console.warn("Scene snapshot localStorage parse failed:",t),[]}}function kf(e){localStorage.setItem(B_,JSON.stringify(e))}function Yg(e){return[...e].sort((t,n)=>n.updatedAt.localeCompare(t.updatedAt))}async function U_(){const e=await ho();return e?new Promise((t,n)=>{const l=e.transaction(Kn,"readonly").objectStore(Kn).getAll();l.onsuccess=()=>t(Yg(l.result)),l.onerror=()=>n(l.error??new Error("Scene snapshot list failed"))}):Yg(dc())}async function ou(e){const t=await ho();return t?new Promise((n,a)=>{const s=t.transaction(Kn,"readonly").objectStore(Kn).get(e);s.onsuccess=()=>n(s.result??null),s.onerror=()=>a(s.error??new Error("Scene snapshot get failed"))}):dc().find(n=>n.id===e)??null}async function Os(e){const t=await ho();if(!t){const n=dc(),a=n.findIndex(r=>r.id===e.id);a>=0?n[a]=e:n.push(e),kf(n);return}await new Promise((n,a)=>{const s=t.transaction(Kn,"readwrite").objectStore(Kn).put(e);s.onsuccess=()=>n(),s.onerror=()=>a(s.error??new Error("Scene snapshot save failed"))})}async function yd(e){const t=await ho();if(!t){const n=dc().filter(a=>a.id!==e);kf(n);return}await new Promise((n,a)=>{const s=t.transaction(Kn,"readwrite").objectStore(Kn).delete(e);s.onsuccess=()=>n(),s.onerror=()=>a(s.error??new Error("Scene snapshot delete failed"))})}async function e1(e){const t=await ho();if(!t){kf(e);return}await new Promise((n,a)=>{const r=t.transaction(Kn,"readwrite"),l=r.objectStore(Kn);l.clear();for(const s of e)l.put(s);r.oncomplete=()=>n(),r.onerror=()=>a(r.error??new Error("Scene snapshot replace failed"))})}const xd=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`scene-${Date.now()}-${Math.random().toString(16).slice(2)}`,Fo=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString(Tf())},iu=e=>{const t=new Set;return e.split(",").map(n=>n.trim()).filter(n=>n.length>0).filter(n=>t.has(n)?!1:(t.add(n),!0))},t1=e=>e.join(", "),Df=e=>{if(typeof e!="string")return;const t=e.trim();if(!t)return;if(t.startsWith("data:image/"))return t;const n=t.replace(/\s+/g,"");if(/^[A-Za-z0-9+/]+=*$/.test(n))return n.startsWith("iVBOR")?`data:image/png;base64,${n}`:n.startsWith("/9j/")?`data:image/jpeg;base64,${n}`:`data:image/png;base64,${n}`},n1=(e,t)=>{const n={...e.viewerState};!n.viewBox&&n.bounds&&(n.viewBox=n.bounds),delete n.bounds;const a={...e,viewerState:n};if(t){const r=Df(e.thumbnail);r?a.thumbnail=r:delete a.thumbnail}else delete a.thumbnail;return a},a1=e=>{if(!e||typeof e!="object")return null;const t=e,n=new Date().toISOString(),a=typeof t.id=="string"&&t.id.trim().length>0?t.id.trim():xd(),r=typeof t.title=="string"&&t.title.trim().length>0?t.title.trim():C("scene.untitled"),l=Array.isArray(t.tags)?t.tags.filter(S=>typeof S=="string").map(S=>S.trim()).filter(Boolean):[],s=typeof t.createdAt=="string"?t.createdAt:n,o=typeof t.updatedAt=="string"?t.updatedAt:s,i=t.viewerState&&typeof t.viewerState=="object"?t.viewerState:{},d=Array.isArray(i.layers)?i.layers.filter(S=>typeof S=="string").map(S=>S.trim()).filter(Boolean):[],p=Array.isArray(i.highlight)?i.highlight.filter(S=>typeof S=="string").map(S=>S.trim()).filter(Boolean):[],g=i.viewBox??i.bounds,m=g&&typeof g=="object"&&["minX","maxX","minY","maxY"].every(S=>typeof g[S]=="number")?g:void 0,x=i.highlightColors&&typeof i.highlightColors=="object"?i.highlightColors:void 0,L=typeof i.highlightDimUnhighlighted=="boolean"?i.highlightDimUnhighlighted:void 0,k={layers:d,highlight:p,viewBox:m,activeLayer:typeof i.activeLayer=="string"?i.activeLayer:void 0,highlightIncluded:typeof i.highlightIncluded=="boolean"?i.highlightIncluded:void 0,highlightDimUnhighlighted:L,viewport:i.viewport&&typeof i.viewport=="object"?{width:Number(i.viewport.width)||0,height:Number(i.viewport.height)||0}:void 0,camera:i.camera&&typeof i.camera=="object"?{zoom:Number(i.camera.zoom)||0,pan:Array.isArray(i.camera.pan)?[Number(i.camera.pan[0])||0,Number(i.camera.pan[1])||0]:[0,0],rotation:Number(i.camera.rotation)||0}:void 0,highlightColors:x},U=t.note&&typeof t.note=="object"?t.note:{},b=typeof U.markdown=="string"?U.markdown:"",_=typeof U.lastEditedAt=="string"?U.lastEditedAt:o,v=Df(t.thumbnail);return{id:a,title:r,tags:l,createdAt:s,updatedAt:o,viewerState:k,note:{markdown:b,lastEditedAt:_},thumbnail:v}};function r1({isOpen:e,onClose:t,buildViewerState:n,onApplySnapshot:a,captureThumbnail:r,prepareExportScenes:l,defaultTitle:s}){const[o,i]=h.useState([]),[d,p]=h.useState(null),[g,m]=h.useState(new Set),[x,L]=h.useState(""),[k,U]=h.useState(!1),[b,_]=h.useState(!1),[v,S]=h.useState("edit"),[N,z]=h.useState(""),[R,K]=h.useState(""),[F,P]=h.useState(""),[re,se]=h.useState(!1),[Ce,Ge]=h.useState(""),[Se,Y]=h.useState(""),[ne,oe]=h.useState(!0),[he,Le]=h.useState(!0),[Ke,Pe]=h.useState(!1),[et,je]=h.useState(null),[Ae,Je]=h.useState(!1),[jt,xt]=h.useState(!1),[vt,ft]=h.useState(!1),[Re,ee]=h.useState(null),M=h.useRef(null),X=h.useRef(null),[,A]=h.useState(0);h.useEffect(()=>{const Z=fo(()=>{A(ce=>ce+1)});return()=>{Z()}},[]);const B=h.useCallback(async Z=>{const ce=await U_();if(i(ce),m(Q=>{const ot=new Set;return ce.forEach(Mn=>{Q.has(Mn.id)&&ot.add(Mn.id)}),ot}),Z){p(Z);return}p(Q=>{var ot;return Q&&ce.some(Mn=>Mn.id===Q)?Q:((ot=ce[0])==null?void 0:ot.id)??null})},[]);h.useEffect(()=>{e&&B()},[e,B]),h.useEffect(()=>{if(!e)return;const Z=ce=>{const Q=ce.detail;B((Q==null?void 0:Q.sceneId)??null)};return window.addEventListener(_d,Z),()=>window.removeEventListener(_d,Z)},[e,B]),h.useEffect(()=>{if(!e)return;const Z=ce=>{ce.key==="Escape"&&t()};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[e,t]),h.useEffect(()=>{if(!jt)return;const Z=ce=>{X.current&&!X.current.contains(ce.target)&&xt(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[jt]);const V=h.useMemo(()=>o.find(Z=>Z.id===d)??null,[o,d]);h.useEffect(()=>{if(!V){z(""),K(""),P("");return}z(V.title),K(t1(V.tags)),P(V.note.markdown)},[V==null?void 0:V.id]);const D=h.useMemo(()=>{if(!x.trim())return o;const Z=x.toLowerCase();return o.filter(ce=>ce.title.toLowerCase().includes(Z)?!0:ce.tags.some(Q=>Q.toLowerCase().includes(Z)))},[x,o]),G=g.size,H=h.useCallback(Z=>{p(Z.id),k&&a(Z)},[k,a]),O=h.useCallback(Z=>{m(ce=>{const Q=new Set(ce);return Q.has(Z)?Q.delete(Z):Q.add(Z),Q})},[]),ie=h.useCallback(()=>{m(Z=>Z.size===D.length&&D.length>0?new Set:new Set(D.map(ce=>ce.id)))},[D]),ae=()=>{const Z=C("scene.fallbackTitle",{timestamp:new Date().toLocaleString(Tf())});Ge((s==null?void 0:s.trim())||Z),Y(""),oe(!0),Le(!0),se(!0)},ge=async()=>{const Z=n({includeLayers:ne,includeHighlights:he});if(!Z){alert(C("status.scene.saveNoView"));return}const ce=new Date().toISOString(),Q=Ce.trim()||C("scene.untitled"),ot={id:xd(),title:Q,tags:iu(Se),createdAt:ce,updatedAt:ce,viewerState:Z,note:{markdown:"",lastEditedAt:ce},thumbnail:await(r==null?void 0:r(Z))};try{await Os(ot),await B(ot.id),se(!1)}catch(Mn){console.warn("Scene snapshot save failed:",Mn)}},we=async()=>{if(!V)return;const Z=new Date().toISOString(),ce={...V,title:N.trim()||C("scene.untitled"),tags:iu(R),updatedAt:Z,note:{markdown:F,lastEditedAt:Z}};try{await Os(ce),await B(ce.id)}catch(Q){console.warn("Scene snapshot update failed:",Q)}},de=async()=>{if(!(!V||!window.confirm(C("scene.confirmDelete",{title:V.title}))))try{await yd(V.id),await B()}catch(ce){console.warn("Scene snapshot delete failed:",ce)}},ke=async()=>{if(!(!g.size||!window.confirm(C("scene.confirmDeleteSelected",{count:g.size}))))try{for(const ce of g)await yd(ce);m(new Set),await B()}catch(ce){console.warn("Scene snapshot delete failed:",ce)}},ze=h.useCallback(Z=>Z==="selected"?o.filter(ce=>g.has(ce.id)):o,[o,g]),It=h.useCallback(Z=>({...Z,tags:[...Z.tags],viewerState:{...Z.viewerState,highlightColors:Z.viewerState.highlightColors?{net:Z.viewerState.highlightColors.net?{...Z.viewerState.highlightColors.net}:void 0,component:Z.viewerState.highlightColors.component?{...Z.viewerState.highlightColors.component}:void 0}:void 0},note:{...Z.note}}),[]),Yt=h.useCallback(Z=>{const ce=It(Z);if(!d||Z.id!==d)return ce;const Q=new Date().toISOString();return{...ce,title:N.trim()||ce.title,tags:iu(R),note:{markdown:F,lastEditedAt:Q}}},[d,It,F,R,N]),wt=h.useCallback(async(Z,ce)=>{const Q=Z.map(Mn=>Yt(Mn));return l?await l(Q,ce==="highRes"?"highRes":"default"):Q},[Yt,l]),Pt=Z=>{if(!ze(Z).length){alert(C("scene.alertExportNoSelection"));return}xt(!1),je(Z),Pe(!0)},cn=Z=>{if(!ze(Z).length){alert(C("scene.alertExportNoSelection"));return}xt(!1),ee(Z),ft(!0)},Jt=()=>{Ae||(Pe(!1),je(null))},st=()=>{Ae||(ft(!1),ee(null))},en=async Z=>{if(!et)return;const ce=ze(et);if(!ce.length){alert(C("scene.alertExportNoSelection")),Pe(!1),je(null);return}Je(!0);try{const Q=Z==="exclude"||!l?ce:await l(ce,Z),ot=Z!=="exclude",Mn={version:"1.0",source:"coco-viewer",exportedAt:new Date().toISOString(),scenes:Q.map(Gt=>n1(Gt,ot))},Er=JSON.stringify(Mn,null,2),va=new Blob([Er],{type:"application/json"}),Jn=URL.createObjectURL(va),Nn=document.createElement("a");Nn.href=Jn,Nn.download=`scene-snapshots-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,Nn.rel="noopener",document.body.appendChild(Nn),Nn.click(),document.body.removeChild(Nn),setTimeout(()=>URL.revokeObjectURL(Jn),0)}finally{Je(!1),Pe(!1),je(null)}},ve=async Z=>{if(!Re)return;const ce=ze(Re);if(!ce.length){alert(C("scene.alertExportNoSelection")),ft(!1),ee(null);return}Je(!0);try{const Q=await wt(ce,Z),ot=new Date().toISOString();Zw({scenes:Q,exportedAt:ot},{language:j_(),t:C,renderMarkdown:Hg,normalizeThumbnail:Df,formatSceneDate:Fo})}finally{Je(!1),ft(!1),ee(null)}},kt=async Z=>{let ce;try{ce=JSON.parse(await Z.text())}catch{alert(C("scene.alertImportInvalid"));return}let Q=[];ce&&typeof ce=="object"&&Array.isArray(ce.scenes)?Q=ce.scenes:Array.isArray(ce)?Q=ce:ce&&typeof ce=="object"&&ce.viewerState&&(Q=[ce]);const ot=Q.map(a1).filter(Boolean);if(!ot.length){alert(C("scene.alertImportNoData"));return}if(window.confirm(C("scene.confirmReplaceAll"))){try{await e1(ot),await B()}catch(Gt){console.warn("Scene snapshot replace failed:",Gt)}return}const Er=new Set(o.map(Gt=>Gt.id)),va=ot.some(Gt=>Er.has(Gt.id));let Jn=!1;va&&(Jn=window.confirm(C("scene.confirmOverwrite")));const Nn=[];ot.forEach(Gt=>{Er.has(Gt.id)&&!Jn?Nn.push({...Gt,id:xd()}):Nn.push(Gt)});try{for(const Gt of Nn)await Os(Gt);await B()}catch(Gt){console.warn("Scene snapshot import failed:",Gt)}},un=()=>{Pt("all")},Ct=()=>{Pt("selected")},Te=()=>{cn("all")},Pn=()=>{cn("selected")},$t=b?"w-[460px]":"w-[860px]",ua=b?"px-4 py-3 gap-2":"px-5 py-4 gap-3",xa=b?"p-3 flex flex-col gap-3":"p-4 flex gap-4",fc=b?"p-3 space-y-2":"p-4 space-y-3",En=b?"p-2 space-y-1.5":"p-3 space-y-2",hc=b?"p-3 space-y-2":"p-4 space-y-3",Fl=b?"px-3 pt-3":"px-4 pt-4",mo=b?"flex-1 px-3 py-2 overflow-hidden":"flex-1 px-4 py-3 overflow-hidden",Wl=b?"px-3 py-2":"px-4 py-3",Sr="w-full rounded-lg border border-border-default bg-white/80 text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70",Hn=b?`${Sr} px-2.5 py-1.5 text-[12px]`:`${Sr} px-3 py-2 text-sm`,Cr=b?"flex-1 px-2.5 py-1.5 rounded-lg border border-border-default bg-white/80 text-[11px] text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70":"flex-1 px-3 py-2 rounded-lg border border-border-default bg-white/80 text-xs text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70",$a=b?"text-[10px]":"text-[11px]";return c.jsxs("div",{className:`fixed inset-0 z-50 ${e?"pointer-events-auto":"pointer-events-none"}`,"aria-hidden":!e,children:[c.jsx("div",{className:`absolute inset-0 bg-slate-900/20 transition-opacity ${e?"opacity-100":"opacity-0"}`,onClick:t}),c.jsxs("aside",{className:`absolute right-0 top-0 h-full ${$t} max-w-[96vw] bg-white/95 dark:bg-surface-900/95 border-l border-border-default dark:border-surface-700 shadow-[-12px_0_30px_rgba(15,23,42,0.25)] backdrop-blur-xl flex flex-col transition-transform duration-200 ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-label":C("scene.panelTitle"),children:[c.jsxs("div",{className:`border-b border-border-default dark:border-surface-700 flex flex-col ${ua}`,children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:`${b?"text-[10px]":"text-[11px]"} uppercase tracking-[0.2em] text-text-muted`,children:C("scene.panelEyebrow")}),c.jsx("h2",{className:`${b?"text-base":"text-lg"} font-semibold text-text-primary`,children:C("scene.panelTitle")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",className:`rounded-full border border-border-default font-semibold text-text-secondary hover:text-text-primary transition-colors ${b?"px-2 py-1 text-[10px]":"px-2.5 py-1.5 text-[11px]"}`,onClick:()=>_(Z=>!Z),"aria-label":C("scene.compactToggle"),children:C(b?"scene.compactExpand":"scene.compactCollapse")}),c.jsx("button",{type:"button",className:`rounded-full border border-border-default font-semibold text-text-secondary hover:text-text-primary transition-colors ${b?"px-2 py-1 text-[10px]":"px-2.5 py-1.5 text-[11px]"}`,onClick:t,"aria-label":C("scene.close"),children:""})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("button",{type:"button",className:`inline-flex items-center gap-2 rounded-lg bg-primary-500 text-white font-semibold shadow-[0_8px_18px_rgba(6,182,212,0.25)] hover:bg-primary-400 transition-colors ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,onClick:ae,children:C("scene.save")}),c.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[c.jsxs("button",{type:"button",className:`inline-flex items-center gap-2 rounded-lg border border-border-default font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60 disabled:cursor-not-allowed ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,onClick:()=>{var Z;return(Z=M.current)==null?void 0:Z.click()},children:[c.jsx(bw,{className:b?"w-3.5 h-3.5":"w-4 h-4"}),C("scene.import")]}),c.jsxs("div",{className:"relative",ref:X,children:[c.jsxs("button",{type:"button",className:`inline-flex items-center gap-2 rounded-lg border border-border-default font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60 disabled:cursor-not-allowed ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,onClick:()=>xt(Z=>!Z),disabled:Ae,"aria-label":C("scene.exportMenuAria"),children:[c.jsx(aw,{className:b?"w-3.5 h-3.5":"w-4 h-4"}),C("scene.exportMenu"),c.jsx(D_,{className:b?"w-3 h-3":"w-3.5 h-3.5"})]}),jt&&c.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-xl border border-border-default bg-white/95 dark:bg-surface-900/95 shadow-[0_12px_24px_rgba(15,23,42,0.18)] backdrop-blur",children:[c.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-xs font-semibold text-text-secondary hover:text-text-primary hover:bg-surface-100/60 dark:hover:bg-surface-800/60 transition-colors",onClick:un,disabled:Ae,children:C("scene.exportAll")}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-xs font-semibold text-text-secondary hover:text-text-primary hover:bg-surface-100/60 dark:hover:bg-surface-800/60 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:Ct,disabled:Ae||!g.size,children:C("scene.exportSelected")}),c.jsx("div",{className:"h-px bg-border-default/70 dark:bg-surface-700/80"}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-xs font-semibold text-text-secondary hover:text-text-primary hover:bg-surface-100/60 dark:hover:bg-surface-800/60 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:Pn,disabled:Ae||!g.size,children:C("scene.exportDocumentSelected")}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-xs font-semibold text-text-secondary hover:text-text-primary hover:bg-surface-100/60 dark:hover:bg-surface-800/60 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:Te,disabled:Ae,children:C("scene.exportDocumentAll")})]})]})]})]})]}),c.jsxs("div",{className:`flex-1 min-h-0 overflow-hidden ${xa}`,children:[c.jsxs("section",{className:`${b?"w-full flex-1":"w-80 flex-shrink-0"} min-h-0 bg-surface-50 dark:bg-surface-800/80 border border-border-default dark:border-surface-700 rounded-2xl flex flex-col overflow-hidden`,children:[c.jsxs("div",{className:`border-b border-border-default dark:border-surface-700 ${fc}`,children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-semibold text-text-primary",children:C("scene.listTitle")}),c.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-50 text-primary-600 text-[11px] font-semibold dark:bg-surface-700 dark:text-primary-200",children:o.length})]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[G>0&&c.jsx("span",{className:`${$a} text-text-muted`,children:C("scene.selectedCount",{count:G})}),c.jsx("button",{type:"button",onClick:ie,className:`rounded-lg border border-border-default font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60 ${b?"px-2 py-1 text-[10px]":"px-2.5 py-1.5 text-[11px]"}`,disabled:!D.length,children:g.size===D.length&&D.length>0?C("scene.clearSelection"):C("scene.selectAll")}),G>0&&c.jsx("button",{type:"button",onClick:ke,className:`rounded-lg border border-rose-200 font-semibold text-rose-500 hover:text-rose-600 hover:border-rose-300 transition-colors ${b?"px-2 py-1 text-[10px]":"px-2.5 py-1.5 text-[11px]"}`,children:C("scene.deleteSelected")})]})]}),c.jsx("div",{className:"flex",children:c.jsx("input",{value:x,onChange:Z=>L(Z.target.value),placeholder:C("scene.searchPlaceholder"),className:Cr})}),c.jsxs("label",{className:`flex items-center gap-2 font-semibold text-text-secondary ${$a}`,children:[c.jsx("input",{type:"checkbox",checked:k,onChange:Z=>U(Z.target.checked),className:"rounded border-border-default"}),C("scene.autoApply")]})]}),c.jsx("div",{className:`flex-1 min-h-0 overflow-y-auto ${En}`,children:D.length?D.map(Z=>{const ce=Z.id===d,Q=g.has(Z.id);return c.jsxs("div",{className:`flex items-center ${b?"gap-2 p-2 rounded-lg":"gap-3 p-3 rounded-xl"} border transition-colors cursor-pointer ${ce?"border-primary-400 bg-primary-50/60 dark:bg-primary-500/10":"border-border-default bg-white/80 dark:bg-surface-900/70 hover:border-border-strong"} ${Q?"ring-1 ring-emerald-400/60":""}`,onClick:()=>H(Z),children:[c.jsx("input",{type:"checkbox",checked:Q,onChange:()=>O(Z.id),onClick:ot=>ot.stopPropagation(),className:"rounded border-border-default","aria-label":C("scene.selectAria")}),!b&&c.jsx("div",{className:"w-14 h-10 rounded-lg bg-surface-100 dark:bg-surface-800 border border-border-default flex items-center justify-center text-[10px] font-semibold text-text-muted overflow-hidden",children:Z.thumbnail?c.jsx("img",{src:Z.thumbnail,alt:C("scene.thumbnailAlt",{title:Z.title}),className:"w-full h-full object-cover"}):C("scene.thumbnailFallback")}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:`${b?"text-[13px]":"text-sm"} font-semibold text-text-primary truncate`,children:Z.title||C("scene.untitled")}),Z.tags.length?b?c.jsx("div",{className:"mt-0.5 text-[10px] text-text-muted truncate",children:Z.tags.join(", ")}):c.jsx("div",{className:"flex flex-wrap gap-1 mt-1 text-[10px] text-text-muted",children:Z.tags.map(ot=>c.jsx("span",{className:"px-1.5 py-0.5 rounded-full border border-border-default",children:ot},`${Z.id}-${ot}`))}):null,c.jsx("div",{className:`text-[10px] text-text-muted ${b?"mt-0.5":"mt-1"}`,children:C("scene.updatedAt",{date:Fo(Z.updatedAt)})})]}),!k&&c.jsx("button",{type:"button",onClick:ot=>{ot.stopPropagation(),a(Z)},className:`rounded-lg border border-primary-200 font-semibold text-primary-500 hover:text-primary-600 hover:border-primary-300 transition-colors ${b?"px-2 py-0.5 text-[10px]":"px-2 py-1 text-[10px]"}`,children:C("scene.applyInline")})]},Z.id)}):c.jsx("div",{className:"py-8 text-center text-xs text-text-muted",children:C("scene.emptyList")})})]}),c.jsx("section",{className:"flex-1 min-w-0 min-h-0 bg-surface-50 dark:bg-surface-800/80 border border-border-default dark:border-surface-700 rounded-2xl flex flex-col overflow-hidden",children:V?c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:`border-b border-border-default dark:border-surface-700 ${hc}`,children:[c.jsxs("div",{className:`flex items-center gap-2 ${b?"text-[10px]":"text-xs"} text-text-muted`,children:[c.jsx("span",{children:C("scene.createdAt",{date:Fo(V.createdAt)})}),c.jsx("span",{children:""}),c.jsx("span",{children:C("scene.updatedAt",{date:Fo(V.updatedAt)})})]}),c.jsxs("div",{className:`flex flex-col ${b?"gap-2":"gap-3"}`,children:[c.jsxs("label",{className:`flex flex-col gap-1 font-semibold text-text-muted ${$a}`,children:[C("scene.labelTitle"),c.jsx("input",{value:N,onChange:Z=>z(Z.target.value),placeholder:C("scene.titlePlaceholder"),className:Hn})]}),c.jsxs("label",{className:`flex flex-col gap-1 font-semibold text-text-muted ${$a}`,children:[C("scene.labelTags"),c.jsx("input",{value:R,onChange:Z=>K(Z.target.value),placeholder:C("scene.tagsPlaceholder"),className:Hn})]})]})]}),c.jsxs("div",{className:`${Fl} flex items-center gap-2`,children:[c.jsx("button",{type:"button",onClick:()=>S("edit"),className:`rounded-full font-semibold border transition-colors ${b?"px-2.5 py-0.5 text-[10px]":"px-3 py-1 text-[11px]"} ${v==="edit"?"border-primary-300 bg-primary-50 text-primary-600":"border-border-default text-text-muted hover:text-text-primary"}`,children:C("scene.noteEdit")}),c.jsx("button",{type:"button",onClick:()=>S("preview"),className:`rounded-full font-semibold border transition-colors ${b?"px-2.5 py-0.5 text-[10px]":"px-3 py-1 text-[11px]"} ${v==="preview"?"border-primary-300 bg-primary-50 text-primary-600":"border-border-default text-text-muted hover:text-text-primary"}`,children:C("scene.notePreview")})]}),c.jsx("div",{className:mo,children:v==="edit"?c.jsx("textarea",{value:F,onChange:Z=>P(Z.target.value),placeholder:C("scene.notePlaceholder"),className:`w-full h-full resize-none border border-border-default bg-white/80 text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70 ${b?"rounded-lg text-[12px] px-2.5 py-2":"rounded-xl text-sm px-3 py-2"}`}):c.jsx("div",{className:`w-full h-full overflow-auto border border-border-default bg-white/80 text-text-secondary dark:bg-surface-900/70 ${b?"rounded-lg text-[12px] p-2":"rounded-xl text-sm p-3"}`,dangerouslySetInnerHTML:{__html:Hg(F)}})}),c.jsxs("div",{className:`border-t border-border-default dark:border-surface-700 flex flex-wrap justify-end gap-2 ${Wl}`,children:[c.jsx("button",{type:"button",onClick:()=>a(V),className:`rounded-lg border border-primary-200 font-semibold text-primary-500 hover:text-primary-600 hover:border-primary-300 transition-colors ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,children:C("scene.apply")}),c.jsx("button",{type:"button",onClick:we,className:`rounded-lg bg-primary-500 text-white font-semibold hover:bg-primary-400 transition-colors ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,children:C("scene.update")}),c.jsx("button",{type:"button",onClick:de,className:`rounded-lg border border-rose-200 font-semibold text-rose-500 hover:text-rose-600 hover:border-rose-300 transition-colors ${b?"px-2.5 py-1 text-[11px]":"px-3 py-1.5 text-xs"}`,children:C("scene.delete")})]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-sm text-text-muted px-6",children:[c.jsx("div",{className:"text-base font-semibold text-text-primary mb-2",children:C("scene.emptyDetailTitle")}),c.jsx("div",{className:"text-xs",children:C("scene.emptyDetailHint")})]})})]})]}),re&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/40",children:c.jsxs("div",{className:"w-[420px] max-w-[92vw] bg-white dark:bg-surface-900 border border-border-default dark:border-surface-700 rounded-2xl p-5 shadow-[0_20px_40px_rgba(15,23,42,0.25)] space-y-4",children:[c.jsx("div",{className:"text-base font-semibold text-text-primary",children:C("scene.save")}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex flex-col gap-1 text-[11px] font-semibold text-text-muted",children:[C("scene.labelTitle"),c.jsx("input",{value:Ce,onChange:Z=>Ge(Z.target.value),placeholder:C("scene.titlePlaceholder"),className:"w-full px-3 py-2 rounded-lg border border-border-default bg-white/80 text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70"})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-[11px] font-semibold text-text-muted",children:[C("scene.labelTags"),c.jsx("input",{value:Se,onChange:Z=>Y(Z.target.value),placeholder:C("scene.tagsPlaceholder"),className:"w-full px-3 py-2 rounded-lg border border-border-default bg-white/80 text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-primary-400 dark:bg-surface-900/70"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[c.jsx("input",{type:"checkbox",checked:ne,onChange:Z=>oe(Z.target.checked),className:"rounded border-border-default"}),C("scene.document.layers")]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[c.jsx("input",{type:"checkbox",checked:he,onChange:Z=>Le(Z.target.checked),className:"rounded border-border-default"}),C("scene.document.highlights")]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border border-border-default text-xs font-semibold text-text-secondary hover:text-text-primary transition-colors",onClick:()=>se(!1),children:C("scene.documentExportModal.cancel")}),c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg bg-primary-500 text-white text-xs font-semibold hover:bg-primary-400 transition-colors",onClick:()=>void ge(),children:C("scene.save")})]})]})}),Ke&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/40",onClick:Jt,children:c.jsxs("div",{className:"w-[420px] max-w-[92vw] bg-white dark:bg-surface-900 border border-border-default dark:border-surface-700 rounded-2xl p-5 shadow-[0_20px_40px_rgba(15,23,42,0.25)] space-y-4",onClick:Z=>Z.stopPropagation(),children:[c.jsx("div",{className:"text-base font-semibold text-text-primary",children:C("scene.exportModal.title")}),c.jsx("p",{className:"text-xs text-text-muted",children:C("scene.exportModal.description")}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-lg border border-border-default text-xs font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>void en("exclude"),disabled:Ae,children:C("scene.exportModal.exclude")}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-lg border border-primary-200 text-xs font-semibold text-primary-600 hover:text-primary-700 hover:border-primary-300 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>void en("default"),disabled:Ae,children:C("scene.exportModal.include")}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-lg bg-primary-500 text-white text-xs font-semibold hover:bg-primary-400 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>void en("highRes"),disabled:Ae,children:C("scene.exportModal.highRes")})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border border-border-default text-xs font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60",onClick:Jt,disabled:Ae,children:C("scene.modal.cancel")})})]})}),vt&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/40",onClick:st,children:c.jsxs("div",{className:"w-[420px] max-w-[92vw] bg-white dark:bg-surface-900 border border-border-default dark:border-surface-700 rounded-2xl p-5 shadow-[0_20px_40px_rgba(15,23,42,0.25)] space-y-4",onClick:Z=>Z.stopPropagation(),children:[c.jsx("div",{className:"text-base font-semibold text-text-primary",children:C("scene.documentExportModal.title")}),c.jsx("p",{className:"text-xs text-text-muted",children:C("scene.documentExportModal.description")}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-lg border border-border-default text-xs font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>void ve("default"),disabled:Ae,children:C("scene.documentExportModal.default")}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-lg bg-primary-500 text-white text-xs font-semibold hover:bg-primary-400 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>void ve("highRes"),disabled:Ae,children:C("scene.documentExportModal.highRes")})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border border-border-default text-xs font-semibold text-text-secondary hover:text-text-primary transition-colors disabled:opacity-60",onClick:st,disabled:Ae,children:C("scene.documentExportModal.cancel")})})]})}),c.jsx("input",{ref:M,type:"file",accept:".json,application/json",className:"hidden",onChange:Z=>{var Q;const ce=(Q=Z.target.files)==null?void 0:Q[0];ce&&kt(ce),Z.currentTarget.value=""}})]})}class vd{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Vg.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_wasmcadencedataset_free(t,0)}get_all_component_details(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_all_component_details(l,this.__wbg_ptr,We(t)?4294967297:t>>>0);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_all_layer_scenes(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_all_layer_scenes(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_all_layers(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_all_layers(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_cached_layer_bounds(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmcadencedataset_get_cached_layer_bounds(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_cached_layer_geom_count(t){const n=xe(t,u.__wbindgen_export,u.__wbindgen_export2),a=pe;return u.wasmcadencedataset_get_cached_layer_geom_count(this.__wbg_ptr,n,a)>>>0}get_component_bounds_by_ref(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_component_bounds_by_ref(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_details(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_component_details(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_details_by_pattern(t,n,a){try{const d=u.__wbindgen_add_to_stack_pointer(-16),p=xe(t,u.__wbindgen_export,u.__wbindgen_export2),g=pe;var r=We(n)?0:xe(n,u.__wbindgen_export,u.__wbindgen_export2),l=pe;u.wasmcadencedataset_get_component_details_by_pattern(d,this.__wbg_ptr,p,g,r,l,We(a)?4294967297:a>>>0);var s=E().getInt32(d+4*0,!0),o=E().getInt32(d+4*1,!0),i=E().getInt32(d+4*2,!0);if(i)throw I(o);return I(s)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_features_by_ref(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_component_features_by_ref(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_list(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_component_list(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_feature_meta(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmcadencedataset_get_feature_meta(s,this.__wbg_ptr,o,i,n);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_feature_counts(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_layer_feature_counts(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_info(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmcadencedataset_get_layer_info(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_names(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_layer_names(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_revision(){const t=u.wasmcadencedataset_get_layer_revision(this.__wbg_ptr);return BigInt.asUintN(64,t)}get_net_bounds_by_net(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_net_bounds_by_net(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_features_by_net(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_net_features_by_net(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_info(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmcadencedataset_get_net_info(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_layer_counts(t,n){try{const i=u.__wbindgen_add_to_stack_pointer(-16);var a=We(n)?0:xe(n,u.__wbindgen_export,u.__wbindgen_export2),r=pe;u.wasmcadencedataset_get_net_layer_counts(i,this.__wbg_ptr,W(t),a,r);var l=E().getInt32(i+4*0,!0),s=E().getInt32(i+4*1,!0),o=E().getInt32(i+4*2,!0);if(o)throw I(s);return I(l)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_list(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_net_list(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_summary(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_get_summary(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}has_all_layer_geoms_cached(){return u.wasmcadencedataset_has_all_layer_geoms_cached(this.__wbg_ptr)!==0}has_cached_layer_geoms(t){const n=xe(t,u.__wbindgen_export,u.__wbindgen_export2),a=pe;return u.wasmcadencedataset_has_cached_layer_geoms(this.__wbg_ptr,n,a)!==0}hit_test_webgpu(t,n,a,r,l,s,o){const i=I_(a,u.__wbindgen_export),d=pe,p=u.wasmcadencedataset_hit_test_webgpu(this.__wbg_ptr,t,n,i,d,r,W(l),W(s),W(o));return I(p)}measure_distance(t,n,a,r,l){const s=u.wasmcadencedataset_measure_distance(this.__wbg_ptr,t,n,a,r,l);return I(s)}measure_distance_by_geom(t,n,a,r,l,s,o){const i=u.wasmcadencedataset_measure_distance_by_geom(this.__wbg_ptr,t,n,a,r,l,s,o);return I(i)}name(){let t,n;try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmcadencedataset_name(l,this.__wbg_ptr);var a=E().getInt32(l+4*0,!0),r=E().getInt32(l+4*1,!0);return t=a,n=r,In(a,r)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export4(t,n,1)}}constructor(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmcadencedataset_new(s,o,i,W(n));var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return this.__wbg_ptr=a>>>0,Vg.register(this,this.__wbg_ptr,this),this}finally{u.__wbindgen_add_to_stack_pointer(16)}}render_layers_webgpu(t,n,a,r){const l=xe(t,u.__wbindgen_export,u.__wbindgen_export2),s=pe,o=u.wasmcadencedataset_render_layers_webgpu(this.__wbg_ptr,l,s,W(n),W(a),We(r)?0:W(r));return I(o)}setWebgpuPerformanceMode(t){u.wasmcadencedataset_setWebgpuPerformanceMode(this.__wbg_ptr,t)}}Symbol.dispose&&(vd.prototype[Symbol.dispose]=vd.prototype.free);class wd{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,qg.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_wasmodbdataset_free(t,0)}clear_all_highlights(){u.wasmodbdataset_clear_all_highlights(this.__wbg_ptr)}create_scene_plan(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_create_scene_plan(s,this.__wbg_ptr,W(t),W(n));var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}debug_sample_net_features(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_debug_sample_net_features(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_all_component_details(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_all_component_details(l,this.__wbg_ptr,We(t)?4294967297:t>>>0);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_all_layers(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_all_layers(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_cached_layer_bounds(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_get_cached_layer_bounds(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_cached_layer_geom_count(t){const n=xe(t,u.__wbindgen_export,u.__wbindgen_export2),a=pe;return u.wasmodbdataset_get_cached_layer_geom_count(this.__wbg_ptr,n,a)>>>0}get_cached_layer_geoms(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_get_cached_layer_geoms(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_cached_layer_scene(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_get_cached_layer_scene(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_bounds_by_ref(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_component_bounds_by_ref(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_details(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_component_details(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_details_by_pattern(t,n,a){try{const d=u.__wbindgen_add_to_stack_pointer(-16),p=xe(t,u.__wbindgen_export,u.__wbindgen_export2),g=pe;var r=We(n)?0:xe(n,u.__wbindgen_export,u.__wbindgen_export2),l=pe;u.wasmodbdataset_get_component_details_by_pattern(d,this.__wbg_ptr,p,g,r,l,We(a)?4294967297:a>>>0);var s=E().getInt32(d+4*0,!0),o=E().getInt32(d+4*1,!0),i=E().getInt32(d+4*2,!0);if(i)throw I(o);return I(s)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_features_by_ref(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_component_features_by_ref(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_field_values(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmodbdataset_get_component_field_values(s,this.__wbg_ptr,o,i,We(n)?4294967297:n>>>0);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_list(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_component_list(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_property_names(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_component_property_names(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_component_property_values(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmodbdataset_get_component_property_values(s,this.__wbg_ptr,o,i,We(n)?4294967297:n>>>0);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_feature_meta(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmodbdataset_get_feature_meta(s,this.__wbg_ptr,o,i,n);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_file_info(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_file_info(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_highlighted_bounds(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_highlighted_bounds(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_highlighted_component_features(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_highlighted_component_features(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_highlighted_component_features_by_ref(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_highlighted_component_features_by_ref(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_highlighted_net_features(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_highlighted_net_features(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_highlighted_net_features_by_net(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_highlighted_net_features_by_net(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_init_perf_stats(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_init_perf_stats(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_last_odb_layer_prepare_perf(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_last_odb_layer_prepare_perf(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_info(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_get_layer_info(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_names(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_layer_names(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_layer_revision(){const t=u.wasmodbdataset_get_layer_revision(this.__wbg_ptr);return BigInt.asUintN(64,t)}get_net_bounds_by_net(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_bounds_by_net(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_features_by_net(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_features_by_net(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_index_stats(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_index_stats(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_layer_counts(t,n){try{const i=u.__wbindgen_add_to_stack_pointer(-16);var a=We(n)?0:xe(n,u.__wbindgen_export,u.__wbindgen_export2),r=pe;u.wasmodbdataset_get_net_layer_counts(i,this.__wbg_ptr,W(t),a,r);var l=E().getInt32(i+4*0,!0),s=E().getInt32(i+4*1,!0),o=E().getInt32(i+4*2,!0);if(o)throw I(s);return I(l)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_lengths(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_lengths(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_list(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_list(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_net_pins(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_net_pins(l,this.__wbg_ptr,W(t));var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_step_names(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_step_names(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_user_symbol_info(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_get_user_symbol_info(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_user_symbol_names(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_get_user_symbol_names(r,this.__wbg_ptr);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}has_all_layer_geoms_cached(){return u.wasmodbdataset_has_all_layer_geoms_cached(this.__wbg_ptr)!==0}has_cached_layer_geoms(t){const n=xe(t,u.__wbindgen_export,u.__wbindgen_export2),a=pe;return u.wasmodbdataset_has_cached_layer_geoms(this.__wbg_ptr,n,a)!==0}has_components(){return u.wasmodbdataset_has_components(this.__wbg_ptr)!==0}has_eda(){return u.wasmodbdataset_has_eda(this.__wbg_ptr)!==0}has_matrix(){return u.wasmodbdataset_has_matrix(this.__wbg_ptr)!==0}hit_test_webgpu(t,n,a,r,l,s,o){const i=I_(a,u.__wbindgen_export),d=pe,p=u.wasmodbdataset_hit_test_webgpu(this.__wbg_ptr,t,n,i,d,r,W(l),W(s),W(o));return I(p)}is_feature_highlighted(t,n){const a=xe(t,u.__wbindgen_export,u.__wbindgen_export2),r=pe;return u.wasmodbdataset_is_feature_highlighted(this.__wbg_ptr,a,r,n)!==0}measure_distance(t,n,a,r,l){const s=u.wasmodbdataset_measure_distance(this.__wbg_ptr,t,n,a,r,l);return I(s)}measure_distance_by_geom(t,n,a,r,l,s,o){const i=u.wasmodbdataset_measure_distance_by_geom(this.__wbg_ptr,t,n,a,r,l,s,o);return I(i)}name(){let t,n;try{const l=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_name(l,this.__wbg_ptr);var a=E().getInt32(l+4*0,!0),r=E().getInt32(l+4*1,!0);return t=a,n=r,In(a,r)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export4(t,n,1)}}constructor(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.wasmodbdataset_new(s,o,i,W(n));var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return this.__wbg_ptr=a>>>0,qg.register(this,this.__wbg_ptr,this),this}finally{u.__wbindgen_add_to_stack_pointer(16)}}parse_odb_layer_features_cache_only(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe,d=xe(n,u.__wbindgen_export,u.__wbindgen_export2),p=pe;u.wasmodbdataset_parse_odb_layer_features_cache_only(s,this.__wbg_ptr,o,i,d,p);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return a>>>0}finally{u.__wbindgen_add_to_stack_pointer(16)}}parse_odb_layer_features_geom_cache_only(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe,d=xe(n,u.__wbindgen_export,u.__wbindgen_export2),p=pe;u.wasmodbdataset_parse_odb_layer_features_geom_cache_only(s,this.__wbg_ptr,o,i,d,p);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return a>>>0}finally{u.__wbindgen_add_to_stack_pointer(16)}}parse_odb_layer_features_scene(t,n){try{const s=u.__wbindgen_add_to_stack_pointer(-16),o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe,d=xe(n,u.__wbindgen_export,u.__wbindgen_export2),p=pe;u.wasmodbdataset_parse_odb_layer_features_scene(s,this.__wbg_ptr,o,i,d,p);var a=E().getInt32(s+4*0,!0),r=E().getInt32(s+4*1,!0),l=E().getInt32(s+4*2,!0);if(l)throw I(r);return I(a)}finally{u.__wbindgen_add_to_stack_pointer(16)}}render_layers_webgpu(t,n,a,r){const l=xe(t,u.__wbindgen_export,u.__wbindgen_export2),s=pe,o=u.wasmodbdataset_render_layers_webgpu(this.__wbg_ptr,l,s,W(n),W(a),We(r)?0:W(r));return I(o)}render_layers_webgpu_offscreen(t,n,a,r,l){const s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe,i=u.wasmodbdataset_render_layers_webgpu_offscreen(this.__wbg_ptr,s,o,W(n),W(a),W(r),We(l)?0:W(l));return I(i)}render_user_symbol(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_render_user_symbol(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}reset_scene_plan_state(){u.wasmodbdataset_reset_scene_plan_state(this.__wbg_ptr)}search_components_by_property(t,n,a,r,l){try{const g=u.__wbindgen_add_to_stack_pointer(-16),m=xe(t,u.__wbindgen_export,u.__wbindgen_export2),x=pe,L=xe(n,u.__wbindgen_export,u.__wbindgen_export2),k=pe;var s=We(a)?0:xe(a,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_search_components_by_property(g,this.__wbg_ptr,m,x,L,k,s,o,We(r)?16777215:r?1:0,We(l)?4294967297:l>>>0);var i=E().getInt32(g+4*0,!0),d=E().getInt32(g+4*1,!0),p=E().getInt32(g+4*2,!0);if(p)throw I(d);return I(i)}finally{u.__wbindgen_add_to_stack_pointer(16)}}setWebgpuPerformanceMode(t){u.wasmodbdataset_setWebgpuPerformanceMode(this.__wbg_ptr,t)}set_component_highlights(t){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_set_component_highlights(r,this.__wbg_ptr,W(t));var n=E().getInt32(r+4*0,!0),a=E().getInt32(r+4*1,!0);if(a)throw I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_net_highlights(t){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.wasmodbdataset_set_net_highlights(r,this.__wbg_ptr,W(t));var n=E().getInt32(r+4*0,!0),a=E().getInt32(r+4*1,!0);if(a)throw I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}toggle_component_highlight(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_toggle_component_highlight(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return n!==0}finally{u.__wbindgen_add_to_stack_pointer(16)}}toggle_net_highlight(t){try{const l=u.__wbindgen_add_to_stack_pointer(-16),s=xe(t,u.__wbindgen_export,u.__wbindgen_export2),o=pe;u.wasmodbdataset_toggle_net_highlight(l,this.__wbg_ptr,s,o);var n=E().getInt32(l+4*0,!0),a=E().getInt32(l+4*1,!0),r=E().getInt32(l+4*2,!0);if(r)throw I(a);return n!==0}finally{u.__wbindgen_add_to_stack_pointer(16)}}user_symbol_count(){return u.wasmodbdataset_user_symbol_count(this.__wbg_ptr)>>>0}}Symbol.dispose&&(wd.prototype[Symbol.dispose]=wd.prototype.free);function l1(){return u.activate()!==0}function s1(e,t){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe,o=xe(t,u.__wbindgen_export,u.__wbindgen_export2),i=pe;u.drop_webgpu_layer_cache(r,l,s,o,i);var n=E().getInt32(r+4*0,!0),a=E().getInt32(r+4*1,!0);if(a)throw I(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function Gg(e){try{const a=u.__wbindgen_add_to_stack_pointer(-16),r=xe(e,u.__wbindgen_export,u.__wbindgen_export2),l=pe;u.drop_webgpu_offscreen_cache(a,r,l);var t=E().getInt32(a+4*0,!0),n=E().getInt32(a+4*1,!0);if(n)throw I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function o1(e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe;u.get_webgpu_perf_stats(r,l,s);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function i1(e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe;u.parse_excellon_scene(r,l,s);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function c1(e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe;u.parse_gerber_scene(r,l,s);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function u1(e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe;u.parse_odb_features_scene(r,l,s);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function d1(e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),l=xe(e,u.__wbindgen_export,u.__wbindgen_export2),s=pe;u.parse_pgeom_scene(r,l,s);var t=E().getInt32(r+4*0,!0),n=E().getInt32(r+4*1,!0),a=E().getInt32(r+4*2,!0);if(a)throw I(n);return I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function Xg(e,t,n){const a=xe(e,u.__wbindgen_export,u.__wbindgen_export2),r=pe,l=u.render_webgpu_scene_with_view(a,r,W(t),W(n));return I(l)}function f1(e){try{const a=u.__wbindgen_add_to_stack_pointer(-16),r=xe(e,u.__wbindgen_export,u.__wbindgen_export2),l=pe;u.resize_webgpu_surface(a,r,l);var t=E().getInt32(a+4*0,!0),n=E().getInt32(a+4*1,!0);if(n)throw I(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function h1(){return{__proto__:null,"./wasm_viewer_bg.js":{__proto__:null,__wbg_Error_8c4e43fe74559d73:function(t,n){const a=Error(In(t,n));return W(a)},__wbg_String_eecc4a11987127d6:function(t,n){const a=String(y(n)),r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_Window_563bd2ea5e20327e:function(t){const n=y(t).Window;return W(n)},__wbg_WorkerGlobalScope_e695d6876d82e4fa:function(t){const n=y(t).WorkerGlobalScope;return W(n)},__wbg___wbindgen_bigint_get_as_i64_8fcf4ce7f1ca72a2:function(t,n){const a=y(n),r=typeof a=="bigint"?a:void 0;E().setBigInt64(t+8,We(r)?BigInt(0):r,!0),E().setInt32(t+0,!We(r),!0)},__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:function(t){const n=y(t),a=typeof n=="boolean"?n:void 0;return We(a)?16777215:a?1:0},__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(t,n){const a=Sd(y(n)),r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg___wbindgen_in_47fa6863be6f2f25:function(t,n){return y(t)in y(n)},__wbg___wbindgen_is_bigint_31b12575b56f32fc:function(t){return typeof y(t)=="bigint"},__wbg___wbindgen_is_function_0095a73b8b156f76:function(t){return typeof y(t)=="function"},__wbg___wbindgen_is_null_ac34f5003991759a:function(t){return y(t)===null},__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:function(t){const n=y(t);return typeof n=="object"&&n!==null},__wbg___wbindgen_is_string_cd444516edc5b180:function(t){return typeof y(t)=="string"},__wbg___wbindgen_is_undefined_9e4d92534c42d778:function(t){return y(t)===void 0},__wbg___wbindgen_jsval_eq_11888390b0186270:function(t,n){return y(t)===y(n)},__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:function(t,n){return y(t)==y(n)},__wbg___wbindgen_number_get_8ff4255516ccad3e:function(t,n){const a=y(n),r=typeof a=="number"?a:void 0;E().setFloat64(t+8,We(r)?0:r,!0),E().setInt32(t+0,!We(r),!0)},__wbg___wbindgen_string_get_72fb696202c56729:function(t,n){const a=y(n),r=typeof a=="string"?a:void 0;var l=We(r)?0:xe(r,u.__wbindgen_export,u.__wbindgen_export2),s=pe;E().setInt32(t+4,s,!0),E().setInt32(t+0,l,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(t,n){throw new Error(In(t,n))},__wbg__wbg_cb_unref_d9b87ff7982e3b21:function(t){y(t)._wbg_cb_unref()},__wbg_beginComputePass_0aa18bfccdf69741:function(t,n){const a=y(t).beginComputePass(y(n));return W(a)},__wbg_beginRenderPass_53ef815f41b28864:function(t,n){const a=y(t).beginRenderPass(y(n));return W(a)},__wbg_buffer_26d0910f3a5bc899:function(t){const n=y(t).buffer;return W(n)},__wbg_call_389efe28435a9388:function(){return da(function(t,n){const a=y(t).call(y(n));return W(a)},arguments)},__wbg_call_4708e0c13bdc8e95:function(){return da(function(t,n,a){const r=y(t).call(y(n),y(a));return W(r)},arguments)},__wbg_clearBuffer_ccef148cf9ae820f:function(t,n,a){y(t).clearBuffer(y(n),a)},__wbg_clearBuffer_e12c26bfd255cc00:function(t,n,a,r){y(t).clearBuffer(y(n),a,r)},__wbg_configure_44a29c6c4754af44:function(t,n){y(t).configure(y(n))},__wbg_copyBufferToBuffer_fda25f28a360b893:function(t,n,a,r,l,s){y(t).copyBufferToBuffer(y(n),a,y(r),l,s)},__wbg_copyBufferToTexture_441ec4783f46a140:function(t,n,a,r){y(t).copyBufferToTexture(y(n),y(a),y(r))},__wbg_copyExternalImageToTexture_89f962660b70a96f:function(t,n,a,r){y(t).copyExternalImageToTexture(y(n),y(a),y(r))},__wbg_copyTextureToBuffer_adba4c374bb3f154:function(t,n,a,r){y(t).copyTextureToBuffer(y(n),y(a),y(r))},__wbg_copyTextureToTexture_aa157cfda6a09746:function(t,n,a,r){y(t).copyTextureToTexture(y(n),y(a),y(r))},__wbg_createBindGroupLayout_e5ea24d36f8738cd:function(t,n){const a=y(t).createBindGroupLayout(y(n));return W(a)},__wbg_createBindGroup_532dcf2b1d1517a2:function(t,n){const a=y(t).createBindGroup(y(n));return W(a)},__wbg_createBuffer_68bbbb0ad2796954:function(t,n){const a=y(t).createBuffer(y(n));return W(a)},__wbg_createCommandEncoder_ffb9c73757fd784f:function(t,n){const a=y(t).createCommandEncoder(y(n));return W(a)},__wbg_createComputePipeline_561a4a1d7e15d99a:function(t,n){const a=y(t).createComputePipeline(y(n));return W(a)},__wbg_createPipelineLayout_f638db6fd667b6ec:function(t,n){const a=y(t).createPipelineLayout(y(n));return W(a)},__wbg_createQuerySet_3f3f140611ddd6e2:function(t,n){const a=y(t).createQuerySet(y(n));return W(a)},__wbg_createRenderBundleEncoder_648fed7a6cff9f0c:function(t,n){const a=y(t).createRenderBundleEncoder(y(n));return W(a)},__wbg_createRenderPipeline_5d836d188509f115:function(t,n){const a=y(t).createRenderPipeline(y(n));return W(a)},__wbg_createSampler_5d636601494930d6:function(t,n){const a=y(t).createSampler(y(n));return W(a)},__wbg_createShaderModule_9651f9e267678889:function(t,n){const a=y(t).createShaderModule(y(n));return W(a)},__wbg_createTexture_5066eb1c20d2a17a:function(t,n){const a=y(t).createTexture(y(n));return W(a)},__wbg_createView_0873fe69e39fb7e1:function(t,n){const a=y(t).createView(y(n));return W(a)},__wbg_destroy_a6a67ddd44990768:function(t){y(t).destroy()},__wbg_destroy_aa63504c83aafcdf:function(t){y(t).destroy()},__wbg_destroy_c13dd004df6ad4b1:function(t){y(t).destroy()},__wbg_dispatchWorkgroupsIndirect_0ff33fbd92c36452:function(t,n,a){y(t).dispatchWorkgroupsIndirect(y(n),a)},__wbg_dispatchWorkgroups_67069bd10c4f401e:function(t,n,a,r){y(t).dispatchWorkgroups(n>>>0,a>>>0,r>>>0)},__wbg_document_ee35a3d3ae34ef6c:function(t){const n=y(t).document;return We(n)?0:W(n)},__wbg_done_57b39ecd9addfe81:function(t){return y(t).done},__wbg_drawIndexedIndirect_d2f77a326e20788f:function(t,n,a){y(t).drawIndexedIndirect(y(n),a)},__wbg_drawIndexedIndirect_ee49d125c486cb17:function(t,n,a){y(t).drawIndexedIndirect(y(n),a)},__wbg_drawIndexed_88aca11dfdc2d177:function(t,n,a,r,l,s){y(t).drawIndexed(n>>>0,a>>>0,r>>>0,l,s>>>0)},__wbg_drawIndexed_c9a61ea0f89b53fa:function(t,n,a,r,l,s){y(t).drawIndexed(n>>>0,a>>>0,r>>>0,l,s>>>0)},__wbg_drawIndirect_8ff3489a5c8c662c:function(t,n,a){y(t).drawIndirect(y(n),a)},__wbg_drawIndirect_d955a377ff046f98:function(t,n,a){y(t).drawIndirect(y(n),a)},__wbg_draw_2ffb72300ee8cc2e:function(t,n,a,r,l){y(t).draw(n>>>0,a>>>0,r>>>0,l>>>0)},__wbg_draw_332a9c15636395ba:function(t,n,a,r,l){y(t).draw(n>>>0,a>>>0,r>>>0,l>>>0)},__wbg_end_3e5311324e67731f:function(t){y(t).end()},__wbg_end_c2f472aecb85259d:function(t){y(t).end()},__wbg_entries_58c7934c745daac7:function(t){const n=Object.entries(y(t));return W(n)},__wbg_error_7534b8e9a36f1ab4:function(t,n){let a,r;try{a=t,r=n,console.error(In(t,n))}finally{u.__wbindgen_export4(a,r,1)}},__wbg_error_d622e8e577addd73:function(t){const n=y(t).error;return W(n)},__wbg_executeBundles_b0e648db8dc1b716:function(t,n){y(t).executeBundles(y(n))},__wbg_features_3546fcef4ce4ecdc:function(t){const n=y(t).features;return W(n)},__wbg_features_d41a6de13773f2bd:function(t){const n=y(t).features;return W(n)},__wbg_finish_14a374457d14ecd4:function(t){const n=y(t).finish();return W(n)},__wbg_finish_381e236404f87d87:function(t,n){const a=y(t).finish(y(n));return W(a)},__wbg_finish_3c69a489f855d8b6:function(t,n){const a=y(t).finish(y(n));return W(a)},__wbg_finish_633c3004d2cdfa16:function(t){const n=y(t).finish();return W(n)},__wbg_getBindGroupLayout_419be41b4a0002b5:function(t,n){const a=y(t).getBindGroupLayout(n>>>0);return W(a)},__wbg_getBindGroupLayout_48a2c08f87001d6f:function(t,n){const a=y(t).getBindGroupLayout(n>>>0);return W(a)},__wbg_getContext_2966500392030d63:function(){return da(function(t,n,a){const r=y(t).getContext(In(n,a));return We(r)?0:W(r)},arguments)},__wbg_getContext_2a5764d48600bc43:function(){return da(function(t,n,a){const r=y(t).getContext(In(n,a));return We(r)?0:W(r)},arguments)},__wbg_getCurrentTexture_b103c75d72d87929:function(t){const n=y(t).getCurrentTexture();return W(n)},__wbg_getElementById_e34377b79d7285f6:function(t,n,a){const r=y(t).getElementById(In(n,a));return We(r)?0:W(r)},__wbg_getMappedRange_ad618ba2d1e3f591:function(t,n,a){const r=y(t).getMappedRange(n,a);return W(r)},__wbg_getPreferredCanvasFormat_d0d0494efb1ab417:function(t){const n=y(t).getPreferredCanvasFormat();return(y1.indexOf(n)+1||96)-1},__wbg_get_9b94d73e6221f75c:function(t,n){const a=y(t)[n>>>0];return W(a)},__wbg_get_b3ed3ad4be2bc8ac:function(){return da(function(t,n){const a=Reflect.get(y(t),y(n));return W(a)},arguments)},__wbg_get_d8db2ad31d529ff8:function(t,n){const a=y(t)[n>>>0];return We(a)?0:W(a)},__wbg_get_with_ref_key_6550b2c093d2eb18:function(t,n){const a=y(t)[y(n)];return W(a)},__wbg_gpu_e588d24cdee270c7:function(t){const n=y(t).gpu;return W(n)},__wbg_has_54425913d46d860c:function(t,n,a){return y(t).has(In(n,a))},__wbg_height_38750dc6de41ee75:function(t){return y(t).height},__wbg_height_9a49d61734f6cf36:function(t){return y(t).height},__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:function(t){let n;try{n=y(t)instanceof ArrayBuffer}catch{n=!1}return n},__wbg_instanceof_GpuAdapter_756c7c5930793c56:function(t){let n;try{n=y(t)instanceof GPUAdapter}catch{n=!1}return n},__wbg_instanceof_GpuCanvasContext_97084852a24cda42:function(t){let n;try{n=y(t)instanceof GPUCanvasContext}catch{n=!1}return n},__wbg_instanceof_GpuDeviceLostInfo_23dc505e0f4c6916:function(t){let n;try{n=y(t)instanceof GPUDeviceLostInfo}catch{n=!1}return n},__wbg_instanceof_GpuOutOfMemoryError_a10b029451767dba:function(t){let n;try{n=y(t)instanceof GPUOutOfMemoryError}catch{n=!1}return n},__wbg_instanceof_GpuValidationError_2d9aaa1f6d534392:function(t){let n;try{n=y(t)instanceof GPUValidationError}catch{n=!1}return n},__wbg_instanceof_HtmlCanvasElement_3f2f6e1edb1c9792:function(t){let n;try{n=y(t)instanceof HTMLCanvasElement}catch{n=!1}return n},__wbg_instanceof_Object_1c6af87502b733ed:function(t){let n;try{n=y(t)instanceof Object}catch{n=!1}return n},__wbg_instanceof_Performance_194d24c143832ec1:function(t){let n;try{n=y(t)instanceof Performance}catch{n=!1}return n},__wbg_instanceof_Uint8Array_9b9075935c74707c:function(t){let n;try{n=y(t)instanceof Uint8Array}catch{n=!1}return n},__wbg_instanceof_Window_ed49b2db8df90359:function(t){let n;try{n=y(t)instanceof Window}catch{n=!1}return n},__wbg_instanceof_WorkerGlobalScope_07b9d5514ff0156e:function(t){let n;try{n=y(t)instanceof WorkerGlobalScope}catch{n=!1}return n},__wbg_isArray_d314bb98fcf08331:function(t){return Array.isArray(y(t))},__wbg_isSafeInteger_bfbc7332a9768d2a:function(t){return Number.isSafeInteger(y(t))},__wbg_iterator_6ff6560ca1568e55:function(){return W(Symbol.iterator)},__wbg_label_595ec72f4fb05a87:function(t,n){const a=y(n).label,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_length_32ed9a279acd054c:function(t){return y(t).length},__wbg_length_35a7bace40f36eac:function(t){return y(t).length},__wbg_limits_00b1acc533d895ed:function(t){const n=y(t).limits;return W(n)},__wbg_limits_6b4a778fc459718c:function(t){const n=y(t).limits;return W(n)},__wbg_location_7552d240161ae611:function(t){const n=y(t).location;return W(n)},__wbg_location_df7ca06c93e51763:function(t){const n=y(t).location;return W(n)},__wbg_log_6b5ca2e6124b2808:function(t){console.log(y(t))},__wbg_lost_34c2b392ca3313a8:function(t){const n=y(t).lost;return W(n)},__wbg_mapAsync_77528428189fd95e:function(t,n,a,r){const l=y(t).mapAsync(n>>>0,a,r);return W(l)},__wbg_maxBindGroups_e0e2005bf277e29c:function(t){return y(t).maxBindGroups},__wbg_maxBindingsPerBindGroup_dca64e50cfa942bc:function(t){return y(t).maxBindingsPerBindGroup},__wbg_maxBufferSize_5d5aba3e80274c4c:function(t){return y(t).maxBufferSize},__wbg_maxColorAttachmentBytesPerSample_bb8c4bbc2e02d5ba:function(t){return y(t).maxColorAttachmentBytesPerSample},__wbg_maxColorAttachments_fc943e6b4aa801dd:function(t){return y(t).maxColorAttachments},__wbg_maxComputeInvocationsPerWorkgroup_25f50a6129b52ade:function(t){return y(t).maxComputeInvocationsPerWorkgroup},__wbg_maxComputeWorkgroupSizeX_10e229023642213e:function(t){return y(t).maxComputeWorkgroupSizeX},__wbg_maxComputeWorkgroupSizeY_6be9a12596cdad6a:function(t){return y(t).maxComputeWorkgroupSizeY},__wbg_maxComputeWorkgroupSizeZ_9e5a8c47db59725f:function(t){return y(t).maxComputeWorkgroupSizeZ},__wbg_maxComputeWorkgroupStorageSize_45bdd386bfb1a994:function(t){return y(t).maxComputeWorkgroupStorageSize},__wbg_maxComputeWorkgroupsPerDimension_01ead98ba0d8c05e:function(t){return y(t).maxComputeWorkgroupsPerDimension},__wbg_maxDynamicStorageBuffersPerPipelineLayout_3a1d53b00d9867ee:function(t){return y(t).maxDynamicStorageBuffersPerPipelineLayout},__wbg_maxDynamicUniformBuffersPerPipelineLayout_798c55e04b3ecff1:function(t){return y(t).maxDynamicUniformBuffersPerPipelineLayout},__wbg_maxInterStageShaderComponents_78cfa5433bf04819:function(t){return y(t).maxInterStageShaderComponents},__wbg_maxSampledTexturesPerShaderStage_60a854f17955c20f:function(t){return y(t).maxSampledTexturesPerShaderStage},__wbg_maxSamplersPerShaderStage_22d1858ad4d60b31:function(t){return y(t).maxSamplersPerShaderStage},__wbg_maxStorageBufferBindingSize_4c123b124dda3418:function(t){return y(t).maxStorageBufferBindingSize},__wbg_maxStorageBuffersPerShaderStage_cb0f610196e32663:function(t){return y(t).maxStorageBuffersPerShaderStage},__wbg_maxStorageTexturesPerShaderStage_eb5429b7737386f2:function(t){return y(t).maxStorageTexturesPerShaderStage},__wbg_maxTextureArrayLayers_7f64e10e81f65012:function(t){return y(t).maxTextureArrayLayers},__wbg_maxTextureDimension1D_25a39ba1a487f178:function(t){return y(t).maxTextureDimension1D},__wbg_maxTextureDimension2D_0ac15d35ef467425:function(t){return y(t).maxTextureDimension2D},__wbg_maxTextureDimension3D_88dad06c70e45e51:function(t){return y(t).maxTextureDimension3D},__wbg_maxUniformBufferBindingSize_8c156e8aff2a098d:function(t){return y(t).maxUniformBufferBindingSize},__wbg_maxUniformBuffersPerShaderStage_3ddf2d5726e7220c:function(t){return y(t).maxUniformBuffersPerShaderStage},__wbg_maxVertexAttributes_85b5eb12fe4fced9:function(t){return y(t).maxVertexAttributes},__wbg_maxVertexBufferArrayStride_1d940c152fb5cf61:function(t){return y(t).maxVertexBufferArrayStride},__wbg_maxVertexBuffers_cb33605226776560:function(t){return y(t).maxVertexBuffers},__wbg_message_82aca63a2754594a:function(t,n){const a=y(n).message,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_message_c8f868406260dbb1:function(t,n){const a=y(n).message,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_minStorageBufferOffsetAlignment_1088f401e9416c78:function(t){return y(t).minStorageBufferOffsetAlignment},__wbg_minUniformBufferOffsetAlignment_499665b117399a99:function(t){return y(t).minUniformBufferOffsetAlignment},__wbg_navigator_43be698ba96fc088:function(t){const n=y(t).navigator;return W(n)},__wbg_navigator_4478931f32ebca57:function(t){const n=y(t).navigator;return W(n)},__wbg_new_361308b2356cecd0:function(){const t=new Object;return W(t)},__wbg_new_3eb36ae241fe6f44:function(){const t=new Array;return W(t)},__wbg_new_8a6f238a6ece86ea:function(){const t=new Error;return W(t)},__wbg_new_b5d9e2fb389fef91:function(t,n){try{var a={a:t,b:n},r=(s,o)=>{const i=a.a;a.a=0;try{return p1(i,a.b,s,o)}finally{a.a=i}};const l=new Promise(r);return W(l)}finally{a.a=a.b=0}},__wbg_new_dca287b076112a51:function(){return W(new Map)},__wbg_new_dd2b680c8bf6ae29:function(t){const n=new Uint8Array(y(t));return W(n)},__wbg_new_from_slice_a3d2629dc1826784:function(t,n){const a=new Uint8Array(uu(t,n));return W(a)},__wbg_new_no_args_1c7c842f08d00ebb:function(t,n){const a=new Function(In(t,n));return W(a)},__wbg_new_with_byte_offset_and_length_aa261d9c9da49eb1:function(t,n,a){const r=new Uint8Array(y(t),n>>>0,a>>>0);return W(r)},__wbg_next_3482f54c49e8af19:function(){return da(function(t){const n=y(t).next();return W(n)},arguments)},__wbg_next_418f80d8f5303233:function(t){const n=y(t).next;return W(n)},__wbg_now_ebffdf7e580f210d:function(t){return y(t).now()},__wbg_origin_a9c891fa602b4d40:function(){return da(function(t,n){const a=y(n).origin,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},arguments)},__wbg_origin_e6e46e4fe7488d7e:function(t,n){const a=y(n).origin,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_popErrorScope_edc93dd0f448a5c0:function(t){const n=y(t).popErrorScope();return W(n)},__wbg_prototypesetcall_bdcdcc5842e4d77d:function(t,n,a){Uint8Array.prototype.set.call(uu(t,n),y(a))},__wbg_pushErrorScope_18298b29344c9d0f:function(t,n){y(t).pushErrorScope(_1[n])},__wbg_push_8ffdcb2063340ba5:function(t,n){return y(t).push(y(n))},__wbg_querySelectorAll_1283aae52043a951:function(){return da(function(t,n,a){const r=y(t).querySelectorAll(In(n,a));return W(r)},arguments)},__wbg_queueMicrotask_0aa0a927f78f5d98:function(t){const n=y(t).queueMicrotask;return W(n)},__wbg_queueMicrotask_5bb536982f78a56f:function(t){queueMicrotask(y(t))},__wbg_queue_c8d677144b5fc1d3:function(t){const n=y(t).queue;return W(n)},__wbg_reason_180db105dffbd51c:function(t){const n=y(t).reason;return(b1.indexOf(n)+1||3)-1},__wbg_requestAdapter_a39a5f697bf04d1b:function(t,n){const a=y(t).requestAdapter(y(n));return W(a)},__wbg_requestDevice_09a893eceaf71338:function(t,n){const a=y(t).requestDevice(y(n));return W(a)},__wbg_resolveQuerySet_cb73a5901f965971:function(t,n,a,r,l,s){y(t).resolveQuerySet(y(n),a>>>0,r>>>0,y(l),s>>>0)},__wbg_resolve_002c4b7d9d8f6b64:function(t){const n=Promise.resolve(y(t));return W(n)},__wbg_search_1b385e665c888780:function(){return da(function(t,n){const a=y(n).search,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},arguments)},__wbg_setBindGroup_2bc3cdb7b5fd543d:function(t,n,a){y(t).setBindGroup(n>>>0,y(a))},__wbg_setBindGroup_37888b649b0d48d2:function(t,n,a,r,l,s,o){y(t).setBindGroup(n>>>0,y(a),cu(r,l),s,o>>>0)},__wbg_setBindGroup_6b5ea9f3bcadfa9f:function(t,n,a){y(t).setBindGroup(n>>>0,y(a))},__wbg_setBindGroup_76a495defdde498f:function(t,n,a,r,l,s,o){y(t).setBindGroup(n>>>0,y(a),cu(r,l),s,o>>>0)},__wbg_setBindGroup_9beb498b55637c21:function(t,n,a){y(t).setBindGroup(n>>>0,y(a))},__wbg_setBindGroup_e39de9d193a7ceb6:function(t,n,a,r,l,s,o){y(t).setBindGroup(n>>>0,y(a),cu(r,l),s,o>>>0)},__wbg_setBlendConstant_7cac140c963a9b5a:function(t,n){y(t).setBlendConstant(y(n))},__wbg_setIndexBuffer_330351cc38a43d89:function(t,n,a,r,l){y(t).setIndexBuffer(y(n),Wo[a],r,l)},__wbg_setIndexBuffer_58b60f5726bf7e43:function(t,n,a,r,l){y(t).setIndexBuffer(y(n),Wo[a],r,l)},__wbg_setIndexBuffer_5b74d4dd90a2c2de:function(t,n,a,r){y(t).setIndexBuffer(y(n),Wo[a],r)},__wbg_setIndexBuffer_6b80b7fe969d3519:function(t,n,a,r){y(t).setIndexBuffer(y(n),Wo[a],r)},__wbg_setPipeline_7e68b7c7817e4fe5:function(t,n){y(t).setPipeline(y(n))},__wbg_setPipeline_97ccf1b76527774b:function(t,n){y(t).setPipeline(y(n))},__wbg_setPipeline_b6d8f788172b8330:function(t,n){y(t).setPipeline(y(n))},__wbg_setScissorRect_3d49675315e5e211:function(t,n,a,r,l){y(t).setScissorRect(n>>>0,a>>>0,r>>>0,l>>>0)},__wbg_setStencilReference_e804dad82d81ed90:function(t,n){y(t).setStencilReference(n>>>0)},__wbg_setVertexBuffer_1bbfef15594ff6fb:function(t,n,a,r){y(t).setVertexBuffer(n>>>0,y(a),r)},__wbg_setVertexBuffer_842c9332d2f6c4c8:function(t,n,a,r,l){y(t).setVertexBuffer(n>>>0,y(a),r,l)},__wbg_setVertexBuffer_868733126ee16523:function(t,n,a,r,l){y(t).setVertexBuffer(n>>>0,y(a),r,l)},__wbg_setVertexBuffer_df8e60c180575a72:function(t,n,a,r){y(t).setVertexBuffer(n>>>0,y(a),r)},__wbg_setViewport_6ef9c53815f4c00d:function(t,n,a,r,l,s,o){y(t).setViewport(n,a,r,l,s,o)},__wbg_set_1eb0999cf5d27fc8:function(t,n,a){const r=y(t).set(y(n),y(a));return W(r)},__wbg_set_25cf9deff6bf0ea8:function(t,n,a){y(t).set(y(n),a>>>0)},__wbg_set_3807d5f0bfc24aa7:function(t,n,a){y(t)[I(n)]=I(a)},__wbg_set_6cb8631f80447a67:function(){return da(function(t,n,a){return Reflect.set(y(t),y(n),y(a))},arguments)},__wbg_set_f43e577aea94465b:function(t,n,a){y(t)[n>>>0]=I(a)},__wbg_set_height_b386c0f603610637:function(t,n){y(t).height=n>>>0},__wbg_set_height_f21f985387070100:function(t,n){y(t).height=n>>>0},__wbg_set_onuncapturederror_70a99f37edd9e34a:function(t,n){y(t).onuncapturederror=y(n)},__wbg_set_width_7f07715a20503914:function(t,n){y(t).width=n>>>0},__wbg_set_width_d60bc4f2f20c56a4:function(t,n){y(t).width=n>>>0},__wbg_size_5434d001afd6e519:function(t){return y(t).size},__wbg_stack_0ed75d68575b0f3c:function(t,n){const a=y(n).stack,r=xe(a,u.__wbindgen_export,u.__wbindgen_export2),l=pe;E().setInt32(t+4,l,!0),E().setInt32(t+0,r,!0)},__wbg_static_accessor_GLOBAL_12837167ad935116:function(){const t=typeof global>"u"?null:global;return We(t)?0:W(t)},__wbg_static_accessor_GLOBAL_THIS_e628e89ab3b1c95f:function(){const t=typeof globalThis>"u"?null:globalThis;return We(t)?0:W(t)},__wbg_static_accessor_SELF_a621d3dfbb60d0ce:function(){const t=typeof self>"u"?null:self;return We(t)?0:W(t)},__wbg_static_accessor_WINDOW_f8727f0cf888e0bd:function(){const t=typeof window>"u"?null:window;return We(t)?0:W(t)},__wbg_submit_2be1c4af0a5b62a2:function(t,n){y(t).submit(y(n))},__wbg_then_0d9fe2c7b1857d32:function(t,n,a){const r=y(t).then(y(n),y(a));return W(r)},__wbg_then_b9e7b3b5f1a9e1b5:function(t,n){const a=y(t).then(y(n));return W(a)},__wbg_unmap_c1162e2b1ee3b140:function(t){y(t).unmap()},__wbg_usage_abeadd7ac4e9fac8:function(t){return y(t).usage},__wbg_valueOf_3c28600026e653c4:function(t){const n=y(t).valueOf();return W(n)},__wbg_value_0546255b415e96c1:function(t){const n=y(t).value;return W(n)},__wbg_warn_f7ae1b2e66ccb930:function(t){console.warn(y(t))},__wbg_width_5f66bde2e810fbde:function(t){return y(t).width},__wbg_width_f12394c19964e4bb:function(t){return y(t).width},__wbg_writeBuffer_2ff9c76b83fa9c59:function(t,n,a,r,l,s){y(t).writeBuffer(y(n),a,y(r),l,s)},__wbg_writeTexture_beb37a6e023d84a3:function(t,n,a,r,l){y(t).writeTexture(y(n),y(a),y(r),y(l))},__wbindgen_cast_0000000000000001:function(t,n){const a=Fg(t,n,u.__wasm_bindgen_func_elem_1727,g1);return W(a)},__wbindgen_cast_0000000000000002:function(t,n){const a=Fg(t,n,u.__wasm_bindgen_func_elem_2014,m1);return W(a)},__wbindgen_cast_0000000000000003:function(t){return W(t)},__wbindgen_cast_0000000000000004:function(t,n){const a=uu(t,n);return W(a)},__wbindgen_cast_0000000000000005:function(t,n){const a=In(t,n);return W(a)},__wbindgen_cast_0000000000000006:function(t){const n=BigInt.asUintN(64,t);return W(n)},__wbindgen_object_clone_ref:function(t){const n=y(t);return W(n)},__wbindgen_object_drop_ref:function(t){I(t)},__wbindgen_object_is_undefined:function(t){return y(t)===void 0}}}}function g1(e,t,n){u.__wasm_bindgen_func_elem_1637(e,t,W(n))}function m1(e,t,n){u.__wasm_bindgen_func_elem_2015(e,t,W(n))}function p1(e,t,n,a){u.__wasm_bindgen_func_elem_2899(e,t,W(n),W(a))}const b1=["unknown","destroyed"],_1=["validation","out-of-memory","internal"],Wo=["uint16","uint32"],y1=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8","bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb","etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm","astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"],Vg=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>u.__wbg_wasmcadencedataset_free(e>>>0,1)),qg=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>u.__wbg_wasmodbdataset_free(e>>>0,1));function W(e){Rs===Da.length&&Da.push(Da.length+1);const t=Rs;return Rs=Da[t],Da[t]=e,t}const $g=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>e.dtor(e.a,e.b));function Sd(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const r=e.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=e.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(e)){const r=e.length;let l="[";r>0&&(l+=Sd(e[0]));for(let s=1;s<r;s++)l+=", "+Sd(e[s]);return l+="]",l}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let a;if(n&&n.length>1)a=n[1];else return toString.call(e);if(a=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:a}function x1(e){e<132||(Da[e]=Rs,Rs=e)}function cu(e,t){return e=e>>>0,H_().subarray(e/4,e/4+t)}function uu(e,t){return e=e>>>0,js().subarray(e/1,e/1+t)}let jr=null;function E(){return(jr===null||jr.buffer.detached===!0||jr.buffer.detached===void 0&&jr.buffer!==u.memory.buffer)&&(jr=new DataView(u.memory.buffer)),jr}function In(e,t){return e=e>>>0,w1(e,t)}let ps=null;function H_(){return(ps===null||ps.byteLength===0)&&(ps=new Uint32Array(u.memory.buffer)),ps}let bs=null;function js(){return(bs===null||bs.byteLength===0)&&(bs=new Uint8Array(u.memory.buffer)),bs}function y(e){return Da[e]}function da(e,t){try{return e.apply(this,t)}catch(n){u.__wbindgen_export3(W(n))}}let Da=new Array(128).fill(void 0);Da.push(void 0,null,!0,!1);let Rs=Da.length;function We(e){return e==null}function Fg(e,t,n,a){const r={a:e,b:t,cnt:1,dtor:n},l=(...s)=>{r.cnt++;const o=r.a;r.a=0;try{return a(o,r.b,...s)}finally{r.a=o,l._wbg_cb_unref()}};return l._wbg_cb_unref=()=>{--r.cnt===0&&(r.dtor(r.a,r.b),r.a=0,$g.unregister(r))},$g.register(l,r,r),l}function I_(e,t){const n=t(e.length*4,4)>>>0;return H_().set(e,n/4),pe=e.length,n}function xe(e,t,n){if(n===void 0){const o=Bs.encode(e),i=t(o.length,1)>>>0;return js().subarray(i,i+o.length).set(o),pe=o.length,i}let a=e.length,r=t(a,1)>>>0;const l=js();let s=0;for(;s<a;s++){const o=e.charCodeAt(s);if(o>127)break;l[r+s]=o}if(s!==a){s!==0&&(e=e.slice(s)),r=n(r,a,a=s+e.length*3,1)>>>0;const o=js().subarray(r+s,r+a),i=Bs.encodeInto(e,o);s+=i.written,r=n(r,a,s,1)>>>0}return pe=s,r}function I(e){const t=y(e);return x1(e),t}let hi=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});hi.decode();const v1=2146435072;let du=0;function w1(e,t){return du+=t,du>=v1&&(hi=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),hi.decode(),du=t),hi.decode(js().subarray(e,e+t))}const Bs=new TextEncoder;"encodeInto"in Bs||(Bs.encodeInto=function(e,t){const n=Bs.encode(e);return t.set(n),{read:e.length,written:n.length}});let pe=0,u;function S1(e,t){return u=e.exports,jr=null,ps=null,bs=null,u.__wbindgen_start(),u}async function C1(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.ok&&n(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const a=await e.arrayBuffer();return await WebAssembly.instantiate(a,t)}else{const a=await WebAssembly.instantiate(e,t);return a instanceof WebAssembly.Instance?{instance:a,module:e}:a}function n(a){switch(a){case"basic":case"cors":case"default":return!0}return!1}}async function Y_(e){if(u!==void 0)return u;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("/coco-viewer-pages/assets/wasm_viewer_bg-DCF75StB.wasm",import.meta.url));const t=h1();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:a}=await C1(await e,t);return S1(n)}function E1(){const[e,t]=h.useState("loading"),[n,a]=h.useState(null);h.useEffect(()=>{let p=!0;return Y_().then(()=>{p&&t("ready")}).catch(g=>{p&&(t("error"),a(g instanceof Error?g:new Error(String(g))))}),()=>{p=!1}},[]);const r=h.useCallback(p=>{if(e!=="ready")throw new Error("WASM not ready");return c1(p)},[e]),l=h.useCallback(p=>{if(e!=="ready")throw new Error("WASM not ready");return d1(p)},[e]),s=h.useCallback(p=>{if(e!=="ready")throw new Error("WASM not ready");return i1(p)},[e]),o=h.useCallback(p=>{if(e!=="ready")throw new Error("WASM not ready");return u1(p)},[e]),i=h.useCallback((p,g)=>{if(e!=="ready")throw new Error("WASM not ready");return new wd(p,g)},[e]),d=h.useCallback((p,g)=>{if(e!=="ready")throw new Error("WASM not ready");return new vd(p,g)},[e]);return{status:e,error:n,parseGerber:r,parsePgeom:l,parseExcellon:s,parseOdbFeatures:o,createOdbDataset:i,createCadenceDataset:d}}const fu=["#8ab4ff","#ff6b6b","#51cf66","#ffd43b","#ff8787","#69db7c","#74c0fc","#ffa94d","#da77f2","#22b8cf"];function _s(e){for(const t of fu)if(!e.includes(t))return t;return fu[e.length%fu.length]}function M1(){return`layer-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function N1(){const[e,t]=h.useState([]),[n,a]=h.useState(null),[r,l]=h.useState(new Set),s=h.useCallback((v,S,N)=>{const z=M1(),R=e.map(P=>P.color).filter(Boolean),K=_s(R),F={id:z,name:v,kind:S,status:"pending",rawText:N,shapes:null,revision:1,color:K};return t(P=>[...P,F]),l(P=>new Set(P).add(z)),z},[e]),o=h.useCallback(v=>{t(S=>S.filter(N=>N.id!==v)),l(S=>{const N=new Set(S);return N.delete(v),N}),a(S=>S===v?null:S)},[]),i=h.useCallback((v,S)=>{t(N=>N.map(z=>z.id===v?{...z,...S}:z))},[]),d=h.useCallback(v=>{a(v)},[]),p=h.useCallback(v=>{l(S=>{const N=new Set(S);return N.has(v)?N.delete(v):N.add(v),N})},[]),g=h.useCallback((v,S)=>{l(N=>{const z=new Set(N);return S?z.add(v):z.delete(v),z})},[]),m=h.useCallback(v=>{l(v?new Set(e.map(S=>S.id)):new Set)},[e]),x=h.useCallback((v,S)=>{i(v,{color:S})},[i]),L=h.useCallback((v,S,N)=>{i(v,{status:S,errorMessage:N})},[i]),k=h.useCallback((v,S,N)=>{i(v,{shapes:S,sceneJson:N,status:"parsed"})},[i]),U=h.useCallback(()=>{t([]),a(null),l(new Set)},[]),b=h.useCallback(v=>e.find(S=>S.id===v),[e]),_=h.useCallback(v=>{const S=v.map(R=>({...R,revision:Number.isFinite(R.revision)?R.revision:1}));t([...S]);const N=S.find(R=>R.status==="parsed")??null,z=new Set;N&&z.add(N.id),l(z),a((N==null?void 0:N.id)??null)},[]);return{layers:e,activeLayerId:n,visibleLayerIds:r,addLayer:s,removeLayer:o,updateLayer:i,selectLayer:d,toggleVisibility:p,setVisibility:g,setAllVisible:m,setLayerColor:x,setLayerStatus:L,setLayerShapes:k,clearLayers:U,getLayerById:b,replaceOdbLayers:_}}const us=[.01,.02,.05,.1,.2,.5,1,2,5,10,25,50,100],A1=64,T1="rgba(255, 255, 255, 0.22)",k1="rgba(138, 180, 255, 0.65)",D1=.3,L1=1.1,O1=2,j1=[3,3],R1=null,Wg=500;function B1(e,t,n){if(!Number.isFinite(n)||n<=0)return 0;if(Math.max(Math.min(e,t),0)<=0)return us[us.length-1]||0;for(const r of us){if(r<=0)continue;if(r*n>=A1)return r}return us[us.length-1]||0}function z1(e,t,n,a){if(!(n>0))return;const{minX:r,maxX:l,minY:s,maxY:o}=t,i=Math.floor(r/n)*n,d=Math.ceil(l/n)*n,p=Math.floor(s/n)*n,g=Math.ceil(o/n)*n,m=n*.001,x=k=>Math.round(k*a)/a,L=k=>{e.strokeStyle=k?k1:T1;const U=Math.max(O1,k?L1:D1);e.lineWidth=U/a;const b=k?R1:j1;b&&b.length>0?e.setLineDash(b.map(_=>_/a)):e.setLineDash([])};e.save();for(let k=0;k<=Wg;k+=1){const U=i+k*n;if(U>d+n*.5)break;const b=x(U);e.beginPath(),e.moveTo(b,s),e.lineTo(b,o);const _=Math.abs(U)<m;L(_),e.stroke()}for(let k=0;k<=Wg;k+=1){const U=p+k*n;if(U>g+n*.5)break;const b=x(U);e.beginPath(),e.moveTo(r,b),e.lineTo(l,b);const _=Math.abs(U)<m;L(_),e.stroke()}e.restore()}const U1={lineStroke:"rgba(138, 180, 255, 0.72)",arcStroke:"rgba(138, 180, 255, 0.72)",circleFill:"rgba(138, 180, 255, 0.28)",rectFill:"rgba(138, 180, 255, 0.22)",polygonFill:"rgba(138, 180, 255, 0.2)",surfaceFill:"rgba(138, 180, 255, 0.16)"},H1={lineStroke:.72,arcStroke:.72,circleFill:.28,rectFill:.22,polygonFill:.2,surfaceFill:.16},I1={lineStroke:.95,arcStroke:.95,circleFill:.6,rectFill:.55,polygonFill:.5,surfaceFill:.45};function G_(e,t){const n=e.replace("#",""),a=parseInt(n.substring(0,2),16),r=parseInt(n.substring(2,4),16),l=parseInt(n.substring(4,6),16),s={...H1,...t};return{lineStroke:`rgba(${a}, ${r}, ${l}, ${s.lineStroke})`,arcStroke:`rgba(${a}, ${r}, ${l}, ${s.arcStroke})`,circleFill:`rgba(${a}, ${r}, ${l}, ${s.circleFill})`,rectFill:`rgba(${a}, ${r}, ${l}, ${s.rectFill})`,polygonFill:`rgba(${a}, ${r}, ${l}, ${s.polygonFill})`,surfaceFill:`rgba(${a}, ${r}, ${l}, ${s.surfaceFill})`}}function Y1(e){const t=e.trim().toLowerCase();if(!/^#[0-9a-f]{6}$/.test(t))return e;const n=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16),s=Math.round(.299*n+.587*a+.114*r).toString(16).padStart(2,"0");return`#${s}${s}${s}`}function X_(e,t,n,a,r,l={}){var re;const{centerOrigin:s=!1}=l,o=a.maxX-a.minX,i=a.maxY-a.minY,d=e.width-r*2,p=e.height-r*2,g=Math.min(d/o,p/i),m=Math.max(0,d-o*g),x=Math.max(0,p-i*g),L=s?e.width/2:r+m/2-a.minX*g,k=s?e.height/2:r+x/2-a.minY*g,U=l.backgroundColor??"#050c18";t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),t.fillStyle=U,t.fillRect(0,0,e.width,e.height),t.restore(),t.save(),t.setTransform(g,0,0,-g,L,s?k:e.height-k),t.fillStyle=U,t.fillRect(a.minX-10,a.minY-10,o+20,i+20);const b=B1(o,i,g),_=l.gridEnabled??!0;if(_&&b>0){const se=F1(e,g,L,k,s);z1(t,se,b,g)}const v=l.layerColor,S=l.colorResolver,N=l.highlightResolver,z=l.dimNonHighlighted??!1,R=[],K=new Set;N&&n.forEach(se=>{const Ce=N(se);Ce&&(R.push({shape:se,color:Ce}),K.add(se))});const F=z&&R.length>0;if(n.forEach(se=>{if(K.has(se))return;const Ce=(S==null?void 0:S(se))??v;if(F){const Ge=Ce&&Y1(Ce);hu(t,se.geometry,Ge??void 0,void 0,g)}else hu(t,se.geometry,Ce??void 0,void 0,g)}),R.length){const se=Math.min(Math.max(.45/g,.0025),.03);for(const{shape:Ce,color:Ge}of R){const Se=G_(Ge,I1);t.save(),hu(t,Ce.geometry,void 0,Se,g),G1(t,Ce.geometry,Se.lineStroke,se),t.restore()}}t.restore();const P=(re=e.parentElement)==null?void 0:re.querySelector(".renderer-watermark");return P&&P.remove(),t.save(),t.fillStyle="rgba(138, 180, 255, 0.6)",t.font="bold 14px system-ui, sans-serif",t.textAlign="right",t.textBaseline="bottom",t.fillText("Canvas 2D",e.width-10,e.height-10),t.restore(),{scale:g,translateX:L,translateY:k,bounds:a,padding:r,gridSpacing:_?b:null}}function hu(e,t,n,a,r){const l=a??(n?G_(n):U1),s=r&&r>0?1/r:0;switch(t.type){case"line":e.save(),e.beginPath(),e.lineWidth=Math.max(t.width,s),e.lineCap="round",e.strokeStyle=l.lineStroke,e.moveTo(t.start.x,t.start.y),e.lineTo(t.end.x,t.end.y),e.stroke(),e.restore();break;case"arc":e.save(),e.beginPath(),e.lineWidth=Math.max(t.width,s),e.lineCap="round",e.strokeStyle=l.arcStroke,e.moveTo(t.start.x,t.start.y),$l(e,t.start,t.end,t.center,t.clockwise),e.stroke(),e.restore();break;case"circle":e.save(),e.beginPath(),e.arc(t.center.x,t.center.y,t.radius,0,Math.PI*2),e.fillStyle=l.circleFill,e.fill(),e.restore();break;case"rect":e.save(),e.beginPath(),e.rect(t.leftBottom.x,t.leftBottom.y,t.rightTop.x-t.leftBottom.x,t.rightTop.y-t.leftBottom.y),e.fillStyle=l.rectFill,e.fill(),e.restore();break;case"polygon":q1(e,t.path,!1,l);break;case"surface":X1(e,t.polygons,l);break}}function G1(e,t,n,a){switch(e.save(),e.strokeStyle=n,e.lineJoin="round",e.lineCap="round",t.type){case"line":e.beginPath(),e.lineWidth=Math.max(t.width+a*.25,t.width),e.moveTo(t.start.x,t.start.y),e.lineTo(t.end.x,t.end.y),e.stroke();break;case"arc":e.beginPath(),e.lineWidth=Math.max(t.width+a*.25,t.width),e.moveTo(t.start.x,t.start.y),$l(e,t.start,t.end,t.center,t.clockwise),e.stroke();break;case"circle":e.beginPath(),e.lineWidth=a,e.arc(t.center.x,t.center.y,t.radius,0,Math.PI*2),e.stroke();break;case"rect":e.beginPath(),e.lineWidth=a,e.rect(t.leftBottom.x,t.leftBottom.y,t.rightTop.x-t.leftBottom.x,t.rightTop.y-t.leftBottom.y),e.stroke();break;case"polygon":e.lineWidth=a,$1(e,t.path);break;case"surface":e.lineWidth=a,V1(e,t.polygons);break}e.restore()}function X1(e,t,n){e.save(),e.beginPath(),t.forEach(a=>{let r=a.start;e.moveTo(r.x,r.y),a.segments.forEach(l=>{l.kind==="line"?(e.lineTo(l.to.x,l.to.y),r=l.to):r=$l(e,r,l.to,l.center,l.clockwise)}),e.closePath()}),e.fillStyle=n.surfaceFill,e.fill("evenodd"),e.restore()}function V1(e,t){e.beginPath(),t.forEach(n=>{let a=n.start;e.moveTo(a.x,a.y),n.segments.forEach(r=>{r.kind==="line"?(e.lineTo(r.to.x,r.to.y),a=r.to):a=$l(e,a,r.to,r.center,r.clockwise)}),e.closePath()}),e.stroke()}function q1(e,t,n,a){e.save(),e.beginPath();let r=t.start;e.moveTo(r.x,r.y),t.segments.forEach(l=>{l.kind==="line"?(e.lineTo(l.to.x,l.to.y),r=l.to):r=$l(e,r,l.to,l.center,l.clockwise)}),e.closePath(),e.fillStyle=a.polygonFill,e.fill("evenodd"),e.restore()}function $1(e,t){e.beginPath();let n=t.start;e.moveTo(n.x,n.y),t.segments.forEach(a=>{a.kind==="line"?(e.lineTo(a.to.x,a.to.y),n=a.to):n=$l(e,n,a.to,a.center,a.clockwise)}),e.closePath(),e.stroke()}function $l(e,t,n,a,r){const l=Math.hypot(t.x-a.x,t.y-a.y),s=Math.atan2(t.y-a.y,t.x-a.x);let o=Math.atan2(n.y-a.y,n.x-a.x);return Math.hypot(t.x-n.x,t.y-n.y)<=1e-9?o=s+(r?-Math.PI*2:Math.PI*2):r&&o>s?o-=Math.PI*2:!r&&o<s&&(o+=Math.PI*2),e.arc(a.x,a.y,l,s,o,r),n}function F1(e,t,n,a,r){const l=[{cx:0,cy:0},{cx:e.width,cy:0},{cx:e.width,cy:e.height},{cx:0,cy:e.height}],s=r?a:e.height-a,o=l.map(({cx:m,cy:x})=>{const L=(m-n)/t,k=-(x-s)/t;return{x:L,y:k}});let i=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY;for(const m of o)i=Math.min(i,m.x),d=Math.max(d,m.x),p=Math.min(p,m.y),g=Math.max(g,m.y);return{minX:i,maxX:d,minY:p,maxY:g}}function qr(e){if(!e.length)return null;let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const l=o=>{t=Math.min(t,o.x),n=Math.max(n,o.x),a=Math.min(a,o.y),r=Math.max(r,o.y)};if(e.forEach(o=>q_(o.geometry,l)),!isFinite(t)||!isFinite(a))return null;const s=.001;if(n-t<s){const o=(n+t)/2;t=o-s/2,n=o+s/2}if(r-a<s){const o=(r+a)/2;a=o-s/2,r=o+s/2}return{minX:t,maxX:n,minY:a,maxY:r}}function V_(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return q_(e,s=>{t=Math.min(t,s.x),n=Math.max(n,s.x),a=Math.min(a,s.y),r=Math.max(r,s.y)}),!isFinite(t)||!isFinite(a)?{minX:0,maxX:0,minY:0,maxY:0}:{minX:t,maxX:n,minY:a,maxY:r}}function q_(e,t){switch(e.type){case"line":t(e.start),t(e.end),W1(t,e.start,e.end,e.width);break;case"arc":t(e.start),t(e.end),$_(t,e.start,e.end,e.center,e.clockwise);break;case"circle":Q1(t,e.center,e.radius);break;case"rect":t(e.leftBottom),t(e.rightTop);break;case"polygon":Qg(e.path,t);break;case"surface":e.polygons.forEach(n=>Qg(n,t));break}}function W1(e,t,n,a){const r=Math.max(0,a/2);if(!r)return;[{x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y+r},{x:n.x-r,y:n.y-r},{x:n.x+r,y:n.y+r}].forEach(e)}function Qg(e,t){t(e.start);let n=e.start;e.segments.forEach(a=>{a.kind==="line"?(t(a.to),n=a.to):(t(a.to),$_(t,n,a.to,a.center,a.clockwise),n=a.to)})}function Q1(e,t,n){e({x:t.x+n,y:t.y}),e({x:t.x-n,y:t.y}),e({x:t.x,y:t.y+n}),e({x:t.x,y:t.y-n})}function $_(e,t,n,a,r){const l=Math.hypot(t.x-a.x,t.y-a.y);if(l<=0){e(t),e(n);return}const s=Math.atan2(t.y-a.y,t.x-a.x);let i=Math.atan2(n.y-a.y,n.x-a.x)-s;r&&i>=0&&(i-=Math.PI*2),!r&&i<=0&&(i+=Math.PI*2),[0,Math.PI/2,Math.PI,3*Math.PI/2].forEach(d=>{F_(d,s,i)&&e({x:a.x+l*Math.cos(d),y:a.y+l*Math.sin(d)})}),e(t),e(n)}function F_(e,t,n){let a=e-t;for(;a<0;)a+=Math.PI*2;for(;a>=Math.PI*2;)a-=Math.PI*2;return n>=0?a<=n:a>=Math.PI*2+n}function sn(e){const n=e.maxX-e.minX,a=e.maxY-e.minY;if(n<.001){const r=(e.minX+e.maxX)/2;e.minX=r-.001/2,e.maxX=r+.001/2}if(a<.001){const r=(e.minY+e.maxY)/2;e.minY=r-.001/2,e.maxY=r+.001/2}return e}function La(e,t){const n=t.getBoundingClientRect(),a=n.width?t.width/n.width:1,r=n.height?t.height/n.height:1,l=Math.min(Math.max(e.clientX-n.left,0),n.width),s=Math.min(Math.max(e.clientY-n.top,0),n.height);return{x:l*a,y:s*r}}function ha(e,t,n,a){if(!a)return null;const r=n.height-a.translateY,l=(e-a.translateX)/a.scale,s=(r-t)/a.scale;return{x:l,y:s}}function W_(e,t,n){let a=null;const r=Math.max(0,n);for(const l of e){const s=r+a2(l.geometry),o=V_(l.geometry);if(!r2(t,o,s))continue;const i=Z1(l.geometry,t,r);if(i!==null&&(!a||i<a.distance)&&(a={shape:l,distance:i},i<=0))break}return a}function Z1(e,t,n){switch(e.type){case"line":return K1(t,e.start,e.end,e.width,n);case"arc":return P1(t,e.start,e.end,e.center,e.clockwise,e.width,n);case"circle":return J1(t,e.center,e.radius,n);case"rect":return e2(t,e.leftBottom,e.rightTop,n);case"polygon":return t2(t,e.path,n);case"surface":return n2(t,e.polygons,n);default:return null}}function K1(e,t,n,a,r){const l=Q_(e,t,n),s=r+Math.max(0,a/2);return l<=s?l:null}function P1(e,t,n,a,r,l,s){const o=l2(e,t,n,a,r),i=s+Math.max(0,l/2);return o<=i?o:null}function J1(e,t,n,a){const l=Math.hypot(e.x-t.x,e.y-t.y)-n;return l<=a?Math.max(0,l):null}function e2(e,t,n,a){const r=Math.min(t.x,n.x),l=Math.max(t.x,n.x),s=Math.min(t.y,n.y),o=Math.max(t.y,n.y),i=Math.max(r-e.x,0,e.x-l),d=Math.max(s-e.y,0,e.y-o),p=Math.hypot(i,d);return i===0&&d===0?0:p<=a?p:null}function t2(e,t,n){const a=K_(t),{inside:r,distance:l}=P_(e,a);return r?0:l<=n?l:null}function n2(e,t,n){let a=!1,r=Number.POSITIVE_INFINITY;for(const l of t){const s=K_(l),{inside:o,distance:i}=P_(e,s);o&&(a=!a),i<r&&(r=i)}return a?0:r<=n?r:null}function a2(e){return e.type==="line"||e.type==="arc"?Math.max(0,e.width/2):0}function r2(e,t,n){return e.x>=t.minX-n&&e.x<=t.maxX+n&&e.y>=t.minY-n&&e.y<=t.maxY+n}function Q_(e,t,n){const a=n.x-t.x,r=n.y-t.y,l=a*a+r*r;if(l===0)return Math.hypot(e.x-t.x,e.y-t.y);const s=((e.x-t.x)*a+(e.y-t.y)*r)/l,o=Math.min(1,Math.max(0,s)),i=t.x+o*a,d=t.y+o*r;return Math.hypot(e.x-i,e.y-d)}function l2(e,t,n,a,r){const l=Math.hypot(t.x-a.x,t.y-a.y);if(l<=0)return Math.hypot(e.x-t.x,e.y-t.y);const s=Math.atan2(t.y-a.y,t.x-a.x),o=Math.atan2(n.y-a.y,n.x-a.x),i=Z_(s,o,r),d=Math.atan2(e.y-a.y,e.x-a.x),p=Math.abs(Math.hypot(e.x-a.x,e.y-a.y)-l);return F_(d,s,i)?p:Math.min(Math.hypot(e.x-t.x,e.y-t.y),Math.hypot(e.x-n.x,e.y-n.y))}function Z_(e,t,n){const a=Math.PI*2;let r=t-e;return n&&r>=0&&(r-=a),!n&&r<=0&&(r+=a),r}function K_(e){const t=[e.start];let n=e.start;const a=Math.PI/18;return e.segments.forEach(r=>{if(r.kind==="line"){t.push(r.to),n=r.to;return}const l=Math.hypot(n.x-r.center.x,n.y-r.center.y);if(l<=0){t.push(r.to),n=r.to;return}const s=Math.atan2(n.y-r.center.y,n.x-r.center.x),o=Math.atan2(r.to.y-r.center.y,r.to.x-r.center.x),i=Z_(s,o,r.clockwise),d=Math.max(2,Math.ceil(Math.abs(i)/a));for(let p=1;p<d;p+=1){const g=s+i*p/d;t.push({x:r.center.x+l*Math.cos(g),y:r.center.y+l*Math.sin(g)})}t.push(r.to),n=r.to}),t}function P_(e,t){let n=!1,a=Number.POSITIVE_INFINITY;if(t.length<2)return{inside:!1,distance:a};for(let r=0;r<t.length;r+=1){const l=t[r],s=t[(r+1)%t.length];a=Math.min(a,Q_(e,l,s)),l.y>e.y!=s.y>e.y&&e.x<(s.x-l.x)*(e.y-l.y)/(s.y-l.y)+l.x&&(n=!n)}return{inside:n,distance:a}}function Cd(e,t=.1){const n=e.maxX-e.minX,a=e.maxY-e.minY,r=(e.minX+e.maxX)/2,l=(e.minY+e.maxY)/2,o=Math.max(n,a)/2*(1+t);return{minX:r-o,maxX:r+o,minY:l-o,maxY:l+o}}function s2(e){const{canvas:t,resetButton:n,basePadding:a=20,centerOrigin:r=!1,onMouseMove:l,gridEnabled:s=!0,onGridUpdate:o,layerColor:i,layerColorResolver:d,highlightResolver:p,onPick:g,pickTolerancePx:m=6,backgroundColor:x,dimNonHighlighted:L=!1}=e,k=t.getContext("2d"),U=document.createElement("div");U.className="selection-overlay",U.style.display="none",U.style.position="fixed",U.style.pointerEvents="none",document.body.appendChild(U);let b=[],_=null,v=null,S=null,N=s,z=i,R=d,K=p,F=x,P=L;const re={active:!1,start:{x:0,y:0},current:{x:0,y:0},clientStart:{x:0,y:0},clientCurrent:{x:0,y:0}},se={mode:"none",start:{x:0,y:0},last:{x:0,y:0},dragged:!1};function Ce(A){b=A,_=qr(b),_&&r&&(_=o2(_)),Se(!0),ne()}function Ge(){b=[],_=null,v=null,S=null,Y(),o==null||o(N,null),ne()}function Se(A=!1){if(!k||!b.length){Y(),S=null;return}(A||!_)&&(_=qr(b));const B=v??_;if(!B){Y();return}const D=X_(t,k,b,B,v?10:a,{centerOrigin:r,gridEnabled:N,layerColor:z,colorResolver:R??void 0,highlightResolver:K,backgroundColor:F,dimNonHighlighted:P});S=D,o==null||o(N,D.gridSpacing??null),U.style.display="none"}function Y(){k&&(k.save(),k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,t.width,t.height),k.restore(),U.style.display="none")}function ne(){n&&(n.disabled=!b.length||v===null)}function oe(A){if(A.button!==0||!b.length||!S)return;const B=La(A,t);se.start={...B},se.last={...B},se.dragged=!1,A.shiftKey?(se.mode="zoom",re.active=!0,re.start={...B},re.current={...B},re.clientStart={x:A.clientX,y:A.clientY},re.clientCurrent={x:A.clientX,y:A.clientY},U.style.display="block",je()):(se.mode="pan",re.active=!1,U.style.display="none",t.classList.add("is-panning")),A.preventDefault()}function he(A){if(se.mode==="none")return;const B=La(A,t);if(se.mode==="zoom"){if(!re.active)return;re.current={...B},re.clientCurrent={x:A.clientX,y:A.clientY},je(),A.preventDefault();return}if(!S)return;const V=Math.hypot(B.x-se.start.x,B.y-se.start.y);if(!se.dragged){if(V<3)return;se.dragged=!0,se.last={...B};return}const D=B.x-se.last.x,G=B.y-se.last.y;se.last={...B};const H=S.scale;v=v??{...S.bounds};const O=v.maxX-v.minX,ie=v.maxY-v.minY,ae=O*H,ge=ie*H,we=D/ae*O,de=G/ge*ie;v={minX:v.minX-we,maxX:v.maxX-we,minY:v.minY+de,maxY:v.maxY+de},Se(!1),ne()}function Le(A){const B=se.mode==="pan";se.mode="none",t.classList.remove("is-panning"),re.active?(re.active=!1,U.style.display="none",Pe()):B&&!se.dragged&&et(A),se.dragged=!1}function Ke(A){if(!b.length||!S)return;const B=v??S.bounds,V=La(A,t),D=ha(V.x,V.y,t,S)??{x:(B.minX+B.maxX)/2,y:(B.minY+B.maxY)/2},O=A.deltaMode===1?A.deltaY*32:A.deltaMode===2?A.deltaY*320:A.deltaY,ie=Math.exp(-O*.001),ae=Math.min(Math.max(ie,.2),5),ge=D.x-B.minX,we=B.maxX-D.x,de=D.y-B.minY,ke=B.maxY-D.y;v=sn({minX:D.x-ge/ae,maxX:D.x+we/ae,minY:D.y-de/ae,maxY:D.y+ke/ae}),Se(!1),ne(),A.preventDefault()}function Pe(){if(!S)return;const A=Math.abs(re.current.x-re.start.x),B=Math.abs(re.current.y-re.start.y);if(A<5||B<5){ne();return}const V=ha(re.start.x,re.start.y,t,S),D=ha(re.current.x,re.current.y,t,S);if(!V||!D){ne();return}v=sn({minX:Math.min(V.x,D.x),maxX:Math.max(V.x,D.x),minY:Math.min(V.y,D.y),maxY:Math.max(V.y,D.y)}),Se(!1),ne()}function et(A){if(!g)return;if(!S||!b.length){g(null);return}const B=t.getBoundingClientRect();if(!(A.clientX>=B.left&&A.clientX<=B.right&&A.clientY>=B.top&&A.clientY<=B.bottom))return;const D=La(A,t),G=ha(D.x,D.y,t,S);if(!G)return;const H=m/S.scale,O=W_(b,G,H);g((O==null?void 0:O.shape)??null)}function je(){if(!re.active)return;const A=Math.min(re.clientStart.x,re.clientCurrent.x),B=Math.min(re.clientStart.y,re.clientCurrent.y),V=Math.abs(re.clientCurrent.x-re.clientStart.x),D=Math.abs(re.clientCurrent.y-re.clientStart.y);U.style.display="block",U.style.left=`${A}px`,U.style.top=`${B}px`,U.style.width=`${V}px`,U.style.height=`${D}px`}function Ae(A){if(!S||!l)return;const B=La(A,t),V=ha(B.x,B.y,t,S);V&&l(V.x,V.y)}t.addEventListener("mousedown",oe),t.addEventListener("mousemove",he),t.addEventListener("mousemove",Ae),window.addEventListener("mouseup",Le),t.addEventListener("wheel",Ke,{passive:!1});function Je(A){N=A,Se(!1)}function jt(A){z=A,Se(!1)}function xt(A){R=A??void 0,Se(!1)}function vt(A){K=A??void 0,Se(!1)}function ft(A){F=A,Se(!1)}function Re(A){P=A,Se(!1)}function ee(){return S?{...S,bounds:{...S.bounds}}:null}function M(){return b.length?v?{...v}:S?{...S.bounds}:_?{..._}:null:null}function X(A){v=sn(A),Se(!1),ne()}return{rootCanvas:t,setShapes:Ce,clear:Ge,redraw:()=>Se(!1),hasShapes:()=>b.length>0,getViewState:ee,getViewBounds:M,setGridEnabled:Je,setLayerColor:jt,setLayerColorResolver:xt,setHighlightResolver:vt,setBackgroundColor:ft,setDimNonHighlighted:Re,zoomToBounds:X}}function o2(e){const t=Math.max(Math.abs(e.minX),Math.abs(e.maxX)),n=Math.max(Math.abs(e.minY),Math.abs(e.maxY));return{minX:-t,maxX:t,minY:-n,maxY:n}}const i2="#050c18";function c2(e,t={}){const{gridEnabled:n=!0,onMouseMove:a,isDark:r=!0,highlightResolver:l,onPick:s,dimNonHighlighted:o=!1,onGridUpdate:i}=t,d=h.useRef(null),p=h.useRef(null),g=h.useRef(new Map),m=h.useRef(a),x=h.useRef(l),L=h.useRef(s),k=h.useRef(i);h.useEffect(()=>{m.current=a},[a]),h.useEffect(()=>{L.current=s},[s]),h.useEffect(()=>{k.current=i},[i]),h.useEffect(()=>{x.current=l;const N=p.current;N&&N.setHighlightResolver(l??null)},[l]),h.useEffect(()=>{const N=p.current;N&&N.setDimNonHighlighted(o)},[o]);const U=h.useCallback((N,z)=>{const R=[],K=new Map;return N.forEach(F=>{z.has(F.id)&&(F.status!=="parsed"||!F.shapes||F.shapes.forEach(P=>{const re={...P,layerId:F.id};R.push(re),F.color&&K.set(F.id,F.color)}))}),{shapes:R,colorMap:K}},[]),b=h.useCallback((N,z)=>{const{shapes:R}=U(N,z);if(R.length===0)return null;const K=qr(R);return K?sn(K):null},[U]),_=h.useCallback((N,z)=>{if(!e.current)return null;const K=p.current;if(!K)return null;const{shapes:F,colorMap:P}=U(N,z);if(F.length===0)return K.clear(),d.current=null,null;g.current=P,K.setShapes(F);const re=K.getViewState();return d.current=re,re},[e,U]);h.useEffect(()=>{const N=e.current;if(!N||p.current)return;const z=R=>R.layerId?g.current.get(R.layerId)??null:null;p.current=s2({canvas:N,gridEnabled:n,layerColorResolver:z,backgroundColor:i2,dimNonHighlighted:o,onMouseMove:(R,K)=>{var F;(F=m.current)==null||F.call(m,{worldX:R,worldY:K})},onGridUpdate:(R,K)=>{var F;(F=k.current)==null||F.call(k,R,K)},onPick:R=>{var K;(K=L.current)==null||K.call(L,R)}})},[e,n,r]),h.useEffect(()=>{const N=p.current;N&&N.setGridEnabled(n)},[n]),h.useEffect(()=>{const N=e.current,z=p.current;if(!N||!z||typeof ResizeObserver>"u")return;const R=()=>{const F=N.getBoundingClientRect(),P=window.devicePixelRatio||1,re=Math.max(1,Math.round(F.width*P)),se=Math.max(1,Math.round(F.height*P));(N.width!==re||N.height!==se)&&(N.width=re,N.height=se,z.redraw())};R();const K=new ResizeObserver(R);return K.observe(N),()=>K.disconnect()},[e]);const v=h.useCallback(N=>{const z=p.current;z&&z.zoomToBounds(N)},[]),S=h.useCallback(()=>{var N;return((N=p.current)==null?void 0:N.getViewState())??d.current},[]);return{render:_,getBounds:b,viewState:d.current,getViewState:S,zoomToBounds:v}}function u2(e){const{canvas:t,resetButton:n,basePadding:a=24,onMouseMove:r,onRender:l,syncCanvas:s}=e,o=document.createElement("div");o.className="selection-overlay",o.style.display="none",o.style.position="fixed",o.style.pointerEvents="none",document.body.appendChild(o);let i=[],d=null,p=null,g=null;const m={active:!1,start:{x:0,y:0},current:{x:0,y:0},clientStart:{x:0,y:0},clientCurrent:{x:0,y:0}},x={mode:"none",start:{},last:{x:0,y:0}};let L=!1,k=null,U=null;function b(){return i.length>0||d!==null}function _(Y){i=Y,d=qr(i),N(!0,!0),R()}function v(Y,ne){const he=!!(ne!=null&&ne.preserveView)&&g?{...g.bounds}:null;i=[],d=Y?{...Y}:null,p=he,N(!1,!0),R()}function S(){i=[],d=null,p=null,g=null,z(null,!0),R()}function N(Y=!1,ne=!1){if(s==null||s(),!b()){g=null,z(null,ne);return}(Y||!d)&&(d=qr(i));const oe=p??d;if(!oe){g=null,z(null,ne);return}const he=sn({...oe});g=d2(t,he,a),o.style.display="none",z(he,ne)}function z(Y,ne=!1){if(k=Y?{...Y}:null,ne){U!==null&&(cancelAnimationFrame(U),U=null,L=!1),l(k);return}L||(L=!0,U=requestAnimationFrame(()=>{U=null,L=!1,l(k)}))}function R(){n&&(n.disabled=!b()||p===null)}function K(Y){if(Y.button!==0||!b()||!g)return;const ne=La(Y,t);x.start={...ne},x.last={...ne},Y.shiftKey?(x.mode="zoom",m.active=!0,m.start={...ne},m.current={...ne},m.clientStart={x:Y.clientX,y:Y.clientY},m.clientCurrent={x:Y.clientX,y:Y.clientY},o.style.display="block",Ce()):(x.mode="pan",m.active=!1,o.style.display="none",t.classList.add("is-panning")),Y.preventDefault()}function F(Y){if(x.mode==="none")return;const ne=La(Y,t);if(x.mode==="zoom"){if(!m.active)return;m.current={...ne},m.clientCurrent={x:Y.clientX,y:Y.clientY},Ce(),Y.preventDefault();return}if(!g)return;const oe=ne.x-x.last.x,he=ne.y-x.last.y;x.last={...ne};const Le=g.scale;p=p??{...g.bounds};const Ke=p.maxX-p.minX,Pe=p.maxY-p.minY,et=Ke*Le,je=Pe*Le,Ae=oe/et*Ke,Je=he/je*Pe;p={minX:p.minX-Ae,maxX:p.maxX-Ae,minY:p.minY+Je,maxY:p.maxY+Je},N(!1),R()}function P(){x.mode="none",t.classList.remove("is-panning"),m.active&&(m.active=!1,o.style.display="none",se())}function re(Y){if(!b()||!g)return;const ne=p??g.bounds,oe=La(Y,t),he=ha(oe.x,oe.y,t,g)??{x:(ne.minX+ne.maxX)/2,y:(ne.minY+ne.maxY)/2},Pe=Y.deltaMode===1?Y.deltaY*32:Y.deltaMode===2?Y.deltaY*320:Y.deltaY,et=Math.exp(-Pe*.001),je=Math.min(Math.max(et,.2),5),Ae=he.x-ne.minX,Je=ne.maxX-he.x,jt=he.y-ne.minY,xt=ne.maxY-he.y;p=sn({minX:he.x-Ae/je,maxX:he.x+Je/je,minY:he.y-jt/je,maxY:he.y+xt/je}),N(!1),R(),Y.preventDefault()}function se(){if(!g)return;const Y=Math.abs(m.current.x-m.start.x),ne=Math.abs(m.current.y-m.start.y);if(Y<5||ne<5){R();return}const oe=ha(m.start.x,m.start.y,t,g),he=ha(m.current.x,m.current.y,t,g);if(!oe||!he){R();return}p=sn({minX:Math.min(oe.x,he.x),maxX:Math.max(oe.x,he.x),minY:Math.min(oe.y,he.y),maxY:Math.max(oe.y,he.y)}),N(!1,!0),R()}function Ce(){if(!m.active)return;const Y=Math.min(m.clientStart.x,m.clientCurrent.x),ne=Math.min(m.clientStart.y,m.clientCurrent.y);o.style.display="block",o.style.left=`${Y}px`,o.style.top=`${ne}px`,o.style.width=`${Math.abs(m.clientCurrent.x-m.clientStart.x)}px`,o.style.height=`${Math.abs(m.clientCurrent.y-m.clientStart.y)}px`}function Ge(Y){if(!g||!r)return;const ne=La(Y,t),oe=ha(ne.x,ne.y,t,g);oe&&r(oe.x,oe.y)}function Se(){p=null,N(!1,!0),R()}return t.addEventListener("mousedown",K),t.addEventListener("mousemove",F),t.addEventListener("mousemove",Ge),window.addEventListener("mouseup",P),t.addEventListener("wheel",re,{passive:!1}),n==null||n.addEventListener("click",Se),{rootCanvas:t,setShapes:_,setBaseBounds:v,clear:S,redraw:Y=>N(!1,Y),hasShapes:()=>b(),getViewState:()=>g,getViewBounds:()=>(g==null?void 0:g.bounds)??null,setLayerColor:()=>{},setLayerColorResolver:()=>{},zoomToBounds:Y=>{p=sn({...Y}),N(!1,!0),R()}}}function d2(e,t,n){const a=t.maxX-t.minX,r=t.maxY-t.minY,l=Math.max(1,e.width-n*2),s=Math.max(1,e.height-n*2),o=Math.min(l/a,s/r),i=Math.max(0,l-a*o),d=Math.max(0,s-r*o),p=n+i/2-t.minX*o,g=n+d/2-t.minY*o;return{scale:o,translateX:p,translateY:g,bounds:t,padding:n}}const gu={};function Zg(e){if(!e)return"off";const t=e.trim().toLowerCase();return t==="1"||t==="true"||t==="log"||t==="console"||t==="on"?"log":"off"}function J_(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search),n=t.get("webgpuPerf")??t.get("perf"),a=Zg(n);if(a!=="off")return a}const e=typeof import.meta<"u"?gu==null?void 0:gu.VITE_WEBGPU_PERF:void 0;return Zg(e)}class f2{constructor(t,n,a){tn(this,"worker");tn(this,"ready");tn(this,"canvasKey");tn(this,"disposed",!1);tn(this,"failed",!1);tn(this,"perfMode");tn(this,"onError");this.canvasKey=`webgpu-${Math.random().toString(36).slice(2,10)}`,this.onError=a,this.perfMode=J_();const r=t.transferControlToOffscreen();this.worker=new Worker(new URL("/coco-viewer-pages/assets/worker-Q977PInL.js",import.meta.url),{type:"module"}),this.ready=new Promise((l,s)=>{this.worker.onmessage=o=>{const i=o.data;if(i.type==="ready")l();else if(i.type==="perf")this.logPerf(i.stats);else if(i.type==="error"){const d=new Error(i.message);this.markFailed(d),s(d)}},this.worker.onerror=o=>{const i=new Error(o.message);this.markFailed(i),s(i)}}),this.worker.postMessage({type:"init",canvas:r,canvasKey:this.canvasKey,size:n,perfMode:this.perfMode},[r])}markFailed(t){var n;this.failed||(this.failed=!0,(n=this.onError)==null||n.call(this,t),this.dispose())}render(t,n,a,r){this.disposed||this.failed||this.ready.then(()=>{this.disposed||this.failed||this.worker.postMessage({type:"render",canvasKey:this.canvasKey,layers:t,geomLayers:r==null?void 0:r.geomLayers,highlight:(r==null?void 0:r.highlight)??null,view:n,size:a})}).catch(l=>{const s=l instanceof Error?l:new Error(String(l));this.markFailed(s),console.error("WebGPU worker not ready",s)})}dropLayerCache(t){this.disposed||this.failed||this.ready.then(()=>{this.disposed||this.failed||this.worker.postMessage({type:"dropLayer",canvasKey:this.canvasKey,layerId:t})}).catch(n=>{const a=n instanceof Error?n:new Error(String(n));this.markFailed(a),console.error("WebGPU worker not ready",a)})}dispose(){if(!this.disposed){this.disposed=!0;try{this.worker.postMessage({type:"dispose",canvasKey:this.canvasKey})}catch{}this.worker.terminate()}}logPerf(t){if(this.perfMode!=="log"||!t)return;console.log("[WebGPU][worker]",t);const n=t.layers;if(n!=null&&n.length){const a=[...n].sort((r,l)=>l.surfacePasses-r.surfacePasses);console.table(a)}}}const qi="__cocoWasmCallContext";function Lf(){return typeof window<"u"?window:typeof globalThis<"u"?globalThis:null}function ey(e){const t=Lf();t&&(t[qi]=e)}function ty(e){const t=Lf();t&&(e!==void 0&&t[qi]!==e||delete t[qi])}function Kg(){const e=Lf();if(!e)return null;const t=e[qi];return typeof t=="string"&&t.length>0?t:null}function Pg(e,t){ey(e);try{return t()}finally{ty(e)}}async function gi(e,t){ey(e);try{return await t()}finally{ty(e)}}function h2(e){return e.trim().toLowerCase()}function g2(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.minX=="number"?t.minX:typeof t.min_x=="number"?t.min_x:null,a=typeof t.minY=="number"?t.minY:typeof t.min_y=="number"?t.min_y:null,r=typeof t.maxX=="number"?t.maxX:typeof t.max_x=="number"?t.max_x:null,l=typeof t.maxY=="number"?t.maxY:typeof t.max_y=="number"?t.max_y:null;return n===null||a===null||r===null||l===null||!Number.isFinite(n)||!Number.isFinite(a)||!Number.isFinite(r)||!Number.isFinite(l)?null:{minX:n,minY:a,maxX:r,maxY:l}}function m2(e,t){return e?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:t}function mu(e){return e==="odb"||e==="cadence"}function pu(e,t,n){return e==="odb"?t?{kind:e,label:"odb",dataset:t}:null:n?{kind:e,label:"cadence",dataset:n}:null}function p2(e,t){if(!e||typeof e.has_cached_layer_geoms!="function")return null;try{return!!e.has_cached_layer_geoms(t)}catch{return!1}}function b2(e,t,n,a){const r=[];e&&e.size>0&&e.forEach((o,i)=>{if(!o||o.size===0)return;const d=[];o.forEach((p,g)=>{!Number.isFinite(g)||typeof p!="string"||!p.trim()||d.push({featureNo:g,color:p})}),d.length&&r.push({layerKey:i,features:d})});const l=(n??[]).filter(o=>o&&typeof o.layerId=="string"&&o.layerId.trim()).filter(o=>Number.isFinite(o.geomIndex)&&o.geomIndex>=0).map(o=>({layerId:o.layerId,geomIndex:Math.floor(o.geomIndex)}));if(!r.length&&l.length===0)return null;const s={dimNonHighlighted:!!(t&&r.length>0),layers:r};return l.length&&(s.selectionShapes=l,typeof a=="string"&&a.trim()&&(s.selectionColor=a.trim())),s}const _2=3;function y2(e,t={}){const n=h.useMemo(()=>J_(),[]),a=h.useCallback((D,G)=>{var O;if(n!=="log")return;const H=o1(D);if(H&&(console.log(`[WebGPU:${G}]`,H),(O=H.layers)!=null&&O.length)){const ie=[...H.layers].sort((ae,ge)=>ge.surfacePasses-ae.surfacePasses);console.table(ie)}},[n]),{workerEnabled:r=!1,onMouseMove:l,onWorkerFailure:s,onRenderFailure:o,odbDataset:i,cadenceDataset:d,highlightColorMap:p,dimNonHighlighted:g=!1,selectionShapes:m,selectionColor:x}=t,L=h.useMemo(()=>typeof OffscreenCanvas<"u"&&typeof Worker<"u"&&typeof HTMLCanvasElement.prototype.transferControlToOffscreen=="function",[]),k=h.useRef(null),U=h.useRef(null),b=h.useRef([]),_=h.useRef(new Set),v=h.useRef(new Set),S=h.useRef(null),N=h.useRef(new Map),z=h.useRef(null),R=h.useRef(!1),K=h.useRef(!1),F=h.useRef(null),P=h.useRef(l),re=h.useRef(s),se=h.useRef(o),Ce=h.useRef(0),Ge=h.useRef(null),Se=h.useRef(Promise.resolve()),Y=h.useRef({hasPending:!1,view:null}),ne=h.useRef(!1);h.useEffect(()=>{P.current=l},[l]),h.useEffect(()=>{re.current=s},[s]),h.useEffect(()=>{se.current=o},[o]),h.useEffect(()=>{Ge.current=b2(p,g,m,x);const D=U.current;D!=null&&D.hasShapes()&&D.redraw()},[p,g,m,x]);const oe=h.useCallback(()=>{S.current&&(S.current.dispose(),S.current=null,N.current.clear())},[]),he=h.useCallback(D=>{var G;oe(),(G=re.current)==null||G.call(re,D)},[oe]),Le=h.useCallback((D,G)=>{if(!L||!r)return null;if(S.current)return S.current;try{N.current.clear();const H=new f2(D,G,he);return S.current=H,H}catch(H){const O=H instanceof Error?H:new Error(String(H));return he(O),null}},[he,L,r]);h.useEffect(()=>{(!r||!L)&&oe()},[oe,L,r]),h.useEffect(()=>()=>{var D;oe(),(D=F.current)==null||D.disconnect(),F.current=null},[oe]);const Ke=h.useCallback(D=>{z.current!==D&&(z.current=D,R.current=!1,K.current=!1);const G=D.getBoundingClientRect(),H=window.devicePixelRatio||1,O=Math.max(1,Math.round(G.width*H)),ie=Math.max(1,Math.round(G.height*H));let ae=!1;if(!S.current&&!R.current&&(D.width!==O||D.height!==ie))try{D.width=O,D.height=ie,ae=!0}catch(ge){R.current=!0,K.current||(K.current=!0,console.warn("WebGPU canvas resize skipped (invalid state)",ge))}if(ae&&D.id)try{f1(D.id)}catch{}return{width:O,height:ie}},[]),Pe=h.useCallback(D=>{const G=S.current;if(G){G.dropLayerCache(D),N.current.delete(D);return}const H=e.current;if(H!=null&&H.id)try{s1(H.id,D)}catch(O){console.warn("Failed to drop WebGPU layer cache",O)}},[e]),et=h.useCallback(D=>{const G=new Set(D.map(O=>O.id));v.current.forEach(O=>{G.has(O)||Pe(O)}),v.current=G},[Pe]),je=h.useRef(i);h.useEffect(()=>{je.current=i},[i]);const Ae=h.useRef(d);h.useEffect(()=>{Ae.current=d},[d]);const Je=h.useCallback(()=>{const D=_.current,G=je.current,H=Ae.current;return b.current.filter(O=>D.has(O.id)).filter(O=>{if(mu(O.kind)){const ie=pu(O.kind,G,H),ae=p2(ie==null?void 0:ie.dataset,O.name);return ae!==null?ae:!!(O.shapes&&O.shapes.length>0)}return O.rawText.trim().length>0}).map(O=>{const ie=Number.isFinite(O.revision)?O.revision:1;return{id:O.id,revision:ie,kind:O.kind,input:O.rawText,color:O.color,name:O.name}})},[]),jt=h.useCallback(async D=>{var en;const G=e.current;if(!G)return;G.id||(G.id="main-webgpu-canvas");const H=Ke(G),O=Je(),ie=Ge.current,ae=je.current,ge=Ae.current,we=["odb","cadence"].map(ve=>pu(ve,ae,ge)).filter(ve=>ve!==null),de=new Set(we.filter(ve=>{var kt;return typeof((kt=ve.dataset)==null?void 0:kt.render_layers_webgpu)=="function"}).map(ve=>ve.kind)),ke=new Map;for(const ve of de)ke.set(ve,O.filter(kt=>kt.kind===ve));const ze=ke.get("odb")??[],It=ke.get("cadence")??[],Yt=O.filter(ve=>!(mu(ve.kind)&&de.has(ve.kind))),wt=D??null,Pt=r&&L,cn=(ie==null?void 0:ie.layers)??[],Jt=!!(ie!=null&&ie.dimNonHighlighted&&cn.length>0);if(Pt&&ae&&ze.length>0&&Yt.length===0&&It.length===0){const ve=[],kt=new Map;let un=!0;typeof ae.get_cached_layer_geoms!="function"&&(un=!1);for(const Ct of ze){if(!un)break;const Te=h2(Ct.name),Pn=N.current.get(Ct.id);let $t;if(Pn!==Ct.revision)try{$t=ae.get_cached_layer_geoms(Ct.name),kt.set(Ct.id,Ct.revision)}catch(xa){console.warn("WebGPU worker geom fetch failed",xa),un=!1;break}const ua={id:Ct.id,revision:Ct.revision,layerKey:Te,color:Ct.color,dim:Jt};$t&&(ua.geoms=$t),ve.push(ua)}if(un){const Ct=Le(G,H);if(Ct){Ct.render([],wt,H,{geomLayers:ve,highlight:ie??null}),kt.forEach((Te,Pn)=>{N.current.set(Pn,Te)});return}}}if(Pt&&ze.length===0&&It.length===0){const ve=Le(G,H);if(ve){ve.render(O,wt,H);return}}let st="start";try{Yt.length>0&&(st="render_scene_other_layers",await gi("[render] scene.render_webgpu_scene_with_view",()=>Xg(G.id,Yt,wt)),a(G.id,"scene"));for(const ve of we){const kt=ke.get(ve.kind)??[];if(!kt.length)continue;const un=kt.map(Ct=>({layerName:Ct.name,id:Ct.id,revision:Ct.revision,color:Ct.color}));st=`render_cached_dataset:${ve.kind}`,await gi(`[render] ${ve.kind}.render_layers_webgpu`,()=>ve.dataset.render_layers_webgpu(G.id,un,wt,ie??null)),a(G.id,ve.label)}Yt.length===0&&ze.length===0&&It.length===0&&(st="render_empty_scene",await gi("[render] scene.render_webgpu_scene_with_view(empty)",()=>Xg(G.id,[],wt)),a(G.id,"empty")),Ce.current=0}catch(ve){const kt=ve instanceof Error?ve.message:String(ve);if(kt.includes("WebGPU cache busy")||kt.includes("surface format unavailable")||kt.includes("present mode unavailable")||kt.includes("alpha mode unavailable"))return;if(console.error("WebGPU render failed",{stage:st,canvasId:G.id,otherLayerCount:Yt.length,odbLayerCount:ze.length,cadenceLayerCount:It.length,workerEnabled:Pt},ve),Ce.current+=1,Ce.current>=_2){const un=ve instanceof Error?ve:new Error(String(ve));(en=se.current)==null||en.call(se,un)}}},[e,Je,Le,a,L,Ke,r]),xt=h.useCallback(D=>{Y.current={hasPending:!0,view:D},!ne.current&&(ne.current=!0,Se.current=Se.current.then(async()=>{for(;Y.current.hasPending;){const G=Y.current.view;Y.current.hasPending=!1,await jt(G)}}).finally(()=>{ne.current=!1}))},[jt]),vt=h.useCallback(D=>{xt(D??null)},[xt]);h.useEffect(()=>{const D=e.current;if(!(!D||D===z.current)&&(z.current=D,oe(),F.current&&(F.current.disconnect(),F.current=null),D.id||(D.id="main-webgpu-canvas"),U.current=u2({canvas:D,basePadding:24,onMouseMove:(G,H)=>{var O;(O=P.current)==null||O.call(P,{worldX:G,worldY:H})},syncCanvas:()=>{Ke(D)},onRender:G=>{vt(G)}}),typeof ResizeObserver<"u")){const H=D.parentElement??D,O=()=>{var ae;Ke(D),(ae=U.current)==null||ae.redraw()},ie=new ResizeObserver(O);ie.observe(H),F.current=ie}});const ft=h.useCallback((D,G)=>D.filter(O=>G.has(O.id)).flatMap(O=>!O.shapes||!O.shapes.length?[]:O.shapes.map(ie=>({...ie,layerId:O.id}))),[]),Re=h.useCallback((D,G)=>{var ae;const H=je.current,O=Ae.current;let ie=null;for(const ge of D){if(!G.has(ge.id)||!mu(ge.kind))continue;const we=(ae=pu(ge.kind,H,O))==null?void 0:ae.dataset;if(!(!we||typeof we.get_cached_layer_bounds!="function"))try{const de=we.get_cached_layer_bounds(ge.name),ke=g2(de);if(!ke)continue;ie=m2(ie,ke)}catch{}}return ie?sn(ie):null},[]),ee=h.useCallback((D,G)=>D.some(H=>G.has(H.id)&&(H.kind==="odb"||H.kind==="cadence")&&H.status==="parsed"&&(!H.shapes||H.shapes.length===0)),[]),M=h.useCallback((D,G)=>{let H=!1,O=null;const ie=()=>(H||(O=Re(D,G),H=!0),O);if(ee(D,G)){const we=ie();if(we)return we}const ge=ft(D,G);if(ge.length){const we=qr(ge);return we?sn(we):null}return ie()},[ft,Re,ee]),X=h.useCallback((D,G)=>{b.current=D,_.current=G,et(D);const H=U.current;if(!H)return null;let O=!1,ie=null;const ae=()=>(O||(ie=Re(D,G),O=!0),ie);if(ee(D,G)){const ke=ae();if(ke){H.setBaseBounds(ke,{preserveView:!0});const ze=H.getViewState();return k.current=ze,ze}}const we=ft(D,G);if(!we.length){const ke=ae();if(!ke)return H.clear(),k.current=null,null;H.setBaseBounds(ke,{preserveView:!0});const ze=H.getViewState();return k.current=ze,ze}H.setShapes(we);const de=H.getViewState();return k.current=de,de},[ft,Re,ee,et]),A=h.useCallback(D=>{const G=U.current;G&&(G.zoomToBounds(D),k.current=G.getViewState())},[]),B=h.useCallback(()=>{var D;return((D=U.current)==null?void 0:D.getViewState())??k.current},[]),V=h.useCallback(()=>{var G;const D=e.current;D&&(Ke(D),(G=U.current)==null||G.redraw())},[Ke]);return{render:X,getBounds:M,viewState:k.current,getViewState:B,zoomToBounds:A,supportsWorker:L,syncAndRedraw:V}}const x2=[".gbr",".ger",".gtl",".gbl",".gts",".gbs",".gto",".gbo",".gtp",".gbp",".gm1",".gm2",".gm3",".gko",".drl",".xln",".exc",".txt",".pgeom",".zip",".tgz",".tar.gz",".gz",".z"];function v2(e={}){const{onDrop:t,accept:n=x2}=e,[a,r]=h.useState(!1),[l,s]=h.useState(null),o=h.useCallback(g=>{s(g)},[]),i=h.useCallback(g=>{const m=g.toLowerCase();return n.some(x=>m.endsWith(x.toLowerCase()))},[n]),d=h.useCallback(g=>{const m=(g.webkitRelativePath||g.name).toLowerCase();return!!(m.includes("/matrix/")||m.endsWith("/matrix")||m.includes("/misc/")||m.endsWith("/misc")||m.includes("/layers/")&&m.includes("/features")||m.includes("/steps/")||m.includes("/symbols/")||m.includes("/fonts/")||m.endsWith(".z"))},[]),p=h.useCallback(g=>{const m=Array.from(g),x=m.some(k=>k.webkitRelativePath);let L;x?L=m.filter(k=>d(k)||i(k.name)):L=m.filter(k=>i(k.name)),L.length>0&&(t==null||t(L))},[i,d,t]);return h.useEffect(()=>{if(!l)return;let g=0;const m=U=>{U.preventDefault(),U.stopPropagation(),g++,g===1&&r(!0)},x=U=>{U.preventDefault(),U.stopPropagation(),g--,g===0&&r(!1)},L=U=>{U.preventDefault(),U.stopPropagation()},k=U=>{var _;U.preventDefault(),U.stopPropagation(),g=0,r(!1);const b=(_=U.dataTransfer)==null?void 0:_.files;b&&b.length>0&&p(b)};return l.addEventListener("dragenter",m),l.addEventListener("dragleave",x),l.addEventListener("dragover",L),l.addEventListener("drop",k),()=>{l.removeEventListener("dragenter",m),l.removeEventListener("dragleave",x),l.removeEventListener("dragover",L),l.removeEventListener("drop",k)}},[l,p]),{isDragging:a,dropRef:o}}const Ed="coco-viewer-theme";function Jg(){return typeof window>"u"||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function em(){if(typeof window>"u")return"system";const e=localStorage.getItem(Ed);return e==="light"||e==="dark"||e==="system"?e:"system"}function w2(){const[e,t]=h.useState(()=>em()),[n,a]=h.useState(()=>{const s=em();return s==="system"?Jg():s});h.useEffect(()=>{const s=document.documentElement,o=e==="system"?Jg():e;o==="dark"?s.classList.add("dark"):s.classList.remove("dark"),a(o)},[e]),h.useEffect(()=>{if(e!=="system")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=i=>{const d=i.matches?"dark":"light";a(d);const p=document.documentElement;d==="dark"?p.classList.add("dark"):p.classList.remove("dark")};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[e]);const r=h.useCallback(s=>{t(s),localStorage.setItem(Ed,s)},[]),l=h.useCallback(()=>{t(s=>{const o=s==="dark"?"light":"dark";return localStorage.setItem(Ed,o),o})},[]);return{theme:e,resolvedTheme:n,setTheme:r,toggleTheme:l}}class S2{constructor(t){tn(this,"ws",null);tn(this,"options");tn(this,"reconnectTimer",null);tn(this,"_status","disconnected");tn(this,"retryCount",0);tn(this,"suppressReconnect",!1);tn(this,"maxRetries");tn(this,"connectionId",null);tn(this,"activeConnectionId",null);this.options={url:"ws://localhost:9000",maxRetries:5,...t},this.maxRetries=this.options.maxRetries}get status(){return this._status}connect(){this.ws&&this.ws.readyState===WebSocket.OPEN||(this.suppressReconnect=!1,this._status="connecting",this.ws=new WebSocket(this.options.url),this.ws.onopen=()=>{var t,n;this._status="connected",this.retryCount=0,console.log("[MCPBridge] :",this.options.url),this.sendRegister(),(n=(t=this.options).onConnect)==null||n.call(t),this.clearReconnectTimer()},this.ws.onclose=t=>{var r,l,s,o;this._status="disconnected";const n=t.reason||"unknown";console.log("[MCPBridge]  :",n),this.connectionId=null,this.activeConnectionId=null,(l=(r=this.options).onActiveChange)==null||l.call(r,{isActive:!1,connectionId:null,activeConnectionId:null}),(o=(s=this.options).onDisconnect)==null||o.call(s);const a=!this.suppressReconnect&&!n.includes("Duplicate clientId");this.suppressReconnect=!1,a&&this.scheduleReconnect()},this.ws.onerror=t=>{var n,a;console.error("[MCPBridge] :",t),(a=(n=this.options).onError)==null||a.call(n,new Error("WebSocket connection error"))},this.ws.onmessage=async t=>{var n,a,r,l;try{const s=JSON.parse(t.data);if((s==null?void 0:s.type)==="connectionInfo"){const i=typeof s.connectionId=="string"?s.connectionId:null,d=typeof s.activeConnectionId=="string"?s.activeConnectionId:null;this.connectionId=i,this.activeConnectionId=d,(a=(n=this.options).onActiveChange)==null||a.call(n,{isActive:!!(i&&d&&i===d),connectionId:i??null,activeConnectionId:d??null});return}if((s==null?void 0:s.type)==="activeChanged"){const i=typeof s.activeConnectionId=="string"?s.activeConnectionId:null;this.activeConnectionId=i,(l=(r=this.options).onActiveChange)==null||l.call(r,{isActive:!!(this.connectionId&&i&&this.connectionId===i),connectionId:this.connectionId,activeConnectionId:i});return}const o=s;await this.handleCommand(o)}catch(s){console.error("[MCPBridge]   :",s)}})}disconnect(){this.suppressReconnect=!0,this.clearReconnectTimer(),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this._status="disconnected"}reconnect(){this.retryCount=0,this.disconnect(),this.suppressReconnect=!1,this.connect()}async handleCommand(t){const{id:n,action:a,params:r}=t;try{const l=await this.options.commandHandler(a,r);this.sendResponse(n,l)}catch(l){const s=l instanceof Error?l.message:String(l);this.sendError(n,s)}}setActive(){this.sendMessage({type:"setActive"})}sendRegister(){this.options.clientInfo&&this.sendMessage({type:"register",meta:this.options.clientInfo})}sendMessage(t){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}sendResponse(t,n){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({id:t,result:n}))}sendError(t,n){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({id:t,error:n}))}scheduleReconnect(){var t,n;if(!this.reconnectTimer){if(this.retryCount>=this.maxRetries){console.log(`[MCPBridge]   (${this.maxRetries}) .`),(n=(t=this.options).onMaxRetriesReached)==null||n.call(t);return}this.retryCount+=1,this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,console.log(`[MCPBridge]   ${this.retryCount}/${this.maxRetries}...`),this.connect()},3e3)}}clearReconnectTimer(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}}function C2(e){return async(t,n)=>{switch(t){case"loadFile":{const a=n.path;if(!a)throw new Error("path is required");return await e.loadFile(a)}case"getLayers":return e.getLayers();case"setLayerVisible":{const a=i=>{const d=[],p=[];for(const g of i){const m=e.setLayerVisible(g.layerId,g.visible);m.success?p.push(g.layerId):d.push({layerId:g.layerId,error:m.error})}return d.length>0?{success:!1,updated:p,failed:d}:{success:!0,updated:p}},r=n.layers;if(Array.isArray(r)){if(r.length===0)throw new Error("layers must not be empty");const i=r.map((d,p)=>{if(!d||typeof d!="object")throw new Error(`layers[${p}] must be an object`);const g=d.layerId,m=d.visible;if(typeof g!="number")throw new Error(`layers[${p}].layerId must be a number`);if(typeof m!="boolean")throw new Error(`layers[${p}].visible must be a boolean`);return{layerId:g,visible:m}});return a(i)}const l=n.layerIds;if(Array.isArray(l)){if(l.length===0)throw new Error("layerIds must not be empty");const i=n.visible;if(typeof i!="boolean")throw new Error("visible is required when layerIds is provided");const d=l.map((p,g)=>{if(typeof p!="number")throw new Error(`layerIds[${g}] must be a number`);return{layerId:p,visible:i}});return a(d)}const s=n.layerId,o=n.visible;if(typeof s!="number")throw new Error("layerId is required");if(typeof o!="boolean")throw new Error("visible is required");return e.setLayerVisible(s,o)}case"getComponents":return e.getComponents();case"searchNetsByRegex":{const a=n.pattern,r=n.flags,l=n.limit;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(r!==void 0&&typeof r!="string")throw new Error("flags must be a string");if(l!==void 0&&(typeof l!="number"||!Number.isFinite(l)))throw new Error("limit must be a number");return e.searchNetsByRegex(a,r,l)}case"searchComponentsByRegex":{const a=n.pattern,r=n.flags,l=n.limit;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(r!==void 0&&typeof r!="string")throw new Error("flags must be a string");if(l!==void 0&&(typeof l!="number"||!Number.isFinite(l)))throw new Error("limit must be a number");return e.searchComponentsByRegex(a,r,l)}case"getNetLengths":{const a=n.nets;if(!Array.isArray(a))throw new Error("nets must be an array");const r=a.filter(l=>typeof l=="string");if(r.length===0)throw new Error("nets must include at least one string");return e.getNetLengths(r)}case"getNetLengthsByRegex":{const a=n.pattern,r=n.flags,l=n.limit;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(r!==void 0&&typeof r!="string")throw new Error("flags must be a string");if(l!==void 0&&(typeof l!="number"||!Number.isFinite(l)))throw new Error("limit must be a number");return e.getNetLengthsByRegex(a,r,l)}case"getNetPins":{const a=n.nets;if(!Array.isArray(a))throw new Error("nets must be an array");const r=a.filter(l=>typeof l=="string");if(r.length===0)throw new Error("nets must include at least one string");return e.getNetPins(r)}case"getNetPinsByRegex":{const a=n.pattern,r=n.flags,l=n.limit;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(r!==void 0&&typeof r!="string")throw new Error("flags must be a string");if(l!==void 0&&(typeof l!="number"||!Number.isFinite(l)))throw new Error("limit must be a number");return e.getNetPinsByRegex(a,r,l)}case"highlightNetsByRegex":{const a=n.pattern,r=n.enabled,l=n.flags,s=n.autoSelectLayers,o=n.layerScope;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(typeof r!="boolean")throw new Error("enabled must be a boolean");if(l!==void 0&&typeof l!="string")throw new Error("flags must be a string");if(s!==void 0&&typeof s!="boolean")throw new Error("autoSelectLayers must be a boolean");if(o!==void 0&&o!=="all"&&o!=="trc")throw new Error("layerScope must be all or trc");return e.highlightNetsByRegex(a,r,l,s,o)}case"highlightComponentsByRegex":{const a=n.pattern,r=n.enabled,l=n.flags;if(typeof a!="string"||!a.trim())throw new Error("pattern is required");if(typeof r!="boolean")throw new Error("enabled must be a boolean");if(l!==void 0&&typeof l!="string")throw new Error("flags must be a string");return e.highlightComponentsByRegex(a,r,l)}case"setHighlightColorByRegex":{const a=n.type,r=n.pattern,l=n.color,s=n.flags,o=n.limit;if(a!=="net"&&a!=="component")throw new Error("type must be net or component");if(typeof r!="string"||!r.trim())throw new Error("pattern is required");if(typeof l!="string"||!l.trim())throw new Error("color is required");if(s!==void 0&&typeof s!="string")throw new Error("flags must be a string");if(o!==void 0&&(typeof o!="number"||!Number.isFinite(o)))throw new Error("limit must be a number");return e.setHighlightColorByRegex(a,r,l,s,o)}case"autoSelectLayersForNets":{const a=n.netPattern,r=n.flags,l=n.mode,s=n.layerScope;if(typeof a!="string"||!a.trim())throw new Error("netPattern is required");if(r!==void 0&&typeof r!="string")throw new Error("flags must be a string");if(l!==void 0&&l!=="all"&&l!=="primary"&&l!=="top-n")throw new Error("mode must be all, primary, or top-n");if(s!==void 0&&s!=="all"&&s!=="trc")throw new Error("layerScope must be all or trc");return e.autoSelectLayersForNets(a,r,l,s)}case"fitHighlights":return e.fitHighlights();case"setViewBox":{const{minX:a,minY:r,maxX:l,maxY:s,centerX:o,centerY:i,radius:d,padding:p}=n;return e.setViewBox({minX:a,minY:r,maxX:l,maxY:s,centerX:o,centerY:i,radius:d,padding:p})}case"clearHighlights":return e.clearHighlights();case"setHighlightColor":{const a=n.type,r=n.name,l=n.color;if(a!=="net"&&a!=="component")throw new Error("type must be net or component");if(typeof r!="string"||!r.trim())throw new Error("name is required");if(typeof l!="string"||!l.trim())throw new Error("color is required");return e.setHighlightColor(a,r,l)}case"setHighlightDimMode":{const a=n.enabled;if(typeof a!="boolean")throw new Error("enabled must be a boolean");return e.setHighlightDimMode(a)}case"getScenesBatchStatus":{const a=n.batchId;if(a!==void 0&&typeof a!="string")throw new Error("batchId must be a string");return e.getScenesBatchStatus(a)}case"listScenes":{const a=n.limit,r=n.offset;if(a!==void 0&&(typeof a!="number"||!Number.isFinite(a)||a<0))throw new Error("limit must be a non-negative number");if(r!==void 0&&(typeof r!="number"||!Number.isFinite(r)||r<0))throw new Error("offset must be a non-negative number");return e.listScenes({limit:a,offset:r})}case"getScene":{const a=n.sceneId??n.id,r=n.includeThumbnail;if(typeof a!="string"||!a.trim())throw new Error("sceneId is required");if(r!==void 0&&typeof r!="boolean")throw new Error("includeThumbnail must be a boolean");return e.getScene(a.trim(),r)}case"updateScene":{const a=n.sceneId??n.id,r=n.title,l=n.tags,s=n.note,o=n.thumbnail,i=n.refreshThumbnail;if(typeof a!="string"||!a.trim())throw new Error("sceneId is required");if(r!==void 0&&typeof r!="string")throw new Error("title must be a string");if(s!==void 0&&typeof s!="string")throw new Error("note must be a string");if(l!==void 0&&(!Array.isArray(l)||l.some(d=>typeof d!="string")))throw new Error("tags must be an array of strings");if(o!=null&&typeof o!="string")throw new Error("thumbnail must be a string or null");if(i!==void 0&&typeof i!="boolean")throw new Error("refreshThumbnail must be a boolean");return e.updateScene({sceneId:a.trim(),title:r,tags:l,note:s,thumbnail:o,refreshThumbnail:i})}case"deleteScene":{const a=n.sceneId??n.id;if(typeof a!="string"||!a.trim())throw new Error("sceneId is required");return e.deleteScene(a.trim())}case"createScene":{const a=n.title,r=n.tags,l=n.note,s=n.includeLayers,o=n.includeHighlights,i=n.includeThumbnail,d=n.autoFit,p=n.autoLayerSelect,g=n.layerScope;if(a!==void 0&&typeof a!="string")throw new Error("title must be a string");if(l!==void 0&&typeof l!="string")throw new Error("note must be a string");if(r!==void 0&&(!Array.isArray(r)||r.some(m=>typeof m!="string")))throw new Error("tags must be an array of strings");if(s!==void 0&&typeof s!="boolean")throw new Error("includeLayers must be a boolean");if(o!==void 0&&typeof o!="boolean")throw new Error("includeHighlights must be a boolean");if(i!==void 0&&typeof i!="boolean")throw new Error("includeThumbnail must be a boolean");if(d!==void 0&&typeof d!="boolean")throw new Error("autoFit must be a boolean");if(p!==void 0&&typeof p!="boolean")throw new Error("autoLayerSelect must be a boolean");if(g!==void 0&&g!=="all"&&g!=="trc")throw new Error("layerScope must be 'all' or 'trc'");return e.createScene({title:a,tags:r,note:l,includeLayers:s,includeHighlights:o,includeThumbnail:i,autoFit:d,autoLayerSelect:p,layerScope:g})}case"createScenesBatch":{const a=n.scenes,r=n.autoLayerSelect,l=n.autoFit,s=n.includeThumbnail,o=n.highlightDimUnhighlighted,i=n.clearBetweenScenes,d=n.layerScope;if(!Array.isArray(a))throw new Error("scenes must be an array");if(r!==void 0&&typeof r!="boolean")throw new Error("autoLayerSelect must be a boolean");if(l!==void 0&&typeof l!="boolean")throw new Error("autoFit must be a boolean");if(s!==void 0&&typeof s!="boolean")throw new Error("includeThumbnail must be a boolean");if(o!==void 0&&typeof o!="boolean")throw new Error("highlightDimUnhighlighted must be a boolean");if(i!==void 0&&typeof i!="boolean")throw new Error("clearBetweenScenes must be a boolean");if(d!==void 0&&d!=="all"&&d!=="trc")throw new Error("layerScope must be all or trc");const p=a.map((g,m)=>{if(!g||typeof g!="object")throw new Error(`scenes[${m}] must be an object`);const x=g,L=x.netPattern,k=x.componentPattern,U=x.title,b=x.netPatternFlags,_=x.componentPatternFlags,v=x.note,S=x.tags,N=x.highlightColor,z=x.componentHighlightColor,R=x.includeThumbnail,K=x.highlightDimUnhighlighted,F=x.autoLayerSelect,P=x.layerScope,re=x.autoFit;if(typeof L!="string"||!L.trim())throw new Error(`scenes[${m}].netPattern is required`);if(typeof U!="string")throw new Error(`scenes[${m}].title must be a string`);if(b!==void 0&&typeof b!="string")throw new Error(`scenes[${m}].netPatternFlags must be a string`);if(k!==void 0&&typeof k!="string")throw new Error(`scenes[${m}].componentPattern must be a string`);if(_!==void 0&&typeof _!="string")throw new Error(`scenes[${m}].componentPatternFlags must be a string`);if(v!==void 0&&typeof v!="string")throw new Error(`scenes[${m}].note must be a string`);if(N!==void 0&&typeof N!="string")throw new Error(`scenes[${m}].highlightColor must be a string`);if(z!==void 0&&typeof z!="string")throw new Error(`scenes[${m}].componentHighlightColor must be a string`);if(R!==void 0&&typeof R!="boolean")throw new Error(`scenes[${m}].includeThumbnail must be a boolean`);if(K!==void 0&&typeof K!="boolean")throw new Error(`scenes[${m}].highlightDimUnhighlighted must be a boolean`);if(F!==void 0&&typeof F!="boolean")throw new Error(`scenes[${m}].autoLayerSelect must be a boolean`);if(P!==void 0&&P!=="all"&&P!=="trc")throw new Error(`scenes[${m}].layerScope must be all or trc`);if(re!==void 0&&typeof re!="boolean")throw new Error(`scenes[${m}].autoFit must be a boolean`);if(S!==void 0&&(!Array.isArray(S)||S.some(se=>typeof se!="string")))throw new Error(`scenes[${m}].tags must be an array of strings`);return{netPattern:L,componentPattern:k,title:U,netPatternFlags:b,componentPatternFlags:_,note:v,tags:S,highlightColor:N,componentHighlightColor:z,includeThumbnail:R,highlightDimUnhighlighted:K,autoLayerSelect:F,layerScope:P,autoFit:re}});return e.createScenesBatch({scenes:p,autoLayerSelect:r,autoFit:l,includeThumbnail:s,highlightDimUnhighlighted:o,clearBetweenScenes:i,layerScope:d})}case"captureScreen":return await e.captureScreen();case"getFileInfo":return e.getFileInfo();case"getComponentDetails":{const a=n.components,r=n.pattern,l=n.flags,s=n.limit;if(a&&!Array.isArray(a))throw new Error("components must be an array of strings");if(r!==void 0&&typeof r!="string")throw new Error("pattern must be a string");if(l!==void 0&&typeof l!="string")throw new Error("flags must be a string");if(s!==void 0&&(typeof s!="number"||!Number.isFinite(s)))throw new Error("limit must be a number");return e.getComponentDetails({components:a,pattern:r,flags:l,limit:s})}case"searchComponentsByProperty":{const a=n.field,r=n.pattern,l=n.matchType,s=n.caseInsensitive,o=n.limit;if(typeof a!="string"||!a.trim())throw new Error("field is required");if(typeof r!="string")throw new Error("pattern is required");if(l!==void 0&&!["exact","contains","startsWith","endsWith","regex"].includes(l))throw new Error("matchType must be one of: exact, contains, startsWith, endsWith, regex");if(s!==void 0&&typeof s!="boolean")throw new Error("caseInsensitive must be a boolean");if(o!==void 0&&(typeof o!="number"||!Number.isFinite(o)))throw new Error("limit must be a number");return e.searchComponentsByProperty({field:a,pattern:r,matchType:l,caseInsensitive:s,limit:o})}case"getComponentPropertyNames":return e.getComponentPropertyNames();case"getComponentPropertyValues":{const a=n.propertyName,r=n.limit;if(typeof a!="string"||!a.trim())throw new Error("propertyName is required");if(r!==void 0&&(typeof r!="number"||!Number.isFinite(r)))throw new Error("limit must be a number");return e.getComponentPropertyValues(a,r)}case"getComponentFieldValues":{const a=n.field,r=n.limit;if(typeof a!="string"||!a.trim())throw new Error("field is required");if(r!==void 0&&(typeof r!="number"||!Number.isFinite(r)))throw new Error("limit must be a number");return e.getComponentFieldValues(a,r)}default:throw new Error(`Unknown action: ${t}`)}}}const tm="coco-viewer-tab-id",nm=()=>`tab-${Date.now()}-${Math.random().toString(16).slice(2)}`,E2=()=>{try{const e=sessionStorage.getItem(tm);if(e)return e;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():nm();return sessionStorage.setItem(tm,t),t}catch{return nm()}},M2=()=>({title:document.title,url:window.location.href,userAgent:navigator.userAgent,clientId:E2()}),ny="coco-viewer-mcp-enabled";function N2(){return localStorage.getItem(ny)==="true"}function am(e){localStorage.setItem(ny,String(e))}function A2({viewerApi:e}){const[t,n]=h.useState("disconnected"),[a,r]=h.useState(()=>N2()),[l,s]=h.useState(!1),o=h.useRef(null),i=h.useRef(e),d=h.useRef(!1);h.useEffect(()=>{i.current=e},[e]);const p=h.useCallback(async(x,L)=>{const k=i.current;if(!k)throw new Error("ViewerAPI not available");return C2(k)(x,L)},[]);h.useEffect(()=>{const x=new S2({url:"ws://localhost:9000",clientInfo:M2(),commandHandler:p,maxRetries:5,onConnect:()=>{console.log("[MCP] "),n("connected"),d.current&&(d.current=!1,x.setActive())},onDisconnect:()=>{console.log("[MCP]  "),n("disconnected"),s(!1)},onActiveChange:L=>{s(L.isActive)},onMaxRetriesReached:()=>{console.log("[MCP]   "),n("disconnected"),s(!1)},onError:L=>{console.error("[MCP] :",L)}});return o.current=x,a&&x.connect(),()=>{x.disconnect(),o.current=null}},[p]),h.useEffect(()=>{const x=o.current;x&&(a?x.status!=="connected"&&x.status!=="connecting"&&x.connect():(x.disconnect(),n("disconnected"),s(!1)))},[a]);const g=h.useCallback(()=>{const x=o.current;if(!a){r(!0),am(!0),d.current=!0,console.log("[MCP]  "),x==null||x.connect();return}(x==null?void 0:x.status)==="connected"?x.setActive():(d.current=!0,x==null||x.connect())},[a]),m=h.useCallback(()=>{const x=o.current;r(!1),am(!1),x==null||x.disconnect(),n("disconnected"),s(!1)},[]);return{status:t,enabled:a,active:l,reconnect:g,disconnect:m}}const T2=(e,t)=>{const n=[];return e.forEach(a=>n.push(`net:${a}`)),t.forEach(a=>n.push(`component:${a}`)),n},k2=(e,t,n,a)=>{const r=Array.from(n.entries()).filter(([o])=>e.has(o)),l=Array.from(a.entries()).filter(([o])=>t.has(o)),s={};return r.length&&(s.net=Object.fromEntries(r)),l.length&&(s.component=Object.fromEntries(l)),Object.keys(s).length?s:void 0},rm=(e,t,n,a)=>{var v,S;t.clearBetweenScenes&&(n.highlightNets.clear(),n.highlightComponents.clear());const r=a.matchNets(e.netPattern,e.netPatternFlags);if(!r.success)return{success:!1,error:r.error};const l=r.matched??[];if(!l.length)return{success:!1,error:r.error};if(l.forEach(N=>n.highlightNets.add(N)),e.highlightColor){const N=a.normalizeColor(e.highlightColor);if(!N.success||!N.color)return{success:!1,error:N.error};l.forEach(z=>{n.netHighlightColors.set(z,N.color)})}let s=[];const o=(v=e.componentPattern)==null?void 0:v.trim();if(o){const N=a.matchComponents(o,e.componentPatternFlags);if(!N.success)return{success:!1,error:N.error};if(s=N.matched??[],!s.length)return{success:!1,error:N.error};if(s.forEach(z=>n.highlightComponents.add(z)),e.componentHighlightColor){const z=a.normalizeColor(e.componentHighlightColor);if(!z.success||!z.color)return{success:!1,error:z.error};s.forEach(R=>{n.componentHighlightColors.set(R,z.color)})}}const i=Array.from(n.highlightNets),d=Array.from(n.highlightComponents),p=T2(i,d),g=k2(n.highlightNets,n.highlightComponents,n.netHighlightColors,n.componentHighlightColors),m=e.autoLayerSelect??t.autoLayerSelect;let x,L,k;if(m){const N=a.resolveLayerSelection(l,{scope:e.layerScope??t.layerScope});if(!N.success||!((S=N.resolved)!=null&&S.length))return{success:!1,error:N.error};x=N.resolved.map(({layer:z})=>z.name),L=x[0]??null,k=[...x]}const U=e.autoFit??t.autoFit;let b,_;return U&&(a.hasDataset()?(b=a.resolveHighlightBounds({nets:i,components:d})??void 0,b?_={success:!0}:_={success:!1,error:a.errors.highlightMissing}):_={success:!1,error:a.errors.datasetMissing}),{success:!0,plan:{layers:x,activeLayer:L,highlightTokens:p,highlightColors:g,viewBox:b},matchedNets:l,matchedComponents:s,activatedLayers:k,fitResult:_}};function Md(e){return e.trim().toLowerCase()}function Qo(e){const t=e.split("/").pop()??e;return Md(t)}const lm=480,D2=1280,L2=5,sm=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`scene-${Date.now()}-${Math.random().toString(16).slice(2)}`,om=e=>{if(Array.isArray(e)){const t=new Set;return e.map(n=>n.trim()).filter(n=>n.length>0).filter(n=>t.has(n)?!1:(t.add(n),!0))}if(typeof e=="string"){const t=new Set;return e.split(",").map(n=>n.trim()).filter(n=>n.length>0).filter(n=>t.has(n)?!1:(t.add(n),!0))}return[]},O2=e=>{const t=e.trim();if(!t)return;if(t.startsWith("data:image/"))return t;const n=t.replace(/\s+/g,"");if(n)return n.startsWith("iVBOR")?`data:image/png;base64,${n}`:n.startsWith("/9j/")?`data:image/jpeg;base64,${n}`:`data:image/png;base64,${n}`},Zo=e=>{if(typeof window>"u"||typeof window.dispatchEvent!="function")return;const t=new CustomEvent(_d,{detail:{sceneId:e}});window.dispatchEvent(t)};function j2(e){const{layerState:t,nets:n,components:a,selectedNets:r,selectedComponents:l,setSelectedNets:s,setSelectedComponents:o,netHighlightColors:i,componentHighlightColors:d,setNetHighlightColors:p,setComponentHighlightColors:g,dimNonHighlighted:m,setDimNonHighlighted:x,autoShowLayers:L,setAutoShowLayers:k,traceOnly:U,setTraceOnly:b,getHighlightBounds:_,zoomToBounds:v,odbDatasetRef:S,cadenceDatasetRef:N,captureCanvas:z,buildViewerState:R,captureViewerStateThumbnail:K}=e,F=h.useCallback((M,X,A,B=100)=>{try{const V=new RegExp(X,A??"i"),D=M.filter(ie=>V.test(ie)),G=D.length,H=G>B,O=H?D.slice(0,B):D;return{success:!0,matchCount:G,matches:O,hasMore:H}}catch(V){return{success:!1,error:V instanceof Error?V.message:String(V)}}},[]),P=h.useRef(null),re=h.useRef(new Map),se=h.useCallback(M=>{P.current=M;const X=re.current;if(X.set(M.batchId,M),X.size<=L2)return;const A=X.keys().next().value;A&&X.delete(A)},[]),Ce=h.useCallback(M=>M?re.current.get(M)??null:P.current,[]),Ge=h.useCallback(M=>{const X=Md(M),A=t.layers.find(V=>Md(V.name)===X);if(A)return A;const B=Qo(M);return t.layers.find(V=>Qo(V.name)===B)??null},[t.layers]),Se=h.useCallback(M=>{const X=S.current??(N==null?void 0:N.current);if(!X)return null;const A=Array.isArray(M.nets)?M.nets.map(ae=>ae.trim()).filter(Boolean):[],B=Array.isArray(M.components)?M.components.map(ae=>ae.trim()).filter(Boolean):[];if(!A.length&&!B.length)return null;const V=typeof X.get_net_bounds_by_net=="function",D=typeof X.get_component_bounds_by_ref=="function";if(!V&&!D)return null;let G=null;const H=(ae,ge)=>ae?{minX:Math.min(ae.minX,ge.minX),minY:Math.min(ae.minY,ge.minY),maxX:Math.max(ae.maxX,ge.maxX),maxY:Math.max(ae.maxY,ge.maxY)}:{...ge},O=ae=>{if(!ae||typeof ae!="object")return null;const ge=typeof ae.minX=="number"?ae.minX:typeof ae.min_x=="number"?ae.min_x:null,we=typeof ae.minY=="number"?ae.minY:typeof ae.min_y=="number"?ae.min_y:null,de=typeof ae.maxX=="number"?ae.maxX:typeof ae.max_x=="number"?ae.max_x:null,ke=typeof ae.maxY=="number"?ae.maxY:typeof ae.max_y=="number"?ae.max_y:null;return ge===null||we===null||de===null||ke===null||!Number.isFinite(ge)||!Number.isFinite(we)||!Number.isFinite(de)||!Number.isFinite(ke)?null:sn({minX:ge,minY:we,maxX:de,maxY:ke})},ie=ae=>{!ae||typeof ae!="object"||Object.values(ae).forEach(ge=>{const we=O(ge);we&&(G=H(G,we))})};try{if(V&&A.length){const ae=X.get_net_bounds_by_net(A);ie(ae)}if(D&&B.length){const ae=X.get_component_bounds_by_ref(B);ie(ae)}}catch(ae){return console.warn("Highlight bounds resolution failed:",ae),null}return G?sn(G):null},[S,N]),Y=h.useCallback(()=>Se({nets:Array.from(r),components:Array.from(l)}),[Se,r,l]),ne=h.useCallback(M=>{const X=M.trim().toLowerCase();return/^#[0-9a-f]{6}$/.test(X)?{success:!0,color:X}:{success:!1,error:C("errors.colorFormat")}},[]),oe=h.useCallback((M,X,A,B)=>{const V=X.trim();if(!V)return{success:!1,error:C("errors.patternRequired")};if(!M.length)return{success:!1,error:C("errors.listFetchFailed",{type:B})};const D=A==null?void 0:A.trim();let G;try{G=new RegExp(V,D)}catch(O){const ie=O instanceof Error?O.message:String(O);return{success:!1,error:C("errors.regexInvalid",{message:ie})}}const H=[];for(const O of M)(G.global||G.sticky)&&(G.lastIndex=0),G.test(O)&&H.push(O);return H.length?{success:!0,matched:H}:{success:!1,error:C("errors.notFound",{type:B,name:X})}},[]),he=h.useCallback((M,X)=>oe(n,M,X,C("terms.net")),[oe,n]),Le=h.useCallback((M,X)=>oe(a,M,X,C("terms.component")),[oe,a]),Ke=3,Pe=h.useCallback((M,X)=>{const A=S.current;if(!A)return{success:!1,error:C("errors.datasetMissing")};const B=M.map(V=>V.trim()).filter(Boolean);if(!B.length)return{success:!1,error:C("errors.netSelectionEmpty")};if(typeof A.get_net_layer_counts!="function")return{success:!1,error:C("errors.netLayerMapMissing")};try{return{success:!0,counts:A.get_net_layer_counts(B,X)}}catch(V){return{success:!1,error:V instanceof Error?V.message:String(V)}}},[S]),et=M=>{const X=new Map;return Object.values(M).forEach(A=>{if(A)for(const[B,V]of Object.entries(A)){const D=X.get(B)??{netCount:0,featureCount:0};D.netCount+=1,D.featureCount+=typeof V=="number"?V:0,X.set(B,D)}}),X},je=(M,X)=>{const A=Array.from(M.entries());if(A.sort((B,V)=>{const D=V[1].netCount-B[1].netCount;if(D!==0)return D;const G=V[1].featureCount-B[1].featureCount;return G!==0?G:B[0].localeCompare(V[0],void 0,{numeric:!0})}),!A.length)return[];if(X==="primary"){const B=A[0][1].netCount;return A.filter(V=>V[1].netCount===B)}return X==="top-n"?A.slice(0,Ke):A},Ae=h.useCallback((M,X={})=>{const A=M.map(ge=>ge.trim()).filter(Boolean);if(!A.length)return{success:!1,error:C("errors.netSelectionEmpty")};const B=X.scope??"all",{success:V,counts:D,error:G}=Pe(A,B);if(!V||!D)return{success:!1,error:G};const H=et(D);if(!H.size)return{success:!1,error:C("errors.netLayerNotFound")};const O=X.mode??"all",ie=je(H,O);if(!ie.length)return{success:!1,error:C("errors.netLayerNotFound")};const ae=ie.map(([ge,we])=>{const de=Ge(ge);return de?{layer:{id:de.id,name:de.name},stat:we}:null}).filter(ge=>ge!==null);return ae.length?{success:!0,matchedNets:A.length,resolved:ae}:{success:!1,error:C("errors.netLayerNotFound")}},[Pe,Ge]),Je=h.useCallback(async(M={})=>{var Pt,cn;const X=M.includeLayers??!0,A=M.includeHighlights??!0,B=M.includeThumbnail??!0,V=M.autoFit??!0,D=M.autoLayerSelect??!0,G=M.layerScope??"all",H=typeof M.useHighlightBounds=="boolean"?M.useHighlightBounds:V&&A,O=M.viewBoxOverride??(H?Y():null),ie=O&&H?Cd(sn({...O})):O;let ae=M.layerNamesOverride,ge=M.activeLayerOverride;if(D&&!ae){const Jt=Array.from(r);if(Jt.length>0){const st=Ae(Jt,{scope:G});st.success&&((Pt=st.resolved)!=null&&Pt.length)&&(ae=st.resolved.map(({layer:en})=>en.name),ge=ge??ae[0]??null)}}const we=R({includeLayers:X,includeHighlights:A,viewBoxOverride:ie,layerNamesOverride:ae,activeLayerOverride:ge,highlightTokensOverride:M.highlightTokensOverride,highlightColorsOverride:M.highlightColorsOverride,highlightDimUnhighlightedOverride:M.highlightDimUnhighlightedOverride});if(!we)return{success:!1,error:C("status.scene.saveNoView")};const de=new Date().toISOString(),ke=de.slice(0,16).replace("T"," "),ze=((cn=M.title)==null?void 0:cn.trim())||C("scene.fallbackTitle",{timestamp:ke}),It=om(M.tags);let Yt;B&&(K?Yt=await K(we,lm):z&&(Yt=await z()));const wt={id:sm(),title:ze,tags:It,createdAt:de,updatedAt:de,viewerState:we,note:{markdown:M.note??"",lastEditedAt:de},thumbnail:Yt};try{return await Os(wt),Zo(wt.id),{success:!0,sceneId:wt.id,title:ze,tags:It,createdAt:wt.createdAt,updatedAt:wt.updatedAt,thumbnailIncluded:!!Yt}}catch(Jt){return console.warn("Scene save failed:",Jt),{success:!1,error:C("status.scene.saveStorageError")}}},[R,K,z,Y,Ae,r]),jt=h.useCallback(async M=>{var Jt;const X=Date.now(),A=Array.isArray(M.scenes)?M.scenes:[],B=M.autoLayerSelect??!0,V=M.autoFit??!0,D=M.includeThumbnail??!0,G=M.clearBetweenScenes??!0,H=M.layerScope??"all",O=[],ie=sm(),ae=new Date().toISOString();let ge=0,we=0;const de={batchId:ie,status:"running",startedAt:ae,updatedAt:ae,totalScenes:A.length,completed:0,failed:0,currentIndex:0,results:O};se(de);const ke={autoLayerSelect:B,autoFit:V,clearBetweenScenes:G,layerScope:H},ze=S.current,It=!!ze;It&&typeof ze.reset_scene_plan_state=="function"&&ze.reset_scene_plan_state();const Yt={highlightNets:new Set,highlightComponents:new Set,netHighlightColors:new Map,componentHighlightColors:new Map},wt={hasDataset:()=>!!ze,matchNets:he,matchComponents:Le,resolveLayerSelection:(st,en)=>Ae(st,{scope:en.scope}),resolveHighlightBounds:Se,normalizeColor:ne,errors:{datasetMissing:C("errors.datasetMissing"),highlightMissing:C("errors.highlightMissing")}};let Pt=null;for(const st of A){const en=((Jt=st.title)==null?void 0:Jt.trim())||C("scene.untitled");de.currentTitle=en,de.currentIndex=ge+we,de.updatedAt=new Date().toISOString(),se(de);let ve;if(It&&typeof(ze==null?void 0:ze.create_scene_plan)=="function")try{ve=ze.create_scene_plan(st,ke)}catch(ua){console.warn("WASM create_scene_plan failed, using fallback:",ua),ve=rm(st,ke,Yt,wt)}else ve=rm(st,ke,Yt,wt);if(!ve.success||!ve.plan){O.push({title:en,status:"failed",error:ve.error}),we+=1,de.failed=we,de.currentIndex=ge+we,de.updatedAt=new Date().toISOString(),se(de);continue}const kt=ve.matchedNets??[],un=ve.plan.viewBox??null,Ct=ve.plan.highlightColors??null,Te=st.includeThumbnail??D,Pn=st.highlightDimUnhighlighted??M.highlightDimUnhighlighted??m,$t=await Je({title:st.title,tags:st.tags,note:st.note,includeThumbnail:Te,viewBoxOverride:un,useHighlightBounds:!!un,layerNamesOverride:ve.plan.layers??null,activeLayerOverride:ve.plan.activeLayer??null,highlightTokensOverride:ve.plan.highlightTokens,highlightColorsOverride:Ct,highlightDimUnhighlightedOverride:Pn});if(!$t.success){O.push({title:en,status:"failed",error:$t.error}),we+=1,de.failed=we,de.currentIndex=ge+we,de.updatedAt=new Date().toISOString(),se(de);continue}Pt=$t.sceneId??Pt,O.push({sceneId:$t.sceneId,title:$t.title??en,status:"success",matchedNets:kt.length,activatedLayers:ve.activatedLayers,fitResult:ve.fitResult}),ge+=1,de.completed=ge,de.currentIndex=ge+we,de.updatedAt=new Date().toISOString(),se(de)}const cn=`${((Date.now()-X)/1e3).toFixed(2)}s`;return Pt&&Zo(Pt),de.status="completed",de.currentTitle=void 0,de.updatedAt=new Date().toISOString(),se(de),{success:we===0,batchId:ie,totalScenes:A.length,completed:ge,failed:we,results:O,executionTime:cn}},[Je,m,Le,he,ne,S,se,Ae,Se]),xt=h.useCallback(async(M={})=>{try{const X=await U_(),A=X.length,B=Math.max(0,Math.floor(M.offset??0)),V=M.limit??A,D=Math.max(0,Math.floor(V)),G=X.slice(B,B+D);return{success:!0,total:A,offset:B,limit:D,hasMore:B+D<A,scenes:G.map(H=>({id:H.id,title:H.title,tags:[...H.tags],createdAt:H.createdAt,updatedAt:H.updatedAt,hasThumbnail:!!H.thumbnail}))}}catch(X){return{success:!1,error:X instanceof Error?X.message:String(X)}}},[]),vt=h.useCallback(async(M,X=!0)=>{try{const A=await ou(M);if(!A)return{success:!1,error:C("errors.notFound",{type:"Scene",name:M})};if(X)return{success:!0,scene:A};const B={...A};return delete B.thumbnail,{success:!0,scene:B}}catch(A){return{success:!1,error:A instanceof Error?A.message:String(A)}}},[]),ft=h.useCallback(async M=>{const{sceneId:X,title:A,tags:B,note:V,thumbnail:D,refreshThumbnail:G}=M;if(!(A!==void 0||B!==void 0||V!==void 0||D!==void 0||G!==void 0))return{success:!1,error:"No updates requested"};const O=await ou(X);if(!O)return{success:!1,error:C("errors.notFound",{type:"Scene",name:X})};const ie=new Date().toISOString(),ae=A!==void 0?A.trim()||C("scene.untitled"):O.title,ge=B!==void 0?om(B):O.tags,we=V!==void 0?{markdown:V,lastEditedAt:ie}:O.note;let de=O.thumbnail;if(D!==void 0)if(D===null)de=void 0;else{const ze=O2(D);if(!ze)return{success:!1,error:"Invalid thumbnail data"};de=ze}else if(G){if(!K)return{success:!1,error:"Thumbnail refresh not available"};const ze=await K(O.viewerState,lm);if(!ze)return{success:!1,error:C("errors.captureFailed",{message:"thumbnail"})};de=ze}const ke={...O,title:ae,tags:ge,updatedAt:ie,note:we};de?ke.thumbnail=de:delete ke.thumbnail;try{return await Os(ke),Zo(ke.id),{success:!0,sceneId:ke.id,title:ke.title,tags:ke.tags,updatedAt:ke.updatedAt,thumbnailIncluded:!!ke.thumbnail}}catch(ze){return console.warn("Scene update failed:",ze),{success:!1,error:C("status.scene.saveStorageError")}}},[K]),Re=h.useCallback(async M=>{if(!await ou(M))return{success:!1,error:C("errors.notFound",{type:"Scene",name:M})};try{return await yd(M),Zo(M),{success:!0,sceneId:M}}catch(A){return console.warn("Scene delete failed:",A),{success:!1,error:C("status.scene.deleteStorageError")}}},[]);return h.useMemo(()=>({async loadFile(M){return{success:!1,error:C("errors.browserFileAccess")}},getLayers(){return t.layers.map((M,X)=>({id:M.id,index:X,name:M.name,visible:t.visibleLayerIds.has(M.id),status:M.status}))},setLayerVisible(M,X){const A=t.layers[M];return A?(t.setVisibility(A.id,X),X&&t.selectLayer(A.id),{success:!0}):{success:!1,error:C("errors.layerNotFound",{layer:M})}},getComponents(){return[...a]},searchNetsByRegex(M,X,A){return F(n,M,X,A)},searchComponentsByRegex(M,X,A){return F(a,M,X,A)},getNetLengths(M){const X=S.current;if(!X||typeof X.get_net_lengths!="function")return{success:!1,error:C("errors.datasetMissing")};try{const A=X.get_net_lengths(M);if(Array.isArray(A==null?void 0:A.results)){const D=A.results.map(H=>({netName:(H==null?void 0:H.netName)??(H==null?void 0:H.net_name)??"",totalLength:(H==null?void 0:H.totalLength)??(H==null?void 0:H.total_length)??0,layerLengths:(H==null?void 0:H.layerLengths)??(H==null?void 0:H.layer_lengths)??{},traceCount:(H==null?void 0:H.traceCount)??(H==null?void 0:H.trace_count)??0,featureCount:(H==null?void 0:H.featureCount)??(H==null?void 0:H.feature_count)??0})).filter(H=>H.netName),G=Array.isArray(A==null?void 0:A.missingNets)?A.missingNets:Array.isArray(A==null?void 0:A.missing_nets)?A.missing_nets:[];return{success:!0,unit:(A==null?void 0:A.unit)??"mm",results:D,missingNets:G}}const B=[],V=[];for(const D of M){const G=A==null?void 0:A[D];if(!G){V.push(D);continue}B.push({netName:D,totalLength:G.total_length??0,layerLengths:G.layer_lengths??{},traceCount:G.trace_count??0,featureCount:G.feature_count??0})}return{success:!0,unit:"mm",results:B,missingNets:V}}catch(A){return{success:!1,error:A instanceof Error?A.message:String(A)}}},getNetLengthsByRegex(M,X,A){var D;const B=F(n,M,X,A);return!B.success||!((D=B.matches)!=null&&D.length)?{...B,results:[],missingNets:[]}:{...this.getNetLengths(B.matches),matchCount:B.matchCount,matches:B.matches,hasMore:B.hasMore}},getNetPins(M){const X=S.current;if(!X||typeof X.get_net_pins!="function")return{success:!1,error:C("errors.datasetMissing")};try{const A=X.get_net_pins(M),B=Array.isArray(A==null?void 0:A.results)?A.results:null;if(B){const G=B.map(O=>({netName:(O==null?void 0:O.netName)??(O==null?void 0:O.net_name)??"",pins:Array.isArray(O==null?void 0:O.pins)?O.pins.map(ie=>({componentRef:ie.componentRef??ie.component_ref??"",pinNo:ie.pinNo??ie.pin_no??"",toeprintName:ie.toeprintName??ie.toeprint_name,side:ie.side??"unknown"})):[]})),H=Array.isArray(A==null?void 0:A.missingNets)?A.missingNets:Array.isArray(A==null?void 0:A.missing_nets)?A.missing_nets:[];return{success:!0,results:G,missingNets:H}}const V=[],D=[];for(const G of M){const H=A==null?void 0:A[G];if(!H||!Array.isArray(H)){D.push(G);continue}V.push({netName:G,pins:H.map(O=>({componentRef:O.component_ref??"",pinNo:O.pin_no??"",toeprintName:O.toeprint_name,side:O.side??"unknown"}))})}return{success:!0,results:V,missingNets:D}}catch(A){return{success:!1,error:A instanceof Error?A.message:String(A)}}},getNetPinsByRegex(M,X,A){var D;const B=F(n,M,X,A);return!B.success||!((D=B.matches)!=null&&D.length)?{...B,results:[],missingNets:[]}:{...this.getNetPins(B.matches),matchCount:B.matchCount,matches:B.matches,hasMore:B.hasMore}},highlightNetsByRegex(M,X,A){const B=F(n,M,A);if(!B.success)return{success:!1,error:B.error};const V=B.matches??[];return s(X?D=>{const G=new Set(D);return V.forEach(H=>G.add(H)),G}:D=>{const G=new Set(D);return V.forEach(H=>G.delete(H)),G}),{success:!0,matchedCount:V.length,updatedCount:V.length,matched:V,updated:V}},highlightComponentsByRegex(M,X,A){const B=F(a,M,A);if(!B.success)return{success:!1,error:B.error};const V=B.matches??[];return o(X?D=>{const G=new Set(D);return V.forEach(H=>G.add(H)),G}:D=>{const G=new Set(D);return V.forEach(H=>G.delete(H)),G}),{success:!0,matchedCount:V.length,updatedCount:V.length,matched:V,updated:V}},clearHighlights(){return s(new Set),o(new Set),{success:!0}},fitHighlights(){const M=_();return M?(v(M),{success:!0}):{success:!1,error:C("errors.highlightMissing")}},setViewBox(M){let X;const A=M.padding??.1;if(M.centerX!==void 0&&M.centerY!==void 0&&M.radius!==void 0){const B=M.radius*(1+A);X={minX:M.centerX-B,maxX:M.centerX+B,minY:M.centerY-B,maxY:M.centerY+B}}else if(M.minX!==void 0&&M.minY!==void 0&&M.maxX!==void 0&&M.maxY!==void 0){const B=M.maxX-M.minX,V=M.maxY-M.minY,D=B*A,G=V*A;X={minX:M.minX-D,maxX:M.maxX+D,minY:M.minY-G,maxY:M.maxY+G}}else return{success:!1,error:"Either viewBox (minX, minY, maxX, maxY) or center point (centerX, centerY, radius) is required"};return v(X),{success:!0,viewBox:X}},setHighlightColor(M,X,A){return M==="net"?p(B=>{const V=new Map(B);return V.set(X,A),V}):g(B=>{const V=new Map(B);return V.set(X,A),V}),{success:!0}},setHighlightColorByRegex(M,X,A,B,V){const G=F(M==="net"?n:a,X,B,V);if(!G.success)return{success:!1,error:G.error};const H=G.matches??[];return M==="net"?p(O=>{const ie=new Map(O);return H.forEach(ae=>ie.set(ae,A)),ie}):g(O=>{const ie=new Map(O);return H.forEach(ae=>ie.set(ae,A)),ie}),{success:!0,matchCount:G.matchCount,updatedCount:H.length,matches:H,updated:H,hasMore:G.hasMore}},setHighlightDimMode(M){return x(M),{success:!0,enabled:M}},autoSelectLayersForNets(M,X,A,B){var G;const V=S.current;if(!V||typeof V.get_net_layer_counts!="function")return{success:!1,error:C("errors.datasetMissing")};const D=F(n,M,X);if(!D.success||!((G=D.matches)!=null&&G.length))return{success:!0,matchedNets:0,activatedLayers:[],deactivatedLayers:[]};try{const H=B??(U?"trc":"all"),O=V.get_net_layer_counts(D.matches,H),ie=new Map;Object.values(O??{}).forEach(ge=>{!ge||typeof ge!="object"||Object.entries(ge).forEach(([we,de])=>{if(typeof de!="number"||de<=0)return;const ke=Qo(we);ie.set(ke,(ie.get(ke)??0)+de)})}),t.setAllVisible(!1);const ae=[];return t.layers.forEach(ge=>{const we=Qo(ge.name),de=ie.get(we);de&&de>0&&(t.setVisibility(ge.id,!0),ae.push({id:ge.id,name:ge.name,netCount:de}))}),ae.length>0&&t.selectLayer(ae[0].id),{success:!0,matchedNets:D.matches.length,activatedLayers:ae,deactivatedLayers:[]}}catch(H){return{success:!1,error:H instanceof Error?H.message:String(H)}}},getScenesBatchStatus(M){const X=Ce(M);return X?{success:!0,status:X}:{success:!1,error:C("errors.sceneBatchMissing")}},async listScenes(M){return await xt(M)},async getScene(M,X){return await vt(M,X)},async updateScene(M){return await ft(M)},async deleteScene(M){return await Re(M)},async createScene(M){return await Je(M)},async createScenesBatch(M){return await jt(M)},async captureScreen(){if(z){const M=await z();if(M)return{image:M}}if(K){const M=R({includeLayers:!0,includeHighlights:!0});if(M){const X=await K(M,D2);if(X)return{image:X}}}throw new Error(C("errors.captureFailed",{message:"Canvas not available"}))},getFileInfo(){const M=S.current;if(!M||typeof M.get_file_info!="function")return{success:!1,error:C("errors.datasetMissing")};try{return M.get_file_info()}catch(X){return{success:!1,error:X instanceof Error?X.message:String(X)}}},getComponentDetails(M){const X=S.current,A=N==null?void 0:N.current,B=X??A;if(!B)return{success:!1,error:C("errors.datasetMissing")};try{const{components:V,pattern:D,flags:G,limit:H}=M;return V&&V.length>0?typeof B.get_component_details!="function"?{success:!1,error:"get_component_details not available"}:B.get_component_details(V):D?typeof B.get_component_details_by_pattern!="function"?{success:!1,error:"get_component_details_by_pattern not available"}:B.get_component_details_by_pattern(D,G,H):typeof B.get_all_component_details!="function"?{success:!1,error:"get_all_component_details not available"}:B.get_all_component_details(H)}catch(V){return{success:!1,error:V instanceof Error?V.message:String(V)}}},searchComponentsByProperty(M){const X=S.current;if(!X||typeof X.search_components_by_property!="function")return{success:!1,error:C("errors.datasetMissing")};try{const{field:A,pattern:B,matchType:V,caseInsensitive:D,limit:G}=M;return X.search_components_by_property(A,B,V,D,G)}catch(A){return{success:!1,error:A instanceof Error?A.message:String(A)}}},getComponentPropertyNames(){const M=S.current;if(!M||typeof M.get_component_property_names!="function")return{success:!1,error:C("errors.datasetMissing")};try{return{success:!0,...M.get_component_property_names()}}catch(X){return{success:!1,error:X instanceof Error?X.message:String(X)}}},getComponentPropertyValues(M,X){const A=S.current;if(!A||typeof A.get_component_property_values!="function")return{success:!1,error:C("errors.datasetMissing")};try{return A.get_component_property_values(M,X)}catch(B){return{success:!1,error:B instanceof Error?B.message:String(B)}}},getComponentFieldValues(M,X){const A=S.current;if(!A||typeof A.get_component_field_values!="function")return{success:!1,error:C("errors.datasetMissing")};try{return A.get_component_field_values(M,X)}catch(B){return{success:!1,error:B instanceof Error?B.message:String(B)}}}}),[t,n,a,r,l,s,o,i,d,p,g,m,x,U,_,v,S,N,z,R,K,F,Ce,xt,vt,ft,Re,Je,jt])}const R2=288,B2=288,z2=220,U2=420,H2=240,I2=420;function im(e,t,n){return Math.min(n,Math.max(t,e))}function Y2(){const[e,t]=h.useState(R2),[n,a]=h.useState(B2),[r,l]=h.useState(null),s=h.useRef(null),o=h.useRef(null),i=h.useRef(null),d=h.useRef(null),p=h.useCallback(g=>m=>{var x,L;m.button!==0&&m.pointerType!=="touch"||(s.current={type:g,startX:m.clientX,startLeft:e,startRight:n},l(g),document.body.classList.add("resizing-panels"),(L=(x=m.currentTarget).setPointerCapture)==null||L.call(x,m.pointerId),m.preventDefault())},[e,n]);return h.useEffect(()=>{const g=()=>{o.current=null,i.current!==null&&(t(i.current),i.current=null),d.current!==null&&(a(d.current),d.current=null)},m=L=>{const k=s.current;if(!k)return;const U=L.clientX-k.startX;k.type==="left"?i.current=im(k.startLeft+U,z2,U2):d.current=im(k.startRight-U,H2,I2),o.current===null&&(o.current=window.requestAnimationFrame(g))},x=()=>{s.current&&(s.current=null,l(null),document.body.classList.remove("resizing-panels"),g())};return window.addEventListener("pointermove",m),window.addEventListener("pointerup",x),window.addEventListener("pointercancel",x),()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",x),o.current!==null&&(cancelAnimationFrame(o.current),o.current=null)}},[]),{leftWidth:e,rightWidth:n,activeResizer:r,startResize:p}}async function G2(e){const t=await e.arrayBuffer(),n=new DataView(t),a=new TextDecoder("utf-8"),r=X2(n);if(r<0)throw new Error("End of central directory not found");const l=n.getUint16(r+10,!0),s=n.getUint32(r+16,!0);if(s>=n.byteLength)throw new Error("Invalid central directory offset");let o=s;const i=[];for(let d=0;d<l&&n.getUint32(o,!0)===33639248;d+=1){const p=n.getUint16(o+10,!0),g=n.getUint32(o+20,!0),m=n.getUint32(o+24,!0),x=n.getUint16(o+28,!0),L=n.getUint16(o+30,!0),k=n.getUint16(o+32,!0),U=n.getUint32(o+42,!0),b=new Uint8Array(t,o+46,x),_=a.decode(b);if(o+=46+x+L+k,_.endsWith("/"))continue;const v=n.getUint16(U+26,!0),S=n.getUint16(U+28,!0),N=U+30+v+S;if(N+g>t.byteLength)continue;const z=new Uint8Array(t,N,g),R=await V2(z,p,m,a);i.push({name:_,text:R})}return i}function X2(e){const t=Math.max(0,e.byteLength-65535-22);for(let n=e.byteLength-22;n>=t;n-=1)if(e.getUint32(n,!0)===101010256)return n;return-1}async function V2(e,t,n,a){if(t===0)return a.decode(e);if(t===8){const r=await q2(e);return n&&n!==4294967295&&n!==r.length&&console.warn(`Zip entry size mismatch: expected ${n}, got ${r.length}`),a.decode(r)}throw new Error(`Unsupported compression method: ${t}`)}async function q2(e){const t=globalThis.DecompressionStream;if(!t)throw new Error("DecompressionStream is not available in this environment");try{const n=new Blob([e]).stream().pipeThrough(new t("deflate-raw")),a=await new Response(n).arrayBuffer();return new Uint8Array(a)}catch{const n=new Blob([e]).stream().pipeThrough(new t("deflate")),a=await new Response(n).arrayBuffer();return new Uint8Array(a)}}const ay=31,ry=157,$2=128,F2=31,Ko=256,cm=257;function ly(e){return e.length>=3&&e[0]===ay&&e[1]===ry}function W2(e){if(e.length<3)throw new Error("Invalid .Z file: too short");if(e[0]!==ay||e[1]!==ry)throw new Error("Invalid .Z file: bad magic number");const t=e[2],n=t&F2,a=(t&$2)!==0;if(n<9||n>16)throw new Error(`Invalid .Z file: unsupported max bits ${n}`);return Q2(e.subarray(3),n,a)}function Q2(e,t,n){const r=(1<<t)-1,l=[],s=new Uint16Array(r+1),o=new Uint8Array(r+1),i=new Uint8Array(r+1);for(let F=0;F<256;F++)o[F]=F;let d=n?cm:Ko,p=9,g=1<<p,m=0,x=0,L=0,k=0;function U(){return L>=e.length?null:e[L++]}function b(F){for(;x<F;){const P=U();if(P===null)return!1;m|=P<<x,x+=8}return!0}function _(){if(!b(p))return null;const F=m&(1<<p)-1;m>>>=p,x-=p,k+=p;const P=p*8;return k===P&&(k=0),F}function v(F){let P=F;for(;P>0;){if(x===0){const se=U();if(se===null)return!1;m=se,x=8}const re=Math.min(P,x);m>>>=re,x-=re,P-=re}return!0}function S(){if(k===0)return!0;const F=p*8-k,P=v(F);return k=0,P}function N(){d=n?cm:Ko,p=9,g=1<<p}let z=_();if(z===null)return new Uint8Array(l);if(n&&z===Ko){if(!S())return new Uint8Array(l);if(N(),z=_(),z===null)return new Uint8Array(l)}if(z>=256)return console.warn(`LZW: invalid first code ${z}`),new Uint8Array(l);let R=z,K=z;for(l.push(z);z=_(),z!==null;){if(n&&z===Ko){if(!S()||(N(),z=_(),z===null))break;if(z>=256){console.warn(`LZW: invalid code after clear ${z}`);break}l.push(z),R=z,K=z;continue}let F=z,P=0;if(z>d){console.warn(`LZW: invalid code ${z}, expected <= ${d}`);break}for(z===d&&(i[P++]=K,z=R);z>=256;)i[P++]=o[z],z=s[z];K=z,i[P++]=K;for(let re=P-1;re>=0;re--)l.push(i[re]);if(d<=r&&(s[d]=R,o[d]=K,d++,d>=g&&p<t)){if(!S())break;p++,g=1<<p}R=F}return new Uint8Array(l)}async function sy(e){const t=W2(e);return new TextDecoder("utf-8").decode(t)}const Mt=(e,t=3)=>Number(e.toFixed(t));function Za(e){return typeof e=="number"&&Number.isFinite(e)?e:null}function Z2(){return{layersWithWasmStats:0,parseMs:0,resolveCatalogMs:0,featureStoreMs:0,geomConvertMs:0,geomStoreMs:0,sceneBuildMs:0,wasmTotalMs:0,jsOverheadMs:0}}function K2(e,t){const n=e&&typeof e.mode=="string"?e.mode:null,a=e?Za(e.parseMs):null,r=e?Za(e.resolveCatalogMs):null,l=e?Za(e.featureStoreMs):null,s=e?Za(e.geomConvertMs):null,o=e?Za(e.geomStoreMs):null,i=e?Za(e.sceneBuildMs):null,d=e?Za(e.totalMs):null,p=e?Za(e.geomCount):null,g=p===null?0:Math.max(0,Math.floor(p)),m=d===null?null:Math.max(0,t-d);return{hasWasmStats:!!e,mode:n,parseMs:a,resolveCatalogMs:r,featureStoreMs:l,geomConvertMs:s,geomStoreMs:o,sceneBuildMs:i,wasmTotalMs:d,jsOverheadMs:m,geomCount:g}}function P2(e,t){t.hasWasmStats&&(e.layersWithWasmStats+=1,t.parseMs!==null&&(e.parseMs+=t.parseMs),t.resolveCatalogMs!==null&&(e.resolveCatalogMs+=t.resolveCatalogMs),t.featureStoreMs!==null&&(e.featureStoreMs+=t.featureStoreMs),t.geomConvertMs!==null&&(e.geomConvertMs+=t.geomConvertMs),t.geomStoreMs!==null&&(e.geomStoreMs+=t.geomStoreMs),t.sceneBuildMs!==null&&(e.sceneBuildMs+=t.sceneBuildMs),t.wasmTotalMs!==null&&(e.wasmTotalMs+=t.wasmTotalMs),t.jsOverheadMs!==null&&(e.jsOverheadMs+=t.jsOverheadMs))}function J2(e){const{jobName:t,totalMs:n,parsedLayerCount:a,layerTotal:r,counts:l,stageMs:s,layerParseRows:o,heapStartMb:i,heapEndMb:d}=e,p=[...o].sort((m,x)=>x.ms-m.ms).slice(0,10),g=l.layerPrepareBreakdown;if(console.groupCollapsed(`[ODB load perf] ${t} total=${Mt(n,1)}ms parsed=${a}/${r}`),console.log("counts",{...l,layerPrepareBreakdown:{layersWithWasmStats:g.layersWithWasmStats,parseMs:Mt(g.parseMs,2),resolveCatalogMs:Mt(g.resolveCatalogMs,2),featureStoreMs:Mt(g.featureStoreMs,2),geomConvertMs:Mt(g.geomConvertMs,2),geomStoreMs:Mt(g.geomStoreMs,2),sceneBuildMs:Mt(g.sceneBuildMs,2),wasmTotalMs:Mt(g.wasmTotalMs,2),jsOverheadMs:Mt(g.jsOverheadMs,2)}}),console.table(Object.entries(s).map(([m,x])=>({stage:m,ms:Mt(x,2)}))),p.length>0&&console.table(p.map(m=>({layer:m.layer,ms:Mt(m.ms,2),wasmTotalMs:m.wasmTotalMs===null?null:Mt(m.wasmTotalMs,2),jsOverheadMs:m.jsOverheadMs===null?null:Mt(m.jsOverheadMs,2),parseMs:m.parseMs===null?null:Mt(m.parseMs,2),resolveCatalogMs:m.resolveCatalogMs===null?null:Mt(m.resolveCatalogMs,2),featureStoreMs:m.featureStoreMs===null?null:Mt(m.featureStoreMs,2),geomConvertMs:m.geomConvertMs===null?null:Mt(m.geomConvertMs,2),geomStoreMs:m.geomStoreMs===null?null:Mt(m.geomStoreMs,2),sceneBuildMs:m.sceneBuildMs===null?null:Mt(m.sceneBuildMs,2),geomCount:m.geomCount,shapeCount:m.shapeCount,mode:m.mode,path:m.path}))),i!==null||d!==null){const m=i!==null&&d!==null?d-i:null;console.log("heapMB",{start:i===null?null:Mt(i,1),end:d===null?null:Mt(d,1),delta:m===null?null:Mt(m,1)})}console.groupEnd()}function eS(e){if(!e||typeof e!="object")return null;const t=typeof e.layerId=="number"?e.layerId:typeof e.layerId=="bigint"?Number(e.layerId):typeof e.layer_id=="number"?e.layer_id:typeof e.layer_id=="bigint"?Number(e.layer_id):null,n=typeof e.layerName=="string"?e.layerName:typeof e.layer_name=="string"?e.layer_name:null,a=typeof e.geomId=="string"?e.geomId:typeof e.geom_id=="string"?e.geom_id:typeof e.shapeId=="string"?e.shapeId:typeof e.shape_id=="string"?e.shape_id:null,r=typeof e.geomIndex=="number"?e.geomIndex:typeof e.geomIndex=="bigint"?Number(e.geomIndex):typeof e.geom_index=="number"?e.geom_index:typeof e.geom_index=="bigint"?Number(e.geom_index):typeof e.shapeIndex=="number"?e.shapeIndex:typeof e.shapeIndex=="bigint"?Number(e.shapeIndex):typeof e.shape_index=="number"?e.shape_index:typeof e.shape_index=="bigint"?Number(e.shape_index):null,l=typeof e.geometryKind=="string"?e.geometryKind:typeof e.geometry_kind=="string"?e.geometry_kind:null,s=typeof e.layerRevision=="number"?e.layerRevision:typeof e.layerRevision=="bigint"?Number(e.layerRevision):typeof e.layer_revision=="number"?e.layer_revision:typeof e.layer_revision=="bigint"?Number(e.layer_revision):null,o=e.bounds??null,i=typeof(o==null?void 0:o.minX)=="number"?o.minX:typeof(o==null?void 0:o.min_x)=="number"?o.min_x:null,d=typeof(o==null?void 0:o.minY)=="number"?o.minY:typeof(o==null?void 0:o.min_y)=="number"?o.min_y:null,p=typeof(o==null?void 0:o.maxX)=="number"?o.maxX:typeof(o==null?void 0:o.max_x)=="number"?o.max_x:null,g=typeof(o==null?void 0:o.maxY)=="number"?o.maxY:typeof(o==null?void 0:o.max_y)=="number"?o.max_y:null;if(t===null||!n||!a||r===null||!l||s===null||i===null||d===null||p===null||g===null)return null;const m=typeof e.featureIndex=="number"?e.featureIndex:typeof e.featureIndex=="bigint"?Number(e.featureIndex):typeof e.feature_index=="number"?e.feature_index:typeof e.feature_index=="bigint"?Number(e.feature_index):void 0;return{layerId:t,layerName:n,geomId:a,geomIndex:r,featureIndex:m,geometryKind:l,bounds:{minX:i,minY:d,maxX:p,maxY:g},layerRevision:s}}function Of(e){const t=e.webkitRelativePath||e.name;return t.includes("/")?t.split("/").slice(1).join("/"):t}function um(e){return e.some(t=>{const a=Of(t).toLowerCase();return!!(a==="matrix/matrix"||a==="matrix/matrix.z"||a==="misc/info"||a==="misc/info.z"||a.startsWith("steps/")&&a.includes("/layers/")&&(a.endsWith("/features")||a.endsWith("/features.z")))})}function tS(e){const t=e[0],n="ODB++ Job";if(!t)return n;const a=t.webkitRelativePath;return a&&a.includes("/")?a.split("/")[0]||t.name||n:t.name||n}function nS(e){const t=e.split("/"),n=t.map(a=>a.toLowerCase());return t.length>=4&&n[0]==="steps"&&n[2]==="layers"&&n[t.length-1]==="features"}function dm(e){const t=e.split("/");return t.length>=5&&t[0].toLowerCase()==="steps"&&t[2].toLowerCase()==="layers"?{step:t[1],layer:t[3],label:t[3]}:{label:e}}function aS(e){const t=new Map;for(const a of e){const r=Of(a),l=r.toLowerCase();if(!(l.includes("zone.identifier")||l.includes(":"))&&!a.name.startsWith("."))if(l.endsWith(".z")){const s=r.slice(0,-2).toLowerCase(),o=t.get(s)??{};o.compressed||(o.compressed=a,t.set(s,o))}else{const s=t.get(l)??{};s.uncompressed=a,t.set(l,s)}}const n=[];for(const{uncompressed:a,compressed:r}of t.values())a?n.push(a):r&&n.push(r);return n}async function rS(e){const t=Of(e);if(t.toLowerCase().endsWith(".z")){const r=t.slice(0,-2);try{const l=await e.arrayBuffer(),s=new Uint8Array(l);if(!ly(s))return console.warn("Invalid .Z file (bad magic):",t),{path:r,text:"",sourcePath:t,isCompressed:!0};const o=await sy(s);return{path:r,text:o,sourcePath:t,isCompressed:!0}}catch(l){return console.error("Failed to decompress .Z file:",t,l),{path:r,text:"",sourcePath:t,isCompressed:!0}}}const a=await e.text();return{path:t,text:a,sourcePath:t,isCompressed:!1}}function lS(e,t,n){const a=n.path.toLowerCase(),r=t.get(a);r&&!r.isCompressed&&n.isCompressed||(e.set(n.path,n.text),t.set(a,{isCompressed:n.isCompressed,sourcePath:n.sourcePath}))}function go(e){const t=e.webkitRelativePath||e.name;return t.includes("/")?t.split("/").slice(1).join("/"):t}function fm(e){const t=["_layers.out","_fullgeoms.out"],n=new Set;for(const a of e){const l=go(a).toLowerCase();for(const s of t){const o=s.slice(1);(l===o||l.endsWith("/"+o)||l.endsWith(s)||l.endsWith("/"+s.slice(1)))&&n.add(s)}}return n.has("_layers.out")&&n.has("_fullgeoms.out")}function sS(e){const t=e[0],n="Cadence Design";if(!t)return n;const a=t.webkitRelativePath;return a&&a.includes("/")?a.split("/")[0]||t.name||n:t.name||n}function oS(e){return e.filter(t=>{const a=go(t).toLowerCase();return a.includes("zone.identifier")||a.includes(":")||t.name.startsWith(".")?!1:a.endsWith(".out")})}async function iS(e){const t=go(e),n=await e.text();return{path:t,text:n,sourcePath:t}}async function cS(e){const t=oS(e),n={};for(const a of t){const r=await iS(a);n[r.path]=r.text}return n}function uS(e){const t=["layers","fullgeoms","nets","compprops","pads","pins"],n=new Map;for(const a of e){const l=go(a).split("/").pop()||a.name,s=l.toLowerCase();if(!s.endsWith(".out"))continue;let o=null,i=null;if(s.startsWith("penta_")){const p=l.slice(6).slice(0,-4),g=p.lastIndexOf("_");g>0&&(o=p.slice(0,g),i=p.slice(g+1).toLowerCase())}else{const d=l.slice(0,-4),p=d.lastIndexOf("_");if(p>0){const g=d.slice(p+1).toLowerCase();t.includes(g)&&(o=d.slice(0,p),i=g)}}if(o&&i){const d=o.toLowerCase(),p=n.get(d)||{original:o,hasLayers:!1,hasFullgeoms:!1};i==="layers"&&(p.hasLayers=!0),i==="fullgeoms"&&(p.hasFullgeoms=!0),n.set(d,p)}}return Array.from(n.values()).filter(a=>a.hasLayers&&a.hasFullgeoms).map(a=>a.original).sort()}function hm(e,t){const n=t.toLowerCase(),a=["layers","fullgeoms","nets","compprops","pads","pins"];return e.filter(r=>{const o=(go(r).split("/").pop()||r.name).toLowerCase();return o.endsWith(".out")?o.startsWith(`penta_${n}_`)?!0:o.startsWith(`${n}_`)?a.some(i=>o===`${n}_${i}.out`):!1:!1})}const Kt={},al={net:"#ffff00",component:"#00ffff"},gm="#ffffff",mm="#f59e0b",pm="#22d3ee",dS="#e2e8f0",bm=6,bu=!1,fS=4,hS=120,gS=200,mS={categories:["via","pin","trace","plane"]},oy=[".gbr",".ger",".gtl",".gbl",".gts",".gbs",".gto",".gbo",".gtp",".gbp",".gm1",".gm2",".gm3",".gko",".gdo",".drl",".xln",".exc",".txt",".pgeom",".zip",".tgz",".tar.gz",".gz",".z"],pS=oy.join(","),_m=480,bS=1280,ym="coco.viewer.renderer",xm="coco.viewer.webgpuWorker",vm="coco.viewer.odb.skipDocumentLayers",wm="coco.viewer.webgpuPerformanceMode";function ia(e){if(!e)return!1;const t=e.trim().toLowerCase();return t==="1"||t==="true"||t==="log"||t==="on"}function yl(e){if(e==null)return null;const t=e.trim().toLowerCase();return t.length===0?null:t==="1"||t==="true"||t==="on"||t==="yes"?!0:t==="0"||t==="false"||t==="off"||t==="no"?!1:null}function _S(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search);if(ia(t.get("pickPerf")))return!0}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_PICK_PERF:void 0;return ia(e)}function yS(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search);if(ia(t.get("odbPerf"))||ia(t.get("loadPerf")))return!0}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_ODB_LOAD_PERF:void 0;return ia(e)}function xS(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search);if(ia(t.get("skipDoc"))||ia(t.get("skipDocument"))||ia(t.get("skipDocumentLayers")))return!0}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_ODB_SKIP_DOCUMENT_LAYERS:void 0;return ia(e)}function vS(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search),n=t.get("webgpuRenderPerf")??t.get("renderPerfMode")??t.get("fastArc");if(n){const a=n.trim().toLowerCase();if(a==="performance"||a==="perf"||a==="fast"||ia(a))return!0}}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_WEBGPU_RENDER_PERF:void 0;if(typeof e=="string"){const t=e.trim().toLowerCase();if(t==="performance"||t==="perf"||t==="fast")return!0}return ia(e)}function wS(){if(typeof window<"u"){const n=new URLSearchParams(window.location.search),a=yl(n.get("odbCacheOnly"))??yl(n.get("cacheOnly"))??yl(n.get("webgpuCacheOnly"));if(a!==null)return a}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_ODB_CACHE_ONLY:void 0,t=yl(e);return t!==null?t:!0}function SS(){if(typeof window<"u"){const n=new URLSearchParams(window.location.search),a=yl(n.get("geomCacheOnly"));if(a!==null)return a}const e=typeof import.meta<"u"?Kt==null?void 0:Kt.VITE_ODB_GEOM_CACHE_ONLY:void 0,t=yl(e);return t!==null?t:!1}function Sm(){var n;if(typeof performance>"u")return null;const t=(n=performance.memory)==null?void 0:n.usedJSHeapSize;return typeof t!="number"||!Number.isFinite(t)?null:t/(1024*1024)}function CS(e,t){if(!e.length)return null;const n=[...e].sort((r,l)=>r-l),a=Math.max(0,Math.ceil(n.length*t)-1);return n[a]}function Dt(e){return e.trim().toLowerCase()}function Nt(e){const t=e.split("/").pop()??e;return Dt(t)}const at=(e,t=3)=>Number(e.toFixed(t));function Cm(e){switch(e.type){case"line":{const t=Math.hypot(e.end.x-e.start.x,e.end.y-e.start.y);return`W=${at(e.width)}, L=${at(t)}`}case"arc":{const t=Math.hypot(e.start.x-e.center.x,e.start.y-e.center.y);return`W=${at(e.width)}, R=${at(t)}`}case"circle":return`R=${at(e.radius)}, D=${at(e.radius*2)}`;case"rect":{const t=Math.abs(e.rightTop.x-e.leftBottom.x),n=Math.abs(e.rightTop.y-e.leftBottom.y);return`W=${at(t)}, H=${at(n)}`}case"polygon":return`Vertices=${e.path.segments.length+1}`;case"surface":return`Polygons=${e.polygons.length}`;default:return"-"}}function Em(e){const t=Math.abs(e.maxX-e.minX),n=Math.abs(e.maxY-e.minY);return`W=${at(t)}, H=${at(n)}`}function Mm(e,t,n){const a=e.x*t.scale+t.translateX,r=n.height-t.translateY-e.y*t.scale;return{x:a,y:r}}function ES(e){return!e||typeof e!="object"?null:{netName:typeof e.netName=="string"?e.netName:void 0,subnetType:typeof e.subnetType=="string"?e.subnetType:void 0,featureType:typeof e.featureType=="string"?e.featureType:void 0,componentRef:typeof e.componentRef=="string"?e.componentRef:void 0,componentSide:typeof e.componentSide=="string"?e.componentSide:void 0,toeNo:typeof e.toeNo=="number"?e.toeNo:void 0,pinName:typeof e.pinName=="string"?e.pinName:void 0}}function MS(e){return e.toLowerCase().endsWith(".zip")}function NS(e){const t=e.toLowerCase();return t.endsWith(".tgz")||t.endsWith(".tar.gz")}function AS(e){const t=e.toLowerCase();return t.endsWith(".drl")||t.endsWith(".xln")||t.endsWith(".exc")||t.endsWith(".pgeom")||t.endsWith(".txt")?!0:t.endsWith(".gbr")||t.endsWith(".ger")||t.endsWith(".gtl")||t.endsWith(".gbl")||t.endsWith(".gts")||t.endsWith(".gbs")||t.endsWith(".gto")||t.endsWith(".gbo")||t.endsWith(".gtp")||t.endsWith(".gbp")||t.endsWith(".gm1")||t.endsWith(".gm2")||t.endsWith(".gm3")||t.endsWith(".gko")||t.endsWith(".gdo")}async function TS(e){const t=globalThis.DecompressionStream;if(!t)throw new Error("DecompressionStream is not available in this environment");const n=new Blob([e]).stream().pipeThrough(new t("gzip")),a=await new Response(n).arrayBuffer();return new TextDecoder("utf-8").decode(a)}function kS(e,t){const n=e.toLowerCase();if(n.endsWith(".pgeom"))return"pgeom";if(n.endsWith(".drl")||n.endsWith(".xln")||n.endsWith(".exc"))return"excellon";const a=t.slice(0,1e3).toUpperCase();return a.includes("M48")||a.includes("INCH")||a.includes("METRIC")?"excellon":a.includes("%FSLAX")||a.includes("%MOMM")||a.includes("%MOIN")?"gerber":t.trim().startsWith("POLYGON")||t.trim().startsWith("LINESTRING")?"pgeom":"gerber"}function DS(){var lh,sh;const e=h.useRef(null),t=h.useRef(null),n=h.useRef(null),a=h.useRef(null),r=h.useRef(null),l=h.useRef(null),[s,o]=h.useState(0),i=h.useRef(null),d=h.useRef(0),[p,g]=h.useState(!0),[m,x]=h.useState(!0),{leftWidth:L,rightWidth:k,activeResizer:U,startResize:b}=Y2(),_=h.useRef(null),v=h.useRef(null),S=h.useRef(new Map),N=h.useRef(new Map),[z,R]=h.useState([]),[K,F]=h.useState([]),[P,re]=h.useState(new Set),[se,Ce]=h.useState(new Set),[Ge,Se]=h.useState(new Map),[Y,ne]=h.useState(new Map),[oe,he]=h.useState(null),[Le,Ke]=h.useState([]),Pe=h.useCallback(f=>{const w=typeof performance<"u"?performance.now():Date.now();if(w-d.current<gS)return;d.current=w;const T=i.current;T&&Math.abs(T.worldX-f.worldX)<1e-6&&Math.abs(T.worldY-f.worldY)<1e-6||(i.current=f,Dw(f))},[]),et=h.useCallback(()=>{i.current=null,d.current=0,Lw()},[]),je=typeof localStorage>"u"?null:localStorage.getItem(ym),Ae=je==="webgpu"||je==="canvas"?je:null,Je=h.useRef(Ae!==null),jt=h.useRef(Promise.resolve()),xt=h.useRef(null),[vt,ft]=h.useState(null),[Re,ee]=h.useState(null),[M,X]=h.useState(null),[A,B]=h.useState(!1),[V,D]=h.useState(!1),[G,H]=h.useState(!0),[O,ie]=h.useState({a:null,b:null}),[ae,ge]=h.useState(null),[we,de]=h.useState(null),[ke,ze]=h.useState(!1),[It,Yt]=h.useState(!1),[wt,Pt]=h.useState(!1),[cn,Jt]=h.useState(!1),[st,en]=h.useState(!1),[ve,kt]=h.useState("replace"),[un,Ct]=h.useState(null),[Te,Pn]=h.useState(()=>{const f=typeof navigator<"u"&&!!navigator.gpu;return Ae||(f?"webgpu":"canvas")}),[$t,ua]=h.useState(()=>typeof localStorage>"u"?!1:localStorage.getItem(xm)==="true"),[xa,fc]=h.useState(()=>{if(typeof localStorage<"u"){const f=localStorage.getItem(vm);if(f==="true")return!0;if(f==="false")return!1}return xS()}),[En,hc]=h.useState(()=>{if(typeof localStorage<"u"){const f=localStorage.getItem(wm);if(f==="true")return!0;if(f==="false")return!1}return vS()}),[Fl,mo]=h.useState(0),Wl=h.useRef(null),Sr=h.useRef(!1),Hn=h.useRef(null),Cr=h.useRef(null),$a=h.useRef(!1),Z=h.useRef(null),ce=E1(),Q=N1(),{resolvedTheme:ot,toggleTheme:Mn}=w2(),Er=ot==="dark",va=h.useMemo(()=>typeof navigator<"u"&&!!navigator.gpu,[]),Jn=h.useMemo(()=>_S(),[]),Nn=h.useMemo(()=>yS(),[]),Gt=h.useMemo(()=>wS(),[]),jf=h.useMemo(()=>SS(),[]),iy=h.useRef([]),Rf=h.useCallback((f,w)=>{if(!Jn)return;const T=iy.current;T.push(f),T.length>hS&&T.shift();const j=CS(T,.95);console.log("[webgpu-pick] perf",{status:w,durationMs:at(f,2),p95Ms:j===null?null:at(j,2),samples:T.length})},[Jn]);h.useEffect(()=>{if(!(typeof localStorage>"u")){if(!Je.current){Je.current=!0;return}localStorage.setItem(ym,Te)}},[Te]),h.useEffect(()=>{typeof localStorage>"u"||localStorage.setItem(xm,String($t))},[$t]),h.useEffect(()=>{typeof localStorage>"u"||localStorage.setItem(vm,String(xa))},[xa]),h.useEffect(()=>{typeof localStorage>"u"||localStorage.setItem(wm,String(En))},[En]),h.useEffect(()=>{!va&&Te==="webgpu"&&(Je.current=!1,Pn("canvas"))},[Te,va]),h.useEffect(()=>{const f=fo(()=>o(w=>w+1));return()=>{f()}},[]),h.useEffect(()=>()=>{const f=xt.current;if(f)try{Gg(f.key)}catch(w){console.warn("Failed to drop WebGPU offscreen cache:",w)}},[]);const Fa=h.useMemo(()=>{const f=new Map,w=_.current??v.current;if(!w)return f;const T=Array.from(P),j=Array.from(se);if(!T.length&&!j.length)return f;const q=typeof w.get_net_features_by_net=="function",$=typeof w.get_component_features_by_ref=="function";if(!q&&!$)return f;const le=(fe,_e,te,be)=>{if(fe)for(const[ye,me]of Object.entries(fe)){const qe=_e.get(ye)??te;for(const[it,Be]of Object.entries(me)){const Fe=Dt(it);let Rt=f.get(Fe);Rt||(Rt=new Map,f.set(Fe,Rt));for(const ue of Be)!be&&Rt.has(ue)||Rt.set(ue,qe)}}};try{const fe=q&&T.length?w.get_net_features_by_net(T):null,_e=$&&j.length?w.get_component_features_by_ref(j):null;le(fe,Ge,al.net,!1),le(_e,Y,al.component,!0)}catch(fe){console.warn("   :",fe)}return f},[P,se,Ge,Y]),cy=h.useCallback((f,w)=>{const T=f==="net"?Ge:Y,j=f==="net"?al.net:al.component;return T.get(w)??j},[Ge,Y]),uy=h.useCallback((f,w,T)=>{if(f==="net"){Se(j=>{const q=new Map(j);return q.set(w,T),q});return}ne(j=>{const q=new Map(j);return q.set(w,T),q})},[]),Bf=h.useMemo(()=>{const f=new Map;return Q.layers.forEach(w=>{f.set(w.id,Nt(w.name))}),f},[Q.layers]),zf=h.useMemo(()=>{const f=new Map;return Q.layers.forEach(w=>{f.set(w.id,w)}),f},[Q.layers]),Uf=h.useMemo(()=>{const f=new Map;return Q.layers.forEach(w=>{if(!w.shapes)return;const T=new Map;w.shapes.forEach((j,q)=>{T.set(j.id,q)}),f.set(w.id,T)}),f},[Q.layers]),Ql=h.useCallback(f=>{const w=Dt(f),T=Q.layers.find(q=>Dt(q.name)===w);if(T)return T;const j=Nt(f);return Q.layers.find(q=>Nt(q.name)===j)??null},[Q.layers]),Kr=h.useCallback(f=>{const w=Dt(f),T=Nt(f);return N.current.get(w)??N.current.get(T)??null},[]),po=h.useCallback((f,w)=>{const T=Kr(f.name);return T!==null?`${T}:${w}`:`${f.id}:${w}`},[Kr]),Hf=h.useCallback(f=>{const w=f.layerId;if(!w)return null;const T=zf.get(w);if(!T)return null;const j=Uf.get(w);if(!j)return null;const q=j.get(f.id);return q===void 0?null:po(T,q)},[po,zf,Uf]),If=h.useCallback((f,w)=>{if(!w||w.kind!=="odb"&&w.kind!=="cadence")return de("ODB++ or Cadence layer only"),null;if(f.featureIndex===void 0)return de("Feature index unavailable"),null;const T=Kr(w.name);return T===null?(de("Layer index unavailable"),null):f.geomId?{selectionKey:f.geomId,layerId:w.id,layerName:w.name,layerRow:T,featureIndex:f.featureIndex,geomIndex:f.geomIndex,geometryKind:f.geometryKind,bounds:f.bounds}:(de("Selection key unavailable"),null)},[Kr]),Yf=h.useCallback(f=>{de(null),ge(null),ie(w=>!w.a||w.a&&w.b?{a:f,b:null}:{...w,b:f})},[]),bo=h.useCallback((f,w)=>{if(!V)return;let T=_.current;if((!T||typeof T.measure_distance!="function")&&(T=v.current),!T||typeof T.measure_distance!="function"){de("Dataset not available");return}const j=If(f,w);j&&Yf(j)},[Yf,If,V]),_o=(Re==null?void 0:Re.geomId)??null,gc=h.useMemo(()=>{var w,T;if(!V)return new Map;const f=new Map;return(w=O.a)!=null&&w.selectionKey&&f.set(O.a.selectionKey,mm),(T=O.b)!=null&&T.selectionKey&&f.set(O.b.selectionKey,pm),f},[V,O.a,O.b]),dy=h.useMemo(()=>{var T,j;const f=[];Re!=null&&Re.layerId&&typeof Re.geomIndex=="number"&&Re.geomIndex>=0&&f.push({layerId:Re.layerId,geomIndex:Re.geomIndex}),V&&((T=O.a)!=null&&T.layerId)&&typeof O.a.geomIndex=="number"&&f.push({layerId:O.a.layerId,geomIndex:O.a.geomIndex}),V&&((j=O.b)!=null&&j.layerId)&&typeof O.b.geomIndex=="number"&&f.push({layerId:O.b.layerId,geomIndex:O.b.geomIndex});const w=new Set;return f.filter(q=>{const $=`${q.layerId}:${q.geomIndex}`;return w.has($)?!1:(w.add($),!0)})},[V,O.a,O.b,Re]),fy=h.useMemo(()=>Fa.size===0&&!_o&&gc.size===0?null:f=>{const w=Hf(f);if(w){const le=gc.get(w);if(le)return le;if(_o&&w===_o)return gm}const T=f.featureIndex;if(T===void 0)return null;const j=f.layerId;if(!j)return null;const q=Bf.get(j);if(!q)return null;const $=Fa.get(q);return($==null?void 0:$.get(T))??null},[Hf,Fa,Bf,gc,_o]),yo=h.useCallback((f,w,T)=>{if(!f||w===void 0){X(null);return}let j=null;if(T==="odb"?j=_.current:T==="cadence"?j=v.current:j=_.current??v.current,!j){X(null);return}if(typeof j.get_feature_meta!="function"){X(null);return}try{const q=j.get_feature_meta(f,w);X(ES(q))}catch(q){console.warn("Selection meta  :",q),X(null)}},[]),mc=h.useCallback(f=>{var le;if(ft(f),!f){ee(null),X(null);return}const w=Q.layers.find(fe=>fe.id===f.layerId);if(!w){ee(null),X(null);return}const T=((le=w.shapes)==null?void 0:le.findIndex(fe=>fe.id===f.id))??-1,j=T>=0?po(w,T):f.id,q=V_(f.geometry),$={layerId:w.id,layerName:w.name,geomId:j,geomIndex:T>=0?T:void 0,featureIndex:f.featureIndex,geometryKind:f.geometry.type,bounds:q,sizeLabel:Cm(f.geometry)};ee($),yo(w.name,f.featureIndex,w.kind),bo($,w)},[yo,po,bo,Q.layers]),An=h.useCallback(()=>{ft(null),ee(null),X(null)},[]),wa=h.useCallback(()=>{ie({a:null,b:null}),ge(null),de(null)},[]);h.useEffect(()=>{const f=new Map;Q.layers.forEach(j=>{const q=Dt(j.name),$=Nt(j.name),le=Number.isFinite(j.revision)?j.revision:1;f.set(q,le),f.set($,le)});const w=S.current;let T=w.size!==f.size;if(!T){for(const[j,q]of f.entries())if(w.get(j)!==q){T=!0;break}}S.current=f,T&&(An(),wa())},[wa,An,Q.layers]);const dn=h.useMemo(()=>{if(!Re)return null;const f=Re.featureIndex!==void 0?`#${Re.featureIndex}`:Re.geomId;return{layerName:Re.layerName,featureLabel:f,geometryKind:Re.geometryKind,sizeLabel:Re.sizeLabel??Em(Re.bounds),bounds:sn({...Re.bounds}),meta:M}},[Re,M]),hy=h.useMemo(()=>{if(!dn)return[];const f=[],w=dn.meta;return w!=null&&w.netName&&f.push({type:"net",value:w.netName}),w!=null&&w.componentRef&&f.push({type:"comp",value:w.componentRef}),f.length||f.push({type:"feature",value:dn.featureLabel}),f},[dn]),gy=h.useMemo(()=>{if(!dn)return[];const f=dn.meta,w=f!=null&&f.componentRef?`${f.componentRef}${f.componentSide?` (${f.componentSide})`:""}`:"-";return[{label:C("rightPanel.selection.table.layer"),value:dn.layerName},{label:C("rightPanel.selection.table.feature"),value:dn.featureLabel},{label:C("rightPanel.selection.table.type"),value:dn.geometryKind.toUpperCase()},{label:C("rightPanel.selection.table.net"),value:(f==null?void 0:f.netName)??"-"},{label:C("rightPanel.selection.table.subnet"),value:(f==null?void 0:f.subnetType)??"-"},{label:C("rightPanel.selection.table.component"),value:w},{label:C("rightPanel.selection.table.pinToe"),value:(f==null?void 0:f.toeNo)!==void 0?String(f.toeNo):(f==null?void 0:f.pinName)??"-"},{label:C("rightPanel.selection.table.featureType"),value:(f==null?void 0:f.featureType)??"-"},{label:C("rightPanel.selection.table.size"),value:dn.sizeLabel??"-"}]},[s,dn]);h.useEffect(()=>{if(!V)return;if(!O.a||!O.b){ge(null);return}let f=_.current;if((!f||typeof f.measure_distance!="function")&&(f=v.current),!f||typeof f.measure_distance!="function"){ge(null),de("Dataset not available");return}try{const w=typeof f.measure_distance_by_geom=="function",T=typeof O.a.geomIndex=="number"&&typeof O.b.geomIndex=="number",j=w&&T?f.measure_distance_by_geom(O.a.layerRow,O.a.featureIndex,O.a.geomIndex,O.b.layerRow,O.b.featureIndex,O.b.geomIndex,G):f.measure_distance(O.a.layerRow,O.a.featureIndex,O.b.layerRow,O.b.featureIndex,G);if(!j){ge(null),de("Measurement failed");return}ge(j),de(null)}catch{ge(null),de("Measurement failed")}},[G,V,O]);const Gf=h.useCallback(()=>Q.layers.filter(f=>Q.visibleLayerIds.has(f.id)).filter(f=>f.status==="parsed").map(f=>Kr(f.name)).filter(f=>typeof f=="number"),[Kr,Q.layers,Q.visibleLayerIds]),Pr=(dn==null?void 0:dn.bounds)??null,my=dn?1:0,py=typeof((lh=_.current)==null?void 0:lh.measure_distance)=="function"||typeof((sh=v.current)==null?void 0:sh.measure_distance)=="function",by=O.a?{layerName:O.a.layerName,featureIndex:O.a.featureIndex,geometryKind:O.a.geometryKind}:null,_y=O.b?{layerName:O.b.layerName,featureIndex:O.b.featureIndex,geometryKind:O.b.geometryKind}:null,Xf=h.useCallback(()=>{const f=[];return P.forEach(w=>f.push(`net:${w}`)),se.forEach(w=>f.push(`component:${w}`)),f},[P,se]),Vf=h.useCallback(()=>{const f={},w={};P.forEach(q=>{const $=Ge.get(q);$&&(f[q]=$)}),se.forEach(q=>{const $=Y.get(q);$&&(w[q]=$)});const T=Object.keys(f).length>0,j=Object.keys(w).length>0;if(!(!T&&!j))return{net:T?f:void 0,component:j?w:void 0}},[P,se,Ge,Y]),qf=cn&&Fa.size>0,Mr=c2(e,{gridEnabled:p,onMouseMove:Pe,isDark:Er,highlightResolver:fy,onPick:mc,dimNonHighlighted:qf,onGridUpdate:(f,w)=>{Ct(T=>T===w?T:w)}}),yy=h.useCallback(f=>{console.warn("WebGPU worker failed, fallback to main thread.",f),ua(!1),mo(w=>w+1)},[]),xy=h.useCallback(f=>{console.warn("WebGPU render failed repeatedly, fallback to Canvas.",f),Je.current=!1,Pn("canvas")},[]),ea=y2(t,{onMouseMove:Pe,workerEnabled:$t,onWorkerFailure:yy,onRenderFailure:xy,odbDataset:_.current,cadenceDataset:v.current,highlightColorMap:Fa,dimNonHighlighted:qf,selectionShapes:dy,selectionColor:gm}),Zl=ea.supportsWorker;Mr.viewState,ea.viewState;const $f=Te==="webgpu"?ea.render:Mr.render,ta=Te==="webgpu"?ea.zoomToBounds:Mr.zoomToBounds,{syncAndRedraw:Jr}=ea;h.useEffect(()=>{const f=[_.current,v.current];let w=!1;for(const T of f)if(!(!T||typeof T.setWebgpuPerformanceMode!="function"))try{const j=T===_.current?"odb":"cadence";Pg(`[settings] ${j}.setWebgpuPerformanceMode(${String(En)})`,()=>T.setWebgpuPerformanceMode(En)),w=!0}catch(j){console.error("[WASM trap] setWebgpuPerformanceMode failed",{rendererType:Te,webgpuRenderPerfModeEnabled:En},j)}w&&Te==="webgpu"&&Jr()},[Te,Jr,En]);const xo=h.useCallback(()=>{const f=n.current;if(!f)return;const w=f.getContext("2d");w&&(w.clearRect(0,0,f.width,f.height),Z.current=null)},[]),Ff=h.useCallback(f=>{const w=n.current,T=Te==="webgpu"?t.current:e.current;if(!w||!T||!f||!ae||!O.a||!O.b){xo();return}(w.width!==T.width||w.height!==T.height)&&(w.width=T.width,w.height=T.height);const j=Mm(ae.point_a,f,T),q=Mm(ae.point_b,f,T),$=[T.width,T.height,f.scale.toFixed(6),f.translateX.toFixed(2),f.translateY.toFixed(2),j.x.toFixed(2),j.y.toFixed(2),q.x.toFixed(2),q.y.toFixed(2),ae.distance.toFixed(6),ae.outline_distance.toFixed(6)].join("|");if(Z.current===$)return;Z.current=$;const le=w.getContext("2d");if(!le)return;le.clearRect(0,0,w.width,w.height);const fe=window.devicePixelRatio||1,_e=Math.max(1,fe),te=4*fe;le.save(),le.lineWidth=_e,le.strokeStyle=dS,le.setLineDash([6*fe,4*fe]),le.beginPath(),le.moveTo(j.x,j.y),le.lineTo(q.x,q.y),le.stroke(),le.setLineDash([]),le.fillStyle=mm,le.beginPath(),le.arc(j.x,j.y,te,0,Math.PI*2),le.fill(),le.fillStyle=pm,le.beginPath(),le.arc(q.x,q.y,te,0,Math.PI*2),le.fill();const be=(j.x+q.x)/2,ye=(j.y+q.y)/2,me=11*fe,qe=14*fe,it=6*fe,Be=getComputedStyle(document.body).fontFamily||"sans-serif",Fe=[`dist ${at(ae.distance)}`,`outline ${at(ae.outline_distance)}`];le.font=`${me}px ${Be}`;const ue=Math.max(...Fe.map(Xt=>le.measureText(Xt).width))+it*2,Ue=qe*Fe.length+it*2;let ut=be+10*fe,Et=ye-Ue-10*fe;ut+ue>w.width&&(ut=be-ue-10*fe),Et<0&&(Et=ye+10*fe),le.fillStyle="rgba(5, 12, 24, 0.8)",le.strokeStyle="rgba(255, 255, 255, 0.2)",le.lineWidth=Math.max(1,fe*.75),le.beginPath(),le.rect(ut,Et,ue,Ue),le.fill(),le.stroke(),le.fillStyle="#e2e8f0",Fe.forEach((Xt,$e)=>{const na=ut+it,ht=Et+it+qe*($e+.8);le.fillText(Xt,na,ht)}),le.restore()},[e,xo,ae,O.a,O.b,Te,t]);h.useEffect(()=>{if(!V||!ae||!O.a||!O.b){xo();return}let f;const w=()=>{const T=Te==="webgpu"?ea.getViewState():Mr.getViewState();Ff(T),f=requestAnimationFrame(w)};return w(),()=>cancelAnimationFrame(f)},[Mr,xo,Ff,V,ae,O.a,O.b,Te,ea]);const Wf=h.useCallback(async f=>{if(Te!=="webgpu"||f.button!==0||f.shiftKey)return;const w=t.current;if(!w)return;const T=ea.getViewState();if(!T)return;const j=w.getBoundingClientRect(),q=j.width?w.width/j.width:1,$=j.height?w.height/j.height:1,le=Math.min(Math.max(f.clientX-j.left,0),j.width),fe=Math.min(Math.max(f.clientY-j.top,0),j.height),_e={x:le*q,y:fe*$},te=ha(_e.x,_e.y,w,T);if(!te)return;const be=Jn?performance.now():null,ye=ue=>{be!==null&&Rf(performance.now()-be,ue)},me=Q.layers.filter(ue=>Q.visibleLayerIds.has(ue.id));if(!me.length){An();return}const qe=T.scale>0?bm/T.scale:bm,it=mS,Be=Jn||bu,Fe=()=>{for(const ue of me){const Ue=ue.shapes;if(ue.status!=="parsed"||!Ue||Ue.length===0)continue;const ut=W_(Ue,te,qe);if(!ut)continue;const Et=ut.shape.layerId?ut.shape:{...ut.shape,layerId:ue.id};return mc(Et),ye("hit"),!0}return ye("miss"),An(),!1},Rt=ue=>{const Ue=eS(ue);if(!Ue){ye("miss"),An();return}const ut=_.current,Et=typeof(ut==null?void 0:ut.get_layer_revision)=="function"?ut.get_layer_revision():void 0,Xt=typeof Et=="bigint"||typeof Et=="number"?Et:void 0;if(Xt!==void 0){const gt=Ue.layerRevision;if(typeof Xt=="bigint"?BigInt(gt)!==Xt:Xt!==gt){ye("stale");return}}const $e=Ql(Ue.layerName),na=$e!=null&&$e.shapes&&Ue.geomIndex<$e.shapes.length?$e.shapes[Ue.geomIndex]:null,ht=na&&$e?{...na,layerId:$e.id}:null;ft(ht);const aa={layerId:($e==null?void 0:$e.id)??null,layerName:($e==null?void 0:$e.name)??Ue.layerName,geomId:Ue.geomId,geomIndex:Ue.geomIndex,featureIndex:Ue.featureIndex,geometryKind:Ue.geometryKind,bounds:Ue.bounds,sizeLabel:ht?Cm(ht.geometry):Em(Ue.bounds)};ee(aa),yo(($e==null?void 0:$e.name)??Ue.layerName,Ue.featureIndex,$e==null?void 0:$e.kind),$e&&bo(aa,$e),ye("hit")};try{let ue=_.current;(!ue||typeof ue.hit_test_webgpu!="function")&&(ue=v.current);const Ue=Gf();if(typeof(ue==null?void 0:ue.hit_test_webgpu)!="function"||Ue.length===0){Fe();return}const ut=ue===_.current?"odb":"cadence",Et=Pg(`[pick] ${ut}.hit_test_webgpu`,()=>ue.hit_test_webgpu(te.x,te.y,Ue,qe,it,T.bounds,Be));if(Et&&typeof Et.then=="function"){const Xt=await gi(`[pick] ${ut}.hit_test_webgpu:promise`,()=>Et);Rt(Xt);return}Rt(Et)}catch(ue){console.warn("WebGPU hit test failed:",ue),ye("error")}},[yo,Gf,An,bo,mc,Q.layers,Q.visibleLayerIds,Jn,Rf,Te,Ql,ea]),pc=h.useCallback(async()=>{if(!$a.current){$a.current=!0;try{for(;;){const f=Cr.current;if(!f)break;Cr.current=null,await Wf(f)}}finally{$a.current=!1,Cr.current&&Hn.current===null&&(Hn.current=requestAnimationFrame(()=>{Hn.current=null,pc()}))}}},[Wf]),Qf=h.useCallback(f=>{Cr.current=f,Hn.current===null&&(Hn.current=requestAnimationFrame(()=>{Hn.current=null,pc()}))},[pc]);h.useEffect(()=>()=>{Hn.current!==null&&(cancelAnimationFrame(Hn.current),Hn.current=null),Cr.current=null},[]),h.useEffect(()=>{!Zl&&$t&&ua(!1)},[Zl,$t]),h.useEffect(()=>{const f=w=>{if(w.defaultPrevented)return;const T=w.target;if(T){const $=T.tagName;if($==="INPUT"||$==="TEXTAREA"||T.isContentEditable)return}if(w.key.toLowerCase()!=="m")return;const j=_.current,q=v.current;!(j!=null&&j.measure_distance)&&!(q!=null&&q.measure_distance)||(w.preventDefault(),D($=>!$))};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[]),h.useEffect(()=>{Te==="webgpu"&&(U||Jr())},[U,L,k,Te,Jr]),h.useEffect(()=>{if(Te!=="webgpu")return;const f=()=>{Jr()};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[Te,Jr]);const Zf=h.useCallback(f=>{var it;const w=Te==="webgpu"?ea.getViewState():Mr.getViewState();if(!w)return null;const T=(it=f.activeLayerOverride)==null?void 0:it.trim(),j=T?Q.layers.find(Be=>Dt(Be.name)===Dt(T))??Q.layers.find(Be=>Nt(Be.name)===Nt(T)):Q.layers.find(Be=>Be.id===Q.activeLayerId);if(!j)return null;const q=f.viewBoxOverride??{...w.bounds},$=(q.minX+q.maxX)/2,le=(q.minY+q.maxY)/2,fe=Array.isArray(f.layerNamesOverride)?f.layerNamesOverride.map(Be=>Be.trim()).filter(Boolean):[],_e=f.includeLayers?fe.length?fe:Q.layers.filter(Be=>Q.visibleLayerIds.has(Be.id)).map(Be=>Be.name):[];f.includeLayers&&!_e.includes(j.name)&&_e.push(j.name);const te=Array.isArray(f.highlightTokensOverride)?f.highlightTokensOverride.map(Be=>Be.trim()).filter(Boolean):null,be=f.includeHighlights?te??Xf():[],ye=f.includeHighlights?f.highlightColorsOverride!==void 0?f.highlightColorsOverride??void 0:Vf():void 0,me=typeof f.highlightDimUnhighlightedOverride=="boolean"?f.highlightDimUnhighlightedOverride:cn,qe=Te==="webgpu"?t.current:e.current;return{layers:_e,activeLayer:f.includeLayers?j.name:void 0,highlightIncluded:f.includeHighlights,highlight:be,highlightDimUnhighlighted:me,highlightColors:ye,viewBox:q,camera:{zoom:w.scale,pan:[$,le],rotation:0},viewport:qe?{width:qe.width,height:qe.height}:void 0}},[Q.layers,Q.activeLayerId,Q.visibleLayerIds,Xf,cn,Te,Vf,ea,Mr]),Kf=h.useCallback(f=>{const w=new Set,T=new Set;return f.forEach(j=>{const q=j.trim(),$=q.indexOf(":");if($===-1)return;const le=q.slice(0,$),fe=q.slice($+1).trim();fe&&(le==="net"?w.add(fe):le==="component"&&T.add(fe))}),{nets:w,components:T}},[]),vy=h.useCallback(f=>{var j,q;const w=f.viewerState;if(Array.isArray(w.layers)&&w.layers.length>0){const $=new Set;w.layers.forEach(le=>{const fe=Ql(le);fe&&$.add(fe.id)}),$.size>0&&(Q.setAllVisible(!1),$.forEach(le=>Q.setVisibility(le,!0)))}if(typeof w.activeLayer=="string"){const $=Ql(w.activeLayer);$&&Q.selectLayer($.id)}if(typeof w.highlightDimUnhighlighted=="boolean"&&Jt(w.highlightDimUnhighlighted),w.highlightIncluded!==!1){const $=new Map,le=new Map;(j=w.highlightColors)!=null&&j.net&&Object.entries(w.highlightColors.net).forEach(([be,ye])=>{typeof ye=="string"&&$.set(be,ye)}),(q=w.highlightColors)!=null&&q.component&&Object.entries(w.highlightColors.component).forEach(([be,ye])=>{typeof ye=="string"&&le.set(be,ye)}),Se($),ne(le);const fe=Array.isArray(w.highlight)?w.highlight:[],{nets:_e,components:te}=Kf(fe);re(new Set(_e)),Ce(new Set(te))}const T=w.viewBox??w.bounds;T&&ta(T)},[Q,Ql,Kf,re,Ce,Jt,Se,ne,ta]),wy=(f,w)=>{if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvas.prototype.convertToBlob=="function")return new OffscreenCanvas(f,w);const j=document.createElement("canvas");return j.width=f,j.height=w,j},Sy=f=>f.getContext("2d"),Cy=f=>new Promise((w,T)=>{const j=new FileReader;j.onloadend=()=>{typeof j.result=="string"?w(j.result):T(new Error("Failed to read blob"))},j.onerror=()=>T(new Error("Failed to read blob")),j.readAsDataURL(f)}),Ey=async f=>{try{if("convertToBlob"in f&&typeof f.convertToBlob=="function"){const w=await f.convertToBlob({type:"image/png"});return await Cy(w)}return f.toDataURL("image/png")}catch(w){console.warn("Scene thumbnail encode failed:",w);return}},Pf=h.useCallback(f=>{const w=jt.current.then(f,f);return jt.current=w.then(()=>{},()=>{}),w},[]),vo=h.useCallback(f=>{const w=[],T=new Set,j=$=>{const le=$.trim();if(!le)return;const fe=Dt(le),_e=Q.layers.find(ye=>Dt(ye.name)===fe),te=Nt(le),be=_e??Q.layers.find(ye=>Nt(ye.name)===te)??null;!be||T.has(be.id)||(T.add(be.id),w.push(be))};return(Array.isArray(f.layers)?f.layers:[]).forEach($=>{typeof $=="string"&&j($)}),typeof f.activeLayer=="string"&&j(f.activeLayer),w.length||Q.layers.forEach($=>{Q.visibleLayerIds.has($.id)&&(T.has($.id)||(T.add($.id),w.push($)))}),w},[Q.layers,Q.visibleLayerIds]),Jf=h.useCallback(f=>{const w=Q.layers.map(q=>q.color).filter(Boolean),T=Array.from(new Set(w)),j=new Map;return f.forEach(q=>{let $=q.color;$?T.includes($)||T.push($):($=_s(T),T.push($)),j.set(q.id,$)}),j},[Q.layers]),wo=h.useCallback(f=>{var qe,it;const w=new Map;if(f.highlightIncluded===!1)return w;const T=Array.isArray(f.highlight)?f.highlight:[],j=new Set,q=new Set;if(T.forEach(Be=>{if(typeof Be!="string")return;const Fe=Be.indexOf(":");if(Fe===-1)return;const Rt=Be.slice(0,Fe),ue=Be.slice(Fe+1).trim();ue&&(Rt==="net"?j.add(ue):Rt==="component"&&q.add(ue))}),!j.size&&!q.size)return w;const $=_.current??v.current;if(!$)return w;const le=typeof $.get_net_features_by_net=="function",fe=typeof $.get_component_features_by_ref=="function";if(!le&&!fe)return w;const _e=le&&j.size?$.get_net_features_by_net(Array.from(j)):null,te=fe&&q.size?$.get_component_features_by_ref(Array.from(q)):null,be=new Map,ye=new Map;(qe=f.highlightColors)!=null&&qe.net&&Object.entries(f.highlightColors.net).forEach(([Be,Fe])=>{typeof Fe=="string"&&be.set(Be,Fe)}),(it=f.highlightColors)!=null&&it.component&&Object.entries(f.highlightColors.component).forEach(([Be,Fe])=>{typeof Fe=="string"&&ye.set(Be,Fe)});const me=(Be,Fe,Rt,ue)=>{Be&&Object.entries(Be).forEach(([Ue,ut])=>{const Et=Fe.get(Ue)??Rt;Object.entries(ut).forEach(([Xt,$e])=>{const na=Dt(Xt);let ht=w.get(na);ht||(ht=new Map,w.set(na,ht)),$e.forEach(aa=>{!ue&&ht.has(aa)||ht.set(aa,Et)})})})};return me(_e,be,al.net,!1),me(te,ye,al.component,!0),w},[]),eh=h.useCallback((f,w)=>{const T=wo(f);if(!Array.from(T.values()).some(le=>le.size>0))return null;const q=new Set(w.map(le=>Nt(le.name))),$=[];return T.forEach((le,fe)=>{if(!q.has(fe)||le.size===0)return;const _e=[];le.forEach((te,be)=>{_e.push({featureNo:be,color:te})}),$.push({layerKey:fe,features:_e})}),$.length?{layers:$,dimNonHighlighted:!!f.highlightDimUnhighlighted}:null},[wo]),th=h.useCallback((f,w)=>{var aa;const T=vo(f);if(!T.length)return null;const j=[];if(T.forEach(gt=>{gt.status!=="parsed"||!gt.shapes||gt.shapes.forEach(ra=>{j.push({...ra,layerId:gt.id})})}),!j.length)return null;const q=qr(j),$=f.viewBox??f.bounds??q??null;if(!$)return null;const le=Cd(sn({...$})),te=wy(w,w),be=Sy(te);if(!be)return null;const ye=Jf(T),me=new Map;T.forEach(gt=>me.set(gt.id,Nt(gt.name)));const qe=wo(f),it=Array.from(qe.values()).some(gt=>gt.size>0),Be=!!f.highlightDimUnhighlighted&&it,Fe=T.length>1||Be,Rt=gt=>{const ra=gt.featureIndex;if(ra===void 0)return null;const es=gt.layerId;if(!es)return null;const ts=me.get(es);if(!ts)return null;const ns=qe.get(ts);return(ns==null?void 0:ns.get(ra))??null},ue=typeof f.activeLayer=="string"?f.activeLayer:null,Ue=ue?T.find(gt=>Dt(gt.name)===Dt(ue))??T.find(gt=>Nt(gt.name)===Nt(ue)):null,ut=(Ue==null?void 0:Ue.id)??((aa=T[0])==null?void 0:aa.id)??null,Et=ut?ye.get(ut)??null:null;return X_(te,be,j,le,0,{gridEnabled:p,layerColor:!Fe&&Et?Et:void 0,colorResolver:(Fe?gt=>gt.layerId?ye.get(gt.layerId)??null:null:null)??void 0,highlightResolver:(it?Rt:null)??void 0,dimNonHighlighted:Be}),te},[wo,Jf,p,vo]),So=h.useCallback(async(f,w=_m)=>{if(Te==="webgpu"){const j=_.current;if(j&&typeof OffscreenCanvas<"u")try{const $=vo(f).filter(le=>le.kind==="odb"&&le.status==="parsed");if($.length>0){const le=w,fe=w,_e=f.viewBox??f.bounds,te=_e?Cd(sn({..._e})):null,be=$.map(me=>({layerName:me.name,id:me.id,revision:me.revision??1,color:me.color})),ye=eh(f,$);return await Pf(async()=>{let me=xt.current;me||(me={canvas:new OffscreenCanvas(le,fe),key:`thumbnail-offscreen-${Math.random().toString(36).slice(2,10)}`},xt.current=me),me.canvas.width!==le&&(me.canvas.width=le),me.canvas.height!==fe&&(me.canvas.height=fe),await j.render_layers_webgpu_offscreen(me.key,me.canvas,be,te,ye);const qe=await me.canvas.convertToBlob({type:"image/png"});return await new Promise(it=>{const Be=new FileReader;Be.onloadend=()=>it(Be.result),Be.readAsDataURL(qe)})})}}catch(q){const $=xt.current;if($){try{Gg($.key)}catch(le){console.warn("Failed to drop WebGPU offscreen cache:",le)}xt.current=null}console.warn("WebGPU viewer state thumbnail failed, falling back:",q)}}const T=th(f,w);if(T)return await Ey(T)},[Te,th,vo,Pf,eh]),My=h.useCallback(async(f,w)=>{if(w==="exclude")return f;const T=w==="highRes"?bS:_m,j=[];for(const q of f){const $=typeof q.thumbnail=="string"&&q.thumbnail.trim().length>0,le=w==="highRes"||!$;let fe=q.thumbnail;if(le){const _e=await So(q.viewerState,T);_e&&(fe=_e)}j.push({...q,thumbnail:fe})}return j},[So]),Co=h.useCallback(async(f,w)=>{if(ce.status!=="ready")return;const T=kS(f,w),j=Q.addLayer(f,T,w);try{let q;switch(T){case"gerber":q=ce.parseGerber(w);break;case"excellon":q=ce.parseExcellon(w);break;case"pgeom":q=ce.parsePgeom(w);break;default:throw new Error(`Unknown layer kind: ${T}`)}const $=Array.isArray(q)?q:q==null?void 0:q.shapes;Array.isArray($)?Q.setLayerShapes(j,$,JSON.stringify($)):Q.setLayerStatus(j,"error","No shapes found")}catch(q){const $=q instanceof Error?q.message:String(q);Q.setLayerStatus(j,"error",$)}},[ce,Q]),el=h.useCallback(()=>{Q.clearLayers(),_.current=null,v.current=null,S.current=new Map,N.current=new Map,R([]),F([]),re(new Set),Ce(new Set),An(),wa()},[wa,An,Q]),nh=h.useCallback(async f=>{try{const T=(await G2(f)).filter(j=>AS(j.name));if(T.length===0){console.warn("No supported layers found in zip:",f.name);return}for(const j of T){const q=j.name.split("/").pop()??j.name;j.text.trim()&&await Co(q,j.text)}}catch(w){console.error("Failed to read zip file:",f.name,w)}},[Co]),Eo=h.useCallback(async f=>{ve==="replace"&&el();for(const w of f){const T=w.name.toLowerCase();if(MS(T)){await nh(w);continue}if(NS(T)){console.warn("Tar archives are not supported yet:",w.name);continue}try{const j=await w.arrayBuffer(),q=new Uint8Array(j);let $;if(ly(q)?$=await sy(q):T.endsWith(".gz")?$=await TS(q):$=new TextDecoder("utf-8").decode(q),!$.trim()){console.warn("Empty or unreadable file:",w.name);continue}await Co(w.name,$)}catch(j){console.error("Failed to read file:",w.name,j)}}},[nh,Co,el,ve]),Mo=h.useCallback(async f=>{if(ce.status!=="ready")return;if(!um(f)){console.warn("Not a valid ODB++ job folder");return}let w="init";try{const T=Nn,j=xa,q=Te==="webgpu"&&Gt,$=q&&jf,le=T?performance.now():0,fe={},_e=[],te=Z2(),be=T?Sm():null;el();const ye=tS(f),me=`[ODB load perf] ${ye}`;T&&console.log(`${me} start`,{filesInput:f.length,heapMb:be===null?null:at(be,1),skipDocumentLayers:j,useCacheOnly:q,useGeomCacheOnly:$});const qe=new Map,it=new Map,Be=T?performance.now():0;w="fileReadAndMerge",T&&console.log(`${me} stage:fileReadAndMerge:start`);try{const Me=aS(f),He=await Promise.all(Me.map(mt=>rS(mt)));He.sort((mt,fn)=>{const pn=mt.path.localeCompare(fn.path);return pn!==0?pn:mt.sourcePath.localeCompare(fn.sourcePath)});for(const mt of He)lS(qe,it,mt);T&&(fe.fileReadAndMerge=performance.now()-Be,console.log(`${me} stage:fileReadAndMerge:end`,{ms:at(fe.fileReadAndMerge,2),filesMerged:qe.size}))}catch(Me){T&&console.error(`${me} stage:fileReadAndMerge:fail`,Me),console.error("ODB++ file read failed:",Me);return}let Fe=[];const Rt=new Map;let ue=null,Ue=!1,ut=null;const Et=T?performance.now():0;w="datasetCreateAndLayers",T&&console.log(`${me} stage:datasetCreateAndLayers:start`);try{const Me=Object.fromEntries(qe);ue=ce.createOdbDataset(ye,Me),typeof ue.setWebgpuPerformanceMode=="function"&&ue.setWebgpuPerformanceMode(En),Fe=ue.get_all_layers()??[],Ue=q&&ue&&typeof ue.has_all_layer_geoms_cached=="function"&&!!ue.has_all_layer_geoms_cached(),ut=ue&&typeof ue.get_init_perf_stats=="function"?ue.get_init_perf_stats():null;for(const He of Fe){const mt=Dt(He.name),fn=Nt(He.name),pn=typeof He.layerType=="string"?He.layerType.trim().toLowerCase():"";pn&&(Rt.set(mt,pn),Rt.set(fn,pn))}T&&(fe.datasetCreateAndLayers=performance.now()-Et,console.log(`${me} stage:datasetCreateAndLayers:end`,{ms:at(fe.datasetCreateAndLayers,2),matrixLayers:Fe.length,documentLayers:Fe.filter(He=>(He.layerType??"").toLowerCase()==="document").length,hasPreCachedLayerGeoms:Ue,initPerf:ut}))}catch(Me){T&&console.error(`${me} stage:datasetCreateAndLayers:fail`,Me),console.error("ODB++ dataset creation failed:",Me);return}const Xt=Array.from(qe.entries()).filter(([Me])=>nS(Me)),$e=j?Xt.filter(([Me])=>{const{label:He,layer:mt}=dm(Me),fn=mt??He;return Rt.get(Dt(fn))!=="document"}):Xt,na=Xt.length-$e.length,ht=[],aa=Q.layers.map(Me=>Me.color).filter(Boolean),gt=T?performance.now():0;let ra=0,es=0,ts=0;w="layerFeaturePrepare",T&&console.log(`${me} stage:layerFeaturePrepare:start`,{featureFilesTotal:Xt.length,featureFiles:$e.length,skippedDocumentFeatureFiles:na,useCacheOnly:q,useGeomCacheOnly:$,hasPreCachedLayerGeoms:Ue});for(const[Me,He]of $e){if(!He.trim()){console.warn("Empty ODB++ features, skipping:",Me);continue}const{label:mt,layer:fn}=dm(Me),pn=ht.map(Wa=>Wa.color).filter(Boolean),Ao=_s([...aa,...pn]),To=T?performance.now():0,bn=fn??mt;ra+=1,T&&(ra===1||ra%5===0||ra===$e.length)&&console.log(`${me} layer:start`,{index:ra,total:$e.length,layer:bn,elapsedMs:at(performance.now()-gt,1)});try{const Wa=!Ue&&q&&ue&&typeof ue.parse_odb_layer_features_cache_only=="function",Zy=!Ue&&$&&ue&&typeof ue.parse_odb_layer_features_geom_cache_only=="function";let Nr=null,Sa=0,Ar="error",ko=!1,xc=null;if(Ue&&ue){const Ft=typeof ue.get_cached_layer_geom_count=="function"?ue.get_cached_layer_geom_count(bn):0;Sa=typeof Ft=="number"&&Number.isFinite(Ft)?Math.max(0,Math.floor(Ft)):0,Ar=Sa>0?"parsed":"error"}else if(Zy){ts+=1,ue.parse_odb_layer_features_geom_cache_only(bn,He),ko=!0;const Ft=typeof ue.get_cached_layer_geom_count=="function"?ue.get_cached_layer_geom_count(bn):0;Sa=typeof Ft=="number"&&Number.isFinite(Ft)?Math.max(0,Math.floor(Ft)):0,Ar=Sa>0?"parsed":"error"}else if(Wa){es+=1,ue.parse_odb_layer_features_cache_only(bn,He),ko=!0;const Ft=typeof ue.get_cached_layer_geom_count=="function"?ue.get_cached_layer_geom_count(bn):0;Sa=typeof Ft=="number"&&Number.isFinite(Ft)?Math.max(0,Math.floor(Ft)):0,Ar=Sa>0?"parsed":"error"}else ue&&typeof ue.parse_odb_layer_features_scene=="function"?(Nr=ue.parse_odb_layer_features_scene(bn,He),ko=!0,Sa=Nr.length,Ar=Nr.length?"parsed":"error"):(Nr=ce.parseOdbFeatures(He),Sa=Nr.length,Ar=Nr.length?"parsed":"error");if(T&&ko&&ue&&typeof ue.get_last_odb_layer_prepare_perf=="function")try{const Ft=ue.get_last_odb_layer_prepare_perf();Ft&&typeof Ft=="object"&&(xc=Ft)}catch{xc=null}if(ht.push({id:`layer-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:mt,kind:"odb",status:Ar,rawText:"",shapes:Nr,revision:1,color:Ao,errorMessage:Ar==="error"?"No shapes found":void 0}),T){const Ft=performance.now()-To,la=K2(xc,Ft);P2(te,la),_e.push({layer:bn,path:Me,ms:Ft,shapeCount:Sa,geomCount:la.geomCount,mode:la.mode,wasmTotalMs:la.wasmTotalMs,jsOverheadMs:la.jsOverheadMs,parseMs:la.parseMs,resolveCatalogMs:la.resolveCatalogMs,featureStoreMs:la.featureStoreMs,geomConvertMs:la.geomConvertMs,geomStoreMs:la.geomStoreMs,sceneBuildMs:la.sceneBuildMs})}}catch(Wa){console.error(`ODB++ layer parse failed (${Me}):`,Wa),ht.push({id:`layer-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:mt,kind:"odb",status:"error",rawText:"",shapes:[],revision:1,color:Ao,errorMessage:Wa instanceof Error?Wa.message:String(Wa)}),T&&_e.push({layer:bn,path:Me,ms:performance.now()-To,shapeCount:0,geomCount:0,mode:null,wasmTotalMs:null,jsOverheadMs:null,parseMs:null,resolveCatalogMs:null,featureStoreMs:null,geomConvertMs:null,geomStoreMs:null,sceneBuildMs:null})}}T&&(fe.layerFeaturePrepare=performance.now()-gt,console.log(`${me} stage:layerFeaturePrepare:end`,{ms:at(fe.layerFeaturePrepare,2),breakdown:{layersWithWasmStats:te.layersWithWasmStats,parseMs:at(te.parseMs,2),resolveCatalogMs:at(te.resolveCatalogMs,2),featureStoreMs:at(te.featureStoreMs,2),geomConvertMs:at(te.geomConvertMs,2),geomStoreMs:at(te.geomStoreMs,2),sceneBuildMs:at(te.sceneBuildMs,2),wasmTotalMs:at(te.wasmTotalMs,2),jsOverheadMs:at(te.jsOverheadMs,2)}}));const ns=T?performance.now():0;if(w="cachedLayerSceneHydrate",T&&console.log(`${me} stage:cachedLayerSceneHydrate:start`),ue&&typeof ue.has_cached_layer_geoms=="function"){const Me=new Set(ht.map(He=>Dt(He.name)));for(const He of Fe){const mt=Dt(He.name);if(Me.has(mt))continue;let fn=!1;try{fn=ue.has_cached_layer_geoms(He.name)}catch{fn=!1}if(!fn)continue;let pn=[];try{const bn=ue.get_cached_layer_scene(He.name);Array.isArray(bn)&&(pn=bn)}catch{pn=[]}if(!pn.length)continue;const Ao=ht.map(bn=>bn.color).filter(Boolean),To=_s([...aa,...Ao]);ht.push({id:`layer-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:He.name,kind:"odb",status:"parsed",rawText:"",shapes:pn,revision:1,color:To}),Me.add(mt)}}if(T&&(fe.cachedLayerSceneHydrate=performance.now()-ns,console.log(`${me} stage:cachedLayerSceneHydrate:end`,{ms:at(fe.cachedLayerSceneHydrate,2)})),!ht.length){console.warn("No ODB++ layers found");return}const _c=new Map;Fe.forEach(Me=>{const He=Dt(Me.name),mt=Nt(Me.name);_c.set(He,Me.row),_c.set(mt,Me.row)}),N.current=_c;const Wy=Fe.slice().sort((Me,He)=>Me.row-He.row).map(Me=>Me.name.toLowerCase()),oh=Me=>{var fn;const He=((fn=Me.split("/").pop())==null?void 0:fn.toLowerCase())??Me.toLowerCase(),mt=Wy.indexOf(He);return mt===-1?Number.MAX_SAFE_INTEGER:mt};ht.sort((Me,He)=>{const mt=oh(Me.name)-oh(He.name);return mt!==0?mt:Me.name.localeCompare(He.name,void 0,{numeric:!0})});const Qy=T?performance.now():0;w="stateAndDatasetCommit",T&&console.log(`${me} stage:stateAndDatasetCommit:start`),Q.replaceOdbLayers(ht),_.current=ue;try{const Me=(ue==null?void 0:ue.get_net_list())??[],He=(ue==null?void 0:ue.get_component_list())??[];R(Me),F(He),re(new Set),Ce(new Set),Se(new Map),ne(new Map),An(),wa(),console.log(`Nets: ${Me.length}, Components: ${He.length}`)}catch(Me){console.warn("Net/Component   :",Me),R([]),F([])}const yc=ht.filter(Me=>Me.status==="parsed").length;if(console.log(`ODB++ job loaded: ${ye}, ${yc}/${ht.length} layers`),T){fe.stateAndDatasetCommit=performance.now()-Qy;const Me=performance.now()-le,He=Sm();J2({jobName:ye,totalMs:Me,parsedLayerCount:yc,layerTotal:ht.length,counts:{filesInput:f.length,filesMerged:qe.size,featureFilesTotal:Xt.length,featureFiles:$e.length,skippedDocumentFeatureFiles:na,skipDocumentLayers:j,useCacheOnly:q,useGeomCacheOnly:$,hasPreCachedLayerGeoms:Ue,cacheOnlyLayerCount:es,geomCacheOnlyLayerCount:ts,matrixLayers:Fe.length,parsedLayers:yc,initPerf:ut,layerPrepareBreakdown:te},stageMs:fe,layerParseRows:_e,heapStartMb:be,heapEndMb:He})}}catch(T){throw console.error(`[ODB++ load] unexpected failure at stage=${w}`,T),T}},[wa,An,Q,Gt,jf,Nn,Te,el,xa,ce,En]),Kl=h.useCallback(async f=>{if(ce.status!=="ready")return;if(!fm(f)){console.warn("Not a valid Cadence Allegro folder");return}el();const w=sS(f);let T;try{T=await cS(f)}catch(te){console.error("Cadence file read failed:",te);return}let j=null,q=[];try{j=ce.createCadenceDataset(w,T),typeof j.setWebgpuPerformanceMode=="function"&&j.setWebgpuPerformanceMode(En),q=j.get_all_layers()??[]}catch(te){console.error("Cadence dataset creation failed:",te);return}const $=[],le=Q.layers.map(te=>te.color).filter(Boolean);let fe={};try{fe=j.get_all_layer_scenes()}catch(te){console.error("Failed to get layer scenes:",te);return}for(const te of q){const be=$.map(it=>it.color).filter(Boolean),ye=_s([...le,...be]),me=fe[te.name.toUpperCase()]??[],qe=me.length>0?"parsed":"error";me.length>0?$.push({id:`layer-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:te.name,kind:"cadence",status:qe,rawText:"",shapes:me,revision:1,color:ye}):console.debug(`Cadence layer ${te.name}: no geometry`)}if(!$.length){console.warn("No Cadence layers found with geometry");return}const _e=new Map;q.forEach(te=>{const be=Dt(te.name),ye=Nt(te.name);_e.set(be,te.row),_e.set(ye,te.row)}),N.current=_e,$.sort((te,be)=>{const ye=_e.get(Dt(te.name))??Number.MAX_SAFE_INTEGER,me=_e.get(Dt(be.name))??Number.MAX_SAFE_INTEGER;return ye!==me?ye-me:te.name.localeCompare(be.name,void 0,{numeric:!0})}),Q.replaceOdbLayers($),v.current=j,_.current=null;try{const te=(j==null?void 0:j.get_net_list())??[],be=(j==null?void 0:j.get_component_list())??[];R(te),F(be),re(new Set),Ce(new Set),Se(new Map),ne(new Map),An(),wa(),console.log(`Cadence Nets: ${te.length}, Components: ${be.length}`)}catch(te){console.warn("Net/Component list fetch failed:",te),R([]),F([])}console.log(`Cadence design loaded: ${w}, ${$.filter(te=>te.status==="parsed").length}/${$.length} layers`)},[wa,An,Q,el,ce,En]),No=h.useCallback(f=>{const w=uS(f);if(w.length===0)Kl(f);else if(w.length===1){const T=hm(f,w[0]);Kl(T)}else he(f),Ke(w)},[Kl]),Ny=h.useCallback(f=>{if(!oe||!f)return;const w=hm(oe,f);Kl(w),he(null),Ke([])},[oe,Kl]),ah=h.useCallback(()=>{he(null),Ke([])},[]),Ay=h.useCallback(()=>{var f;(f=a.current)==null||f.click()},[]),Ty=h.useCallback(()=>{var f;(f=r.current)==null||f.click()},[]),ky=h.useCallback(()=>{var f;(f=l.current)==null||f.click()},[]),Dy=h.useCallback(()=>{Te==="canvas"&&g(f=>!f)},[Te]),Ly=h.useCallback(f=>{f!==Te&&(f==="webgpu"&&!va||(Je.current=!0,Pn(f)))},[Te,va]),Oy=h.useCallback(()=>{!Zl||Te!=="webgpu"||(ua(f=>!f),mo(f=>f+1))},[Te,Zl]),jy=h.useCallback(()=>{fc(f=>!f)},[]),Ry=h.useCallback(()=>{hc(f=>!f)},[]),By=h.useCallback(f=>{re(w=>{const T=new Set(w);return T.has(f)?T.delete(f):T.add(f),T})},[]),zy=h.useCallback(f=>{Ce(w=>{const T=new Set(w);return T.has(f)?T.delete(f):T.add(f),T})},[]),Uy=h.useCallback(()=>{re(new Set),Ce(new Set)},[]),Pl=h.useCallback(()=>{let f=_.current;if(f||(f=v.current),!f)return null;const w=Array.from(P),T=Array.from(se);if(!w.length&&!T.length)return null;const j=typeof f.get_net_bounds_by_net=="function",q=typeof f.get_component_bounds_by_ref=="function";if(!j&&!q)return null;let $=null;const le=(te,be)=>te?{minX:Math.min(te.minX,be.minX),minY:Math.min(te.minY,be.minY),maxX:Math.max(te.maxX,be.maxX),maxY:Math.max(te.maxY,be.maxY)}:be,fe=te=>{if(!te||typeof te!="object")return null;const be=typeof te.minX=="number"?te.minX:typeof te.min_x=="number"?te.min_x:null,ye=typeof te.minY=="number"?te.minY:typeof te.min_y=="number"?te.min_y:null,me=typeof te.maxX=="number"?te.maxX:typeof te.max_x=="number"?te.max_x:null,qe=typeof te.maxY=="number"?te.maxY:typeof te.max_y=="number"?te.max_y:null;return be===null||ye===null||me===null||qe===null||!Number.isFinite(be)||!Number.isFinite(ye)||!Number.isFinite(me)||!Number.isFinite(qe)?null:{minX:be,minY:ye,maxX:me,maxY:qe}},_e=te=>{!te||typeof te!="object"||Object.values(te).forEach(be=>{const ye=fe(be);ye&&($=le($,ye))})};try{if(j&&w.length){const te=f.get_net_bounds_by_net(w);_e(te)}if(q&&T.length){const te=f.get_component_bounds_by_ref(T);_e(te)}}catch(te){return console.warn(" bounds  :",te),null}return $?sn($):null},[P,se]),Hy=j2({layerState:Q,nets:z,components:K,selectedNets:P,selectedComponents:se,setSelectedNets:re,setSelectedComponents:Ce,netHighlightColors:Ge,componentHighlightColors:Y,setNetHighlightColors:Se,setComponentHighlightColors:ne,dimNonHighlighted:cn,setDimNonHighlighted:Jt,autoShowLayers:It,setAutoShowLayers:Yt,traceOnly:wt,setTraceOnly:Pt,getHighlightBounds:Pl,zoomToBounds:ta,odbDatasetRef:_,cadenceDatasetRef:v,buildViewerState:Zf,captureViewerStateThumbnail:So}),Jl=A2({viewerApi:Hy}),Iy=h.useCallback(()=>{const f=Pl();f&&ta(f)},[Pl,ta]),Yy=h.useCallback(()=>{Pr&&ta(Pr)},[Pr,ta]),Gy=h.useMemo(()=>({autoFit:ke,autoShowLayers:It,traceOnly:wt,dimNonHighlighted:cn}),[ke,It,wt,cn]),Xy=h.useCallback((f,w)=>{switch(f){case"autoFit":ze(w);break;case"autoShowLayers":Yt(w);break;case"traceOnly":Pt(w);break;case"dimNonHighlighted":Jt(w);break}},[]),bc=h.useCallback(f=>{const w=f.target.files?Array.from(f.target.files):[];if(w.length>0){const T=f.target===r.current;f.target===l.current?No(w).catch(q=>{console.error("Cadence folder processing failed:",q)}):T?Mo(w).catch(q=>{console.error("ODB++ folder processing failed:",q)}):Eo(w).catch(q=>{console.error("File processing failed:",q)})}f.target.value=""},[Eo,Mo,No]),Vy=h.useCallback(f=>{fm(f)?No(f).catch(w=>{console.error("Dropped Cadence processing failed:",w)}):um(f)?Mo(f).catch(w=>{console.error("Dropped ODB++ processing failed:",w)}):Eo(f).catch(w=>{console.error("Dropped file processing failed:",w)})},[Eo,Mo,No]),{isDragging:qy,dropRef:$y}=v2({onDrop:Vy,accept:oy});h.useEffect(()=>{if(ce.status!=="ready")return;const f=Q.layers.some(w=>Q.visibleLayerIds.has(w.id)&&w.status==="parsed");x(!f),$f(Q.layers,Q.visibleLayerIds)},[ce.status,Q.layers,Q.visibleLayerIds,$f,Te,Fl]),h.useEffect(()=>{if(!ke||P.size===0&&se.size===0)return;const f=Pl();f&&ta(f)},[ke,P,se,Pl,ta]),h.useEffect(()=>{st&&Pr&&ta(Pr)},[st,Pr,ta]);const rh=h.useRef({nets:"",components:"",traceOnly:!1});h.useEffect(()=>{if(!It)return;const f=Array.from(P).sort().join(","),w=Array.from(se).sort().join(","),T=rh.current;if(T.nets===f&&T.components===w&&T.traceOnly===wt)return;rh.current={nets:f,components:w,traceOnly:wt};const j=_.current??v.current,q=Array.from(P).map(_e=>_e.trim()).filter(Boolean);let $=null;if(j&&typeof j.get_net_layer_counts=="function"&&q.length>0)try{const _e=wt?"trc":"all",te=j.get_net_layer_counts(q,_e),be=new Set;Object.values(te??{}).forEach(me=>{!me||typeof me!="object"||Object.entries(me).forEach(([qe,it])=>{typeof it!="number"||!Number.isFinite(it)||it<=0||be.add(Nt(qe))})});const ye=new Set;Q.layers.forEach(me=>{be.has(Nt(me.name))&&ye.add(me.id)}),$=ye}catch(_e){console.warn("Net layer counts  :",_e)}const le=new Set;if($&&se.size>0&&j&&typeof j.get_component_details=="function")try{const _e=j.get_component_details(Array.from(se)),te=(_e==null?void 0:_e.results)??[],be=new Set(te.map(ye=>(ye.side??"").toLowerCase()).filter(Boolean));Q.layers.forEach(ye=>{const me=Nt(ye.name);(be.has("top")&&me===Nt("COMP_OUTLINE_TOP")||be.has("bottom")&&me===Nt("COMP_OUTLINE_BOTTOM"))&&($.add(ye.id),le.add(ye.id))})}catch(_e){console.warn("    :",_e)}if($){if($.size===0)return;Q.setAllVisible(!1),$.forEach(te=>Q.setVisibility(te,!0));const _e=Q.layers.find(te=>$.has(te.id)&&!le.has(te.id))??Q.layers.find(te=>$.has(te.id));_e&&Q.selectLayer(_e.id);return}if(Fa.size===0)return;const fe=new Set;Fa.forEach((_e,te)=>{Q.layers.forEach(be=>{Nt(be.name)===te&&!Q.visibleLayerIds.has(be.id)&&fe.add(be.id)})}),fe.forEach(_e=>{Q.toggleVisibility(_e)})},[It,Fa,P,se,wt,Q]),h.useEffect(()=>{const f=e.current;if(!f)return;const w=()=>{et()};return f.addEventListener("mouseleave",w),()=>{f.removeEventListener("mouseleave",w)}},[et]),h.useEffect(()=>{const f=t.current;if(!f||Te!=="webgpu")return;const w=$=>{$.button===0&&(Wl.current={x:$.clientX,y:$.clientY},Sr.current=!1)},T=$=>{const le=Wl.current;if(!le)return;const fe=$.clientX-le.x,_e=$.clientY-le.y;Math.hypot(fe,_e)>=fS&&(Sr.current=!0)},j=()=>{Wl.current=null},q=$=>{if(Sr.current){Sr.current=!1;return}Qf({clientX:$.clientX,clientY:$.clientY,button:$.button,shiftKey:$.shiftKey})};return f.addEventListener("mousedown",w),f.addEventListener("mousemove",T),f.addEventListener("mouseup",j),f.addEventListener("click",q),()=>{f.removeEventListener("mousedown",w),f.removeEventListener("mousemove",T),f.removeEventListener("mouseup",j),f.removeEventListener("click",q)}},[Te,Qf,Fl]);const Fy=h.useMemo(()=>{const f=Q.layers.find(w=>w.id===Q.activeLayerId);return(f==null?void 0:f.name)??null},[Q.layers,Q.activeLayerId]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:$y,className:"h-full flex flex-col app-shell",children:[c.jsx("input",{ref:a,type:"file",multiple:!0,accept:pS,className:"hidden",onChange:bc}),c.jsx("input",{ref:r,type:"file",webkitdirectory:"",directory:"",multiple:!0,className:"hidden",onChange:bc}),c.jsx("input",{ref:l,type:"file",webkitdirectory:"",directory:"",multiple:!0,className:"hidden",onChange:bc}),c.jsx(Sw,{isDark:Er,onToggleTheme:Mn,onOpenGerberFiles:Ay,onOpenOdbFolder:Ty,onOpenCadenceFolder:ky,isScenePanelOpen:A,onToggleScenePanel:()=>B(f=>!f),importMode:ve,onImportModeChange:kt,renderer:Te,supportsWebgpu:va,onRendererChange:Ly,webgpuWorkerEnabled:$t,supportsWebgpuWorker:Zl,onToggleWebgpuWorker:Oy,skipDocumentLayersEnabled:xa,onToggleSkipDocumentLayers:jy,webgpuRenderPerfModeEnabled:En,onToggleWebgpuRenderPerfMode:Ry}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx(Nw,{layers:Q.layers,visibleLayerIds:Q.visibleLayerIds,selectedLayerId:Q.activeLayerId,onToggleVisibility:Q.toggleVisibility,onSelectLayer:Q.selectLayer,onRemoveLayer:Q.removeLayer,onColorChange:Q.setLayerColor,onShowAll:()=>Q.setAllVisible(!0),onHideAll:()=>Q.setAllVisible(!1),width:L}),c.jsx("div",{className:`panel-resizer${U==="left"?" panel-resizer--active":""}`,role:"separator","aria-orientation":"vertical","aria-label":"Resize left panel",onPointerDown:b("left")}),c.jsx(Tw,{canvasRef:e,webgpuCanvasRef:t,measureOverlayRef:n,isLoading:ce.status==="loading",isEmpty:m,isDragging:qy,rendererType:Te,webgpuCanvasKey:Fl}),c.jsx("div",{className:`panel-resizer${U==="right"?" panel-resizer--active":""}`,role:"separator","aria-orientation":"vertical","aria-label":"Resize right panel",onPointerDown:b("right")}),c.jsx(Rw,{width:k,nets:z,components:K,selectedNets:P,selectedComponents:se,getHighlightColor:cy,onHighlightColorChange:uy,onToggleNet:By,onToggleComponent:zy,onClearHighlights:Uy,onZoomFit:Iy,selectionMeta:M,selectionEntries:hy,selectionInfoRows:gy,selectionCount:my,onSelectionZoomFit:Yy,selectionAutoFit:st,onSelectionAutoFitChange:en,onClearSelection:An,measureMode:V,measureAvailable:py,measureIncludeWidth:G,onMeasureModeChange:D,onMeasureIncludeWidthChange:H,onClearMeasure:wa,measureTargetA:by,measureTargetB:_y,measureResult:ae,measureError:we,highlightOptions:Gy,onHighlightOptionChange:Xy})]}),c.jsx(jw,{gridEnabled:p,gridSpacing:un,onToggleGrid:Dy,gridAvailable:Te==="canvas",mcpStatus:Jl.status,mcpEnabled:Jl.enabled,mcpActive:Jl.active,onMcpReconnect:Jl.reconnect,onMcpDisconnect:Jl.disconnect}),c.jsx(r1,{isOpen:A,onClose:()=>B(!1),buildViewerState:Zf,onApplySnapshot:vy,captureThumbnail:So,prepareExportScenes:My,defaultTitle:Fy})]}),Le.length>0&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",onClick:ah,children:c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 min-w-[280px] max-w-md shadow-xl",onClick:f=>f.stopPropagation(),role:"dialog","aria-modal":"true",children:[c.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:C("cadencePicker.title")}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:C("cadencePicker.description")}),c.jsx("div",{className:"flex flex-col gap-2 mb-4",children:Le.map(f=>c.jsx("button",{className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-left text-white",onClick:()=>Ny(f),children:f},f))}),c.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded text-white",onClick:ah,children:C("cadencePicker.cancel")})]})})]})}const Nm="__cocoPatchedRequestDevice";function LS(){var a;const e=globalThis.GPUAdapter,t=(a=e==null?void 0:e.prototype)==null?void 0:a.requestDevice;if(!t||t[Nm])return;const n=function(r){if(r!=null&&r.requiredLimits){const l=this.limits;if(l){const s=r.requiredLimits,o={};let i=!1;for(const[d,p]of Object.entries(s))l[d]!==void 0?o[d]=p:i=!0;if(i){const d={...r,requiredLimits:o};return t.call(this,d)}}}return t.call(this,r)};n[Nm]=!0,e!=null&&e.prototype&&(e.prototype.requestDevice=n)}const _u={};LS();function yu(e){if(e==null)return null;const t=e.trim().toLowerCase();return t.length===0?null:t==="1"||t==="true"||t==="on"||t==="yes"?!0:t==="0"||t==="false"||t==="off"||t==="no"?!1:null}function OS(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search),n=yu(t.get("bootLog"))??yu(t.get("initLog"));if(n!==null)return n}const e=typeof import.meta<"u"?_u==null?void 0:_u.VITE_BOOT_LOG:void 0;return yu(e)??!1}const jS=OS(),Ps=(...e)=>{jS&&console.log(...e)};typeof window<"u"&&(window.addEventListener("error",e=>{(e.message??"").includes("RuntimeError: unreachable")&&console.error("[WASM trap][window.error]",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,context:Kg(),error:e.error})}),window.addEventListener("unhandledrejection",e=>{String(e.reason??"").includes("RuntimeError: unreachable")&&console.error("[WASM trap][unhandledrejection]",{context:Kg(),reason:e.reason})}));Ps("Starting WASM initialization...");const RS=Y_().then(()=>{if(Ps("WASM init successful, calling activate()..."),!l1())throw new Error("WASM activation failed: unauthorized origin");Ps("WASM activation successful")}).catch(e=>{throw console.error("WASM initialization failed:",e),e});RS.then(()=>{Ps("Mounting React app...");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");Qv.createRoot(e).render(c.jsx(h.StrictMode,{children:c.jsx(DS,{})})),Ps("React app mounted successfully")}).catch(e=>{console.error("Failed to mount React app:",e);const t=document.getElementById("root");if(t){const n=document.createElement("div");n.style.cssText="padding: 20px; color: #ff6b6b; font-family: monospace;";const a=document.createElement("h2");a.textContent="Failed to initialize application";const r=document.createElement("pre");r.textContent=e.message||String(e);const l=document.createElement("p");l.textContent="Check browser console for details (F12)",n.appendChild(a),n.appendChild(r),n.appendChild(l),t.replaceChildren(n)}});
